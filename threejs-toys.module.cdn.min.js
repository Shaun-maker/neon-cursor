<!DOCTYPE html><html lang="en"><head><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-140352188-1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-140352188-1');</script><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/><meta name="description" content="The CDN for threejs-toys"/><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"/><meta name="timestamp" content="2023-03-04T11:09:02.222Z"/><link rel="shortcut icon" href="/favicon.ico"/><title>UNPKG - threejs-toys</title><script>window.Promise || document.write('\x3Cscript src="/es6-promise@4.2.5/dist/es6-promise.min.js">\x3C/script>\x3Cscript>ES6Promise.polyfill()\x3C/script>')</script><script>window.fetch || document.write('\x3Cscript src="/whatwg-fetch@3.0.0/dist/fetch.umd.js">\x3C/script>')</script><script>window.__DATA__ = {"packageName":"threejs-toys","packageVersion":"0.0.8","availableVersions":["0.0.1","0.0.2","0.0.3","0.0.4","0.0.5","0.0.6","0.0.7","0.0.8"],"filename":"/build/threejs-toys.module.cdn.min.js","target":{"path":"/build/threejs-toys.module.cdn.min.js","type":"file","details":{"contentType":"application/javascript","integrity":"sha384-ePiYUuS7pMpWoBcLQolH0+QPTrMhBlT4+fjOUglXruO4BMDXsSoT93XLF7Kf8+9K","language":"JavaScript","size":76303,"uri":null,"highlights":["import{EventDispatcher as Tt,Vector3 as j,MOUSE as J,TOUCH as ee,Quaternion as Xe,Spherical as Ze,Vector2 as _,WebGLRenderer as bt,PerspectiveCamera as Qe,Scene as $e,PointLight as zt,DirectionalLight as Pt,AmbientLight as Ct,SplineCurve as Mt,Color as q,OrthographicCamera as ze,PlaneGeometry as ne,ShaderMaterial as Y,Mesh as fe,Camera as Et,WebGLRenderTarget as se,RGBAFormat as Ke,DataTexture as Dt,FloatType as Je,NearestFilter as ve,ClampToEdgeWrapping as et,HalfFloatType as he,BufferGeometry as pe,BufferAttribute as Pe,AdditiveBlending as tt,Points as _t,MathUtils as xe,CanvasTexture as Rt,InstancedBufferAttribute as le,DoubleSide as Ce,TextureLoader as ot,MeshBasicMaterial as Me,MeshPhongMaterial as it,MeshStandardMaterial as Ee,InstancedMesh as De,Float32BufferAttribute as te,UniformsUtils as _e,Clock as At,SphereGeometry as Nt,OctahedronGeometry as It,ConeGeometry as kt,CapsuleGeometry as Ot,BoxGeometry as Ut,FogExp2 as Lt}from\"https://unpkg.com/three@0.140.0/build/three.module.js\";const at={type:\"change\"},Re={type:\"start\"},rt={type:\"end\"};class Ft extends Tt{constructor(e,o){super();o===void 0&amp;&amp;console.warn('THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.'),o===document&amp;&amp;console.error('THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.'),this.object=e,this.domElement=o,this.domElement.style.touchAction=\"none\",this.enabled=!0,this.target=new j,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:\"ArrowLeft\",UP:\"ArrowUp\",RIGHT:\"ArrowRight\",BOTTOM:\"ArrowDown\"},this.mouseButtons={LEFT:J.ROTATE,MIDDLE:J.DOLLY,RIGHT:J.PAN},this.touches={ONE:ee.ROTATE,TWO:ee.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return n.phi},this.getAzimuthalAngle=function(){return n.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(a){a.addEventListener(\"keydown\",Be),this._domElementKeyEvents=a},this.saveState=function(){t.target0.copy(t.target),t.position0.copy(t.object.position),t.zoom0=t.object.zoom},this.reset=function(){t.target.copy(t.target0),t.object.position.copy(t.position0),t.object.zoom=t.zoom0,t.object.updateProjectionMatrix(),t.dispatchEvent(at),t.update(),r=i.NONE},this.update=function(){const a=new j,y=new Xe().setFromUnitVectors(e.up,new j(0,1,0)),B=y.clone().invert(),H=new j,G=new Xe,K=2*Math.PI;return function(){const Ye=t.object.position;a.copy(Ye).sub(t.target),a.applyQuaternion(y),n.setFromVector3(a),t.autoRotate&amp;&amp;r===i.NONE&amp;&amp;V(F()),t.enableDamping?(n.theta+=c.theta*t.dampingFactor,n.phi+=c.phi*t.dampingFactor):(n.theta+=c.theta,n.phi+=c.phi);let X=t.minAzimuthAngle,Z=t.maxAzimuthAngle;return isFinite(X)&amp;&amp;isFinite(Z)&amp;&amp;(X&lt;-Math.PI?X+=K:X&gt;Math.PI&amp;&amp;(X-=K),Z&lt;-Math.PI?Z+=K:Z&gt;Math.PI&amp;&amp;(Z-=K),X&lt;=Z?n.theta=Math.max(X,Math.min(Z,n.theta)):n.theta=n.theta&gt;(X+Z)/2?Math.max(X,n.theta):Math.min(Z,n.theta)),n.phi=Math.max(t.minPolarAngle,Math.min(t.maxPolarAngle,n.phi)),n.makeSafe(),n.radius*=p,n.radius=Math.max(t.minDistance,Math.min(t.maxDistance,n.radius)),t.enableDamping===!0?t.target.addScaledVector(u,t.dampingFactor):t.target.add(u),a.setFromSpherical(n),a.applyQuaternion(B),Ye.copy(t.target).add(a),t.object.lookAt(t.target),t.enableDamping===!0?(c.theta*=1-t.dampingFactor,c.phi*=1-t.dampingFactor,u.multiplyScalar(1-t.dampingFactor)):(c.set(0,0,0),u.set(0,0,0)),p=1,v||H.distanceToSquared(t.object.position)&gt;d||8*(1-G.dot(t.object.quaternion))&gt;d?(t.dispatchEvent(at),H.copy(t.object.position),G.copy(t.object.quaternion),v=!1,!0):!1}}(),this.dispose=function(){t.domElement.removeEventListener(\"contextmenu\",He),t.domElement.removeEventListener(\"pointerdown\",Ve),t.domElement.removeEventListener(\"pointercancel\",We),t.domElement.removeEventListener(\"wheel\",je),t.domElement.removeEventListener(\"pointermove\",Se),t.domElement.removeEventListener(\"pointerup\",Te),t._domElementKeyEvents!==null&amp;&amp;t._domElementKeyEvents.removeEventListener(\"keydown\",Be)};const t=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let r=i.NONE;const d=1e-6,n=new Ze,c=new Ze;let p=1;const u=new j;let v=!1;const w=new _,M=new _,l=new _,s=new _,S=new _,E=new _,g=new _,R=new _,N=new _,x=[],I={};function F(){return 2*Math.PI/60/60*t.autoRotateSpeed}function D(){return Math.pow(.95,t.zoomSpeed)}function V(a){c.theta-=a}function A(a){c.phi-=a}const O=function(){const a=new j;return function(B,H){a.setFromMatrixColumn(H,0),a.multiplyScalar(-B),u.add(a)}}(),L=function(){const a=new j;return function(B,H){t.screenSpacePanning===!0?a.setFromMatrixColumn(H,1):(a.setFromMatrixColumn(H,0),a.crossVectors(t.object.up,a)),a.multiplyScalar(B),u.add(a)}}(),k=function(){const a=new j;return function(B,H){const G=t.domElement;if(t.object.isPerspectiveCamera){const K=t.object.position;a.copy(K).sub(t.target);let me=a.length();me*=Math.tan(t.object.fov/2*Math.PI/180),O(2*B*me/G.clientHeight,t.object.matrix),L(2*H*me/G.clientHeight,t.object.matrix)}else t.object.isOrthographicCamera?(O(B*(t.object.right-t.object.left)/t.object.zoom/G.clientWidth,t.object.matrix),L(H*(t.object.top-t.object.bottom)/t.object.zoom/G.clientHeight,t.object.matrix)):(console.warn(\"WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.\"),t.enablePan=!1)}}();function W(a){t.object.isPerspectiveCamera?p/=a:t.object.isOrthographicCamera?(t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom*a)),t.object.updateProjectionMatrix(),v=!0):(console.warn(\"WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.\"),t.enableZoom=!1)}function m(a){t.object.isPerspectiveCamera?p*=a:t.object.isOrthographicCamera?(t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/a)),t.object.updateProjectionMatrix(),v=!0):(console.warn(\"WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.\"),t.enableZoom=!1)}function C(a){w.set(a.clientX,a.clientY)}function b(a){g.set(a.clientX,a.clientY)}function z(a){s.set(a.clientX,a.clientY)}function T(a){M.set(a.clientX,a.clientY),l.subVectors(M,w).multiplyScalar(t.rotateSpeed);const y=t.domElement;V(2*Math.PI*l.x/y.clientHeight),A(2*Math.PI*l.y/y.clientHeight),w.copy(M),t.update()}function P(a){R.set(a.clientX,a.clientY),N.subVectors(R,g),N.y&gt;0?W(D()):N.y&lt;0&amp;&amp;m(D()),g.copy(R),t.update()}function f(a){S.set(a.clientX,a.clientY),E.subVectors(S,s).multiplyScalar(t.panSpeed),k(E.x,E.y),s.copy(S),t.update()}function U(a){a.deltaY&lt;0?m(D()):a.deltaY&gt;0&amp;&amp;W(D()),t.update()}function Q(a){let y=!1;switch(a.code){case t.keys.UP:k(0,t.keyPanSpeed),y=!0;break;case t.keys.BOTTOM:k(0,-t.keyPanSpeed),y=!0;break;case t.keys.LEFT:k(t.keyPanSpeed,0),y=!0;break;case t.keys.RIGHT:k(-t.keyPanSpeed,0),y=!0;break}y&amp;&amp;(a.preventDefault(),t.update())}function de(){if(x.length===1)w.set(x[0].pageX,x[0].pageY);else{const a=.5*(x[0].pageX+x[1].pageX),y=.5*(x[0].pageY+x[1].pageY);w.set(a,y)}}function ke(){if(x.length===1)s.set(x[0].pageX,x[0].pageY);else{const a=.5*(x[0].pageX+x[1].pageX),y=.5*(x[0].pageY+x[1].pageY);s.set(a,y)}}function Oe(){const a=x[0].pageX-x[1].pageX,y=x[0].pageY-x[1].pageY,B=Math.sqrt(a*a+y*y);g.set(0,B)}function ft(){t.enableZoom&amp;&amp;Oe(),t.enablePan&amp;&amp;ke()}function vt(){t.enableZoom&amp;&amp;Oe(),t.enableRotate&amp;&amp;de()}function Ue(a){if(x.length==1)M.set(a.pageX,a.pageY);else{const B=be(a),H=.5*(a.pageX+B.x),G=.5*(a.pageY+B.y);M.set(H,G)}l.subVectors(M,w).multiplyScalar(t.rotateSpeed);const y=t.domElement;V(2*Math.PI*l.x/y.clientHeight),A(2*Math.PI*l.y/y.clientHeight),w.copy(M)}function Le(a){if(x.length===1)S.set(a.pageX,a.pageY);else{const y=be(a),B=.5*(a.pageX+y.x),H=.5*(a.pageY+y.y);S.set(B,H)}E.subVectors(S,s).multiplyScalar(t.panSpeed),k(E.x,E.y),s.copy(S)}function Fe(a){const y=be(a),B=a.pageX-y.x,H=a.pageY-y.y,G=Math.sqrt(B*B+H*H);R.set(0,G),N.set(0,Math.pow(R.y/g.y,t.zoomSpeed)),W(N.y),g.copy(R)}function ht(a){t.enableZoom&amp;&amp;Fe(a),t.enablePan&amp;&amp;Le(a)}function pt(a){t.enableZoom&amp;&amp;Fe(a),t.enableRotate&amp;&amp;Ue(a)}function Ve(a){t.enabled!==!1&amp;&amp;(x.length===0&amp;&amp;(t.domElement.setPointerCapture(a.pointerId),t.domElement.addEventListener(\"pointermove\",Se),t.domElement.addEventListener(\"pointerup\",Te)),St(a),a.pointerType===\"touch\"?yt(a):xt(a))}function Se(a){t.enabled!==!1&amp;&amp;(a.pointerType===\"touch\"?wt(a):gt(a))}function Te(a){Ge(a),x.length===0&amp;&amp;(t.domElement.releasePointerCapture(a.pointerId),t.domElement.removeEventListener(\"pointermove\",Se),t.domElement.removeEventListener(\"pointerup\",Te)),t.dispatchEvent(rt),r=i.NONE}function We(a){Ge(a)}function xt(a){let y;switch(a.button){case 0:y=t.mouseButtons.LEFT;break;case 1:y=t.mouseButtons.MIDDLE;break;case 2:y=t.mouseButtons.RIGHT;break;default:y=-1}switch(y){case J.DOLLY:if(t.enableZoom===!1)return;b(a),r=i.DOLLY;break;case J.ROTATE:if(a.ctrlKey||a.metaKey||a.shiftKey){if(t.enablePan===!1)return;z(a),r=i.PAN}else{if(t.enableRotate===!1)return;C(a),r=i.ROTATE}break;case J.PAN:if(a.ctrlKey||a.metaKey||a.shiftKey){if(t.enableRotate===!1)return;C(a),r=i.ROTATE}else{if(t.enablePan===!1)return;z(a),r=i.PAN}break;default:r=i.NONE}r!==i.NONE&amp;&amp;t.dispatchEvent(Re)}function gt(a){if(t.enabled!==!1)switch(r){case i.ROTATE:if(t.enableRotate===!1)return;T(a);break;case i.DOLLY:if(t.enableZoom===!1)return;P(a);break;case i.PAN:if(t.enablePan===!1)return;f(a);break}}function je(a){t.enabled===!1||t.enableZoom===!1||r!==i.NONE||(a.preventDefault(),t.dispatchEvent(Re),U(a),t.dispatchEvent(rt))}function Be(a){t.enabled===!1||t.enablePan===!1||Q(a)}function yt(a){switch(qe(a),x.length){case 1:switch(t.touches.ONE){case ee.ROTATE:if(t.enableRotate===!1)return;de(),r=i.TOUCH_ROTATE;break;case ee.PAN:if(t.enablePan===!1)return;ke(),r=i.TOUCH_PAN;break;default:r=i.NONE}break;case 2:switch(t.touches.TWO){case ee.DOLLY_PAN:if(t.enableZoom===!1&amp;&amp;t.enablePan===!1)return;ft(),r=i.TOUCH_DOLLY_PAN;break;case ee.DOLLY_ROTATE:if(t.enableZoom===!1&amp;&amp;t.enableRotate===!1)return;vt(),r=i.TOUCH_DOLLY_ROTATE;break;default:r=i.NONE}break;default:r=i.NONE}r!==i.NONE&amp;&amp;t.dispatchEvent(Re)}function wt(a){switch(qe(a),r){case i.TOUCH_ROTATE:if(t.enableRotate===!1)return;Ue(a),t.update();break;case i.TOUCH_PAN:if(t.enablePan===!1)return;Le(a),t.update();break;case i.TOUCH_DOLLY_PAN:if(t.enableZoom===!1&amp;&amp;t.enablePan===!1)return;ht(a),t.update();break;case i.TOUCH_DOLLY_ROTATE:if(t.enableZoom===!1&amp;&amp;t.enableRotate===!1)return;pt(a),t.update();break;default:r=i.NONE}}function He(a){t.enabled!==!1&amp;&amp;a.preventDefault()}function St(a){x.push(a)}function Ge(a){delete I[a.pointerId];for(let y=0;y&lt;x.length;y++)if(x[y].pointerId==a.pointerId){x.splice(y,1);return}}function qe(a){let y=I[a.pointerId];y===void 0&amp;&amp;(y=new _,I[a.pointerId]=y),y.set(a.pageX,a.pageY)}function be(a){const y=a.pointerId===x[0].pointerId?x[1]:x[0];return I[y.pointerId]}t.domElement.addEventListener(\"contextmenu\",He),t.domElement.addEventListener(\"pointerdown\",Ve),t.domElement.addEventListener(\"pointercancel\",We),t.domElement.addEventListener(\"wheel\",je,{passive:!1}),this.update()}}function Vt(h){const{domElement:e,onClick:o=()=&gt;{},onEnter:t=()=&gt;{},onMove:i=()=&gt;{},onLeave:r=()=&gt;{},onDragStart:d=()=&gt;{},onDragMove:n=()=&gt;{},onDragStop:c=()=&gt;{}}=h,p=new _,u=new _,v=new _,w=new _,M=new _,l={position:p,nPosition:u,hover:!1,down:!1,removeListeners:F};return I(),l;function s(D){v.distanceTo(p)&lt;20&amp;&amp;(x(D),o({position:p,nPosition:u}))}function S(D){l.hover=D.pointerType===\"mouse\",x(D),t({position:p,nPosition:u})}function E(D){l.down=!0,x(D),v.copy(p),w.copy(p),d({position:p,nPosition:u})}function g(D){x(D),M.copy(p).sub(w),l.down?n({position:p,nPosition:u,startPosition:v,lastPosition:w,delta:M}):l.hover||(l.hover=!0),i({position:p,nPosition:u,startPosition:v,lastPosition:w,delta:M}),w.copy(p)}function R(D){l.down=!1,c()}function N(D){l.down&amp;&amp;(l.down=!1,c()),l.hover=!1,r()}function x(D){const V=e.getBoundingClientRect();p.x=D.clientX-V.left,p.y=D.clientY-V.top,u.x=p.x/V.width*2-1,u.y=-(p.y/V.height)*2+1}function I(){e.addEventListener(\"click\",s),e.addEventListener(\"pointerenter\",S),e.addEventListener(\"pointerdown\",E),e.addEventListener(\"pointermove\",g),e.addEventListener(\"pointerup\",R),e.addEventListener(\"pointerleave\",N)}function F(){e.removeEventListener(\"click\",s),e.removeEventListener(\"pointerenter\",S),e.removeEventListener(\"pointerdown\",E),e.removeEventListener(\"pointermove\",g),e.removeEventListener(\"pointerup\",R),e.removeEventListener(\"pointerleave\",N)}}function oe(h){const e={el:null,canvas:null,eventsEl:null,width:null,height:null,resize:!0,alpha:!1,antialias:!1,orbitControls:!1,init(){},initCamera(){},initScene(){},afterResize(){},beforeRender(){},...h},o={renderer:null,camera:null,scene:null,pointer:null,width:0,height:0,wWidth:0,wHeight:0,clock:{startTime:0,time:0,elapsed:0},options:e};let t,i;return r(),o;function r(){var u,v,w,M,l;let s;if(e.el)s=document.createElement(\"canvas\"),e.el.appendChild(s);else if(e.canvas)s=e.canvas;else throw new Error(\"Missing parameter : el or canvas is required\");(u=e.init)==null||u.call(e,o),o.renderer=new bt({canvas:s,alpha:e.alpha,antialias:e.antialias}),(v=e.initRenderer)==null||v.call(e,o),o.camera=new Qe,o.camera.position.z=50,(w=e.initCamera)==null||w.call(e,o),e.orbitControls&amp;&amp;(i=new Ft(o.camera,(M=e.eventsEl)!=null?M:o.renderer.domElement),i.enableDamping=!0,i.dampingFactor=.1,typeof e.orbitControls==\"object\"&amp;&amp;Object.keys(e.orbitControls).forEach(S=&gt;{i[S]=e.orbitControls[S]})),c(),e.resize&amp;&amp;!e.width&amp;&amp;!e.height&amp;&amp;window.addEventListener(\"resize\",c),o.scene=new $e,(l=e.initScene)==null||l.call(e,o),d(),t=e.render?e.render:()=&gt;{o.renderer.render(o.scene,o.camera)},requestAnimationFrame(S=&gt;{o.clock.startTime=o.clock.time=S,requestAnimationFrame(n)})}function d(){var u,v;const w={};e.onPointerEnter&amp;&amp;(w.onEnter=e.onPointerEnter),e.onPointerMove&amp;&amp;(w.onMove=e.onPointerMove),e.onPointerMove&amp;&amp;(w.onLeave=e.onPointerLeave),Object.keys(w).length&gt;0&amp;&amp;(o.pointer=Vt({domElement:(v=e.eventsEl)!=null?v:(u=e.el)!=null?u:e.canvas,...w}))}function n(u){const{clock:v}=o;v.elapsed=u-v.time,v.time=u,e.beforeRender(o),i&amp;&amp;i.update(),t(o),requestAnimationFrame(n)}function c(){var u;if(e.width&amp;&amp;e.height)o.width=e.width,o.height=e.height;else if(e.resize===\"window\")o.width=window.innerWidth,o.height=window.innerHeight;else{const v=o.renderer.domElement.parentElement;o.width=v.clientWidth,o.height=v.clientHeight}if(o.renderer.setSize(o.width,o.height),o.camera.aspect=o.width/o.height,o.camera.updateProjectionMatrix(),o.camera instanceof Qe){const v=p();o.wWidth=v[0],o.wHeight=v[1]}else o.wWidth=o.camera.top-o.camera.bottom,o.wHeight=o.camera.right-o.camera.left;(u=e.afterResize)==null||u.call(e,o)}function p(){const u=o.camera.fov*Math.PI/180,v=2*Math.tan(u/2)*Math.abs(o.camera.position.z);return[v*o.camera.aspect,v]}}function Ae(h){const e={};return[\"el\",\"canvas\",\"eventsEl\",\"width\",\"height\",\"resize\",\"orbitControls\"].forEach(o=&gt;{h[o]!==void 0&amp;&amp;(e[o]=h[o])}),e}function Ne(h,e){const o=[];if(Array.isArray(e)&amp;&amp;e.length&gt;0){let t;e.forEach(i=&gt;{switch(i.type){case\"ambient\":t=new Ct(...i.params);break;case\"directional\":t=new Pt(...i.params);break;case\"point\":t=new zt(...i.params);break;default:console.error(`Unknown light type ${i.type}`)}t&amp;&amp;(typeof i.props==\"object\"&amp;&amp;Object.keys(i.props).forEach(r=&gt;{r===\"position\"?t.position.set(...i.props[r]):t[r]=i.props[r]}),h.add(t),o.push(t))})}return o}const Wt={shaderPoints:8,curvePoints:80,curveLerp:.75,radius1:3,radius2:5,velocityTreshold:10,sleepRadiusX:150,sleepRadiusY:150,sleepTimeCoefX:.0025,sleepTimeCoefY:.0025};function jt(h){const e={...Wt,...h},o=new Array(e.curvePoints).fill(0).map(()=&gt;new _),t=new Mt(o),i=new j,r=new j,d={value:new _},n={value:new _},c={value:new Array(e.shaderPoints).fill(0).map(()=&gt;new _)},p={value:new q(16711935)};let u,v,w=!1;const M={};return[\"el\",\"canvas\",\"width\",\"height\",\"resize\"].forEach(l=&gt;{h[l]!==void 0&amp;&amp;(M[l]=h[l])}),oe({...M,antialias:!1,initCamera(l){l.camera=new ze},initScene({scene:l}){const s=new ne(2,2);u=new Y({uniforms:{uRatio:d,uSize:n,uPoints:c,uColor:p},defines:{SHADER_POINTS:e.shaderPoints},vertexShader:`\n","          varying vec2 vUv;\n","          <span class=\"code-keyword\">void</span> main() {\n","            vUv = uv;\n","            gl_Position = vec4(position, <span class=\"code-number\">1.0</span>);\n","          }\n","        <span class=\"code-string\">`,fragmentShader:`</span>\n","          <span class=\"code-comment\">// https://www.shadertoy.com/view/wdy3DD</span>\n","          <span class=\"code-comment\">// https://www.shadertoy.com/view/MlKcDD</span>\n","          <span class=\"code-comment\">// Signed distance to a quadratic bezier</span>\n","          float sdBezier(vec2 pos, vec2 A, vec2 B, vec2 C) {\n","            vec2 a = B - A;\n","            vec2 b = A - <span class=\"code-number\">2.0</span>*B + C;\n","            vec2 c = a * <span class=\"code-number\">2.0</span>;\n","            vec2 d = A - pos;\n","            float kk = <span class=\"code-number\">1.0</span> / dot(b,b);\n","            float kx = kk * dot(a,b);\n","            float ky = kk * (<span class=\"code-number\">2.0</span>*dot(a,a)+dot(d,b)) / <span class=\"code-number\">3.0</span>;\n","            float kz = kk * dot(d,a);\n","            float res = <span class=\"code-number\">0.0</span>;\n","            float p = ky - kx*kx;\n","            float p3 = p*p*p;\n","            float q = kx*(<span class=\"code-number\">2.0</span>*kx*kx - <span class=\"code-number\">3.0</span>*ky) + kz;\n","            float h = q*q + <span class=\"code-number\">4.0</span>*p3;\n","            <span class=\"code-keyword\">if</span>(h &gt;= <span class=\"code-number\">0.0</span>){\n","              h = sqrt(h);\n","              vec2 x = (vec2(h, -h) - q) / <span class=\"code-number\">2.0</span>;\n","              vec2 uv = sign(x)*pow(abs(x), vec2(<span class=\"code-number\">1.0</span>/<span class=\"code-number\">3.0</span>));\n","              float t = uv.x + uv.y - kx;\n","              t = clamp( t, <span class=\"code-number\">0.0</span>, <span class=\"code-number\">1.0</span> );\n","              <span class=\"code-comment\">// 1 root</span>\n","              vec2 qos = d + (c + b*t)*t;\n","              res = length(qos);\n","            } <span class=\"code-keyword\">else</span> {\n","              float z = sqrt(-p);\n","              float v = acos( q/(p*z*<span class=\"code-number\">2.0</span>) ) / <span class=\"code-number\">3.0</span>;\n","              float m = cos(v);\n","              float n = sin(v)*<span class=\"code-number\">1.732050808</span>;\n","              vec3 t = vec3(m + m, -n - m, n - m) * z - kx;\n","              t = clamp( t, <span class=\"code-number\">0.0</span>, <span class=\"code-number\">1.0</span> );\n","              <span class=\"code-comment\">// 3 roots</span>\n","              vec2 qos = d + (c + b*t.x)*t.x;\n","              float dis = dot(qos,qos);\n","              res = dis;\n","              qos = d + (c + b*t.y)*t.y;\n","              dis = dot(qos,qos);\n","              res = min(res,dis);\n","              qos = d + (c + b*t.z)*t.z;\n","              dis = dot(qos,qos);\n","              res = min(res,dis);\n","              res = sqrt( res );\n","            }\n","            <span class=\"code-keyword\">return</span> res;\n","          }\n","\n","          uniform vec2 uRatio;\n","          uniform vec2 uSize;\n","          uniform vec2 uPoints[SHADER_POINTS];\n","          uniform vec3 uColor;\n","          varying vec2 vUv;\n","          <span class=\"code-keyword\">void</span> main() {\n","            float intensity = <span class=\"code-number\">1.0</span>;\n","            float radius = <span class=\"code-number\">0.015</span>;\n","\n","            vec2 pos = (vUv - <span class=\"code-number\">0.5</span>) * uRatio;\n","\n","            vec2 c = (uPoints[<span class=\"code-number\">0</span>] + uPoints[<span class=\"code-number\">1</span>]) / <span class=\"code-number\">2.0</span>;\n","            vec2 c_prev;\n","            float dist = <span class=\"code-number\">10000.0</span>;\n","            <span class=\"code-keyword\">for</span>(int i = <span class=\"code-number\">0</span>; i &lt; SHADER_POINTS - <span class=\"code-number\">1</span>; i++){\n","              c_prev = c;\n","              c = (uPoints[i] + uPoints[i + <span class=\"code-number\">1</span>]) / <span class=\"code-number\">2.0</span>;\n","              dist = min(dist, sdBezier(pos, c_prev, uPoints[i], c));\n","            }\n","            dist = max(<span class=\"code-number\">0.0</span>, dist);\n","\n","            float glow = pow(uSize.y / dist, intensity);\n","            vec3 col = vec3(<span class=\"code-number\">0.0</span>);\n","            col += <span class=\"code-number\">10.0</span> * vec3(smoothstep(uSize.x, <span class=\"code-number\">0.0</span>, dist));\n","            col += glow * uColor;\n","\n","            <span class=\"code-comment\">// Tone mapping</span>\n","            col = <span class=\"code-number\">1.0</span> - exp(-col);\n","            col = pow(col, vec3(<span class=\"code-number\">0.4545</span>));\n","  \n","            gl_FragColor = vec4(col, <span class=\"code-number\">1.0</span>);\n","          }\n","        <span class=\"code-string\">`}),v=new fe(s,u),l.add(v)},afterResize({width:l,height:s}){n.value.set(e.radius1,e.radius2),l&gt;=s?(d.value.set(1,s/l),n.value.multiplyScalar(1/l)):(d.value.set(l/s,1),n.value.multiplyScalar(1/s))},beforeRender({clock:l,width:s,height:S,wWidth:E}){for(let g=1;g&lt;e.curvePoints;g++)o[g].lerp(o[g-1],e.curveLerp);for(let g=0;g&lt;e.shaderPoints;g++)t.getPoint(g/(e.shaderPoints-1),c.value[g]);if(w)p.value.r=i.z,p.value.g=0,p.value.b=1-i.z,i.multiplyScalar(.95);else{const g=l.time*e.sleepTimeCoefX,R=l.time*e.sleepTimeCoefY,N=Math.cos(g),x=Math.sin(R),I=e.sleepRadiusX*E/s,F=e.sleepRadiusY*E/s,D=I*N,V=F*x;t.points[0].set(D,V),p.value.r=.5+.5*Math.cos(l.time*.0015),p.value.g=0,p.value.b=1-p.value.r}},onPointerMove({nPosition:l,delta:s}){w=!0;const S=.5*l.x*d.value.x,E=.5*l.y*d.value.y;t.points[0].set(S,E),r.x=Math.min(i.x+Math.abs(s.x)/e.velocityTreshold,1),r.y=Math.min(i.y+Math.abs(s.y)/e.velocityTreshold,1),r.z=Math.sqrt(r.x*r.x+r.y*r.y),i.lerp(r,.05)},onPointerLeave(){w=!1}}),{config:e}}class ge{constructor(e,o,t){this.variables=[],this.currentTextureIndex=0;let i=Je;const r=new $e,d=new Et;d.position.z=1;const n={passThruTexture:{value:null}},c=v(M(),n),p=new fe(new ne(2,2),c);r.add(p),this.setDataType=function(l){return i=l,this},this.addVariable=function(l,s,S){const E=this.createShaderMaterial(s),g={name:l,initialValueTexture:S,material:E,dependencies:null,renderTargets:[],wrapS:null,wrapT:null,minFilter:ve,magFilter:ve};return this.variables.push(g),g},this.setVariableDependencies=function(l,s){l.dependencies=s},this.init=function(){if(t.capabilities.isWebGL2===!1&amp;&amp;t.extensions.has(\"OES_texture_float\")===!1)return\"No OES_texture_float support for float textures.\";if(t.capabilities.maxVertexTextures===0)return\"No support for vertex shader textures.\";for(let l=0;l&lt;this.variables.length;l++){const s=this.variables[l];s.renderTargets[0]=this.createRenderTarget(e,o,s.wrapS,s.wrapT,s.minFilter,s.magFilter),s.renderTargets[1]=this.createRenderTarget(e,o,s.wrapS,s.wrapT,s.minFilter,s.magFilter),this.renderTexture(s.initialValueTexture,s.renderTargets[0]),this.renderTexture(s.initialValueTexture,s.renderTargets[1]);const S=s.material,E=S.uniforms;if(s.dependencies!==null)for(let g=0;g&lt;s.dependencies.length;g++){const R=s.dependencies[g];if(R.name!==s.name){let N=!1;for(let x=0;x&lt;this.variables.length;x++)if(R.name===this.variables[x].name){N=!0;break}if(!N)return\"Variable dependency not found. Variable=\"+s.name+\", dependency=\"+R.name}E[R.name]={value:null},S.fragmentShader=`</span>\n","uniform sampler2D <span class=\"code-string\">`+R.name+`</span>;\n","<span class=\"code-string\">`+S.fragmentShader}}return this.currentTextureIndex=0,null},this.compute=function(){const l=this.currentTextureIndex,s=this.currentTextureIndex===0?1:0;for(let S=0,E=this.variables.length;S&lt;E;S++){const g=this.variables[S];if(g.dependencies!==null){const R=g.material.uniforms;for(let N=0,x=g.dependencies.length;N&lt;x;N++){const I=g.dependencies[N];R[I.name].value=I.renderTargets[l].texture}}this.doRenderTarget(g.material,g.renderTargets[s])}this.currentTextureIndex=s},this.getCurrentRenderTarget=function(l){return l.renderTargets[this.currentTextureIndex]},this.getAlternateRenderTarget=function(l){return l.renderTargets[this.currentTextureIndex===0?1:0]};function u(l){l.defines.resolution=\"vec2( \"+e.toFixed(1)+\", \"+o.toFixed(1)+\" )\"}this.addResolutionDefine=u;function v(l,s){s=s||{};const S=new Y({uniforms:s,vertexShader:w(),fragmentShader:l});return u(S),S}this.createShaderMaterial=v,this.createRenderTarget=function(l,s,S,E,g,R){return l=l||e,s=s||o,S=S||et,E=E||et,g=g||ve,R=R||ve,new se(l,s,{wrapS:S,wrapT:E,minFilter:g,magFilter:R,format:Ke,type:i,depthBuffer:!1})},this.createTexture=function(){const l=new Float32Array(e*o*4),s=new Dt(l,e,o,Ke,Je);return s.needsUpdate=!0,s},this.renderTexture=function(l,s){n.passThruTexture.value=l,this.doRenderTarget(c,s),n.passThruTexture.value=null},this.doRenderTarget=function(l,s){const S=t.getRenderTarget();p.material=l,t.setRenderTarget(s),t.render(r,d),p.material=c,t.setRenderTarget(S)};function w(){return`</span><span class=\"code-keyword\">void</span> main()\t{\n","\n","\tgl_Position = vec4( position, <span class=\"code-number\">1.0</span> );\n","\n","}\n","<span class=\"code-string\">`}function M(){return`</span>uniform sampler2D passThruTexture;\n","\n","<span class=\"code-keyword\">void</span> main() {\n","\n","\tvec2 uv = gl_FragCoord.xy / resolution.xy;\n","\n","\tgl_FragColor = texture2D( passThruTexture, uv );\n","\n","}\n","<span class=\"code-string\">`}}}function ce(h){let e=[];t(h);const o=new q;return{setColors:t,getColorAt:i};function t(r){e=[],r.forEach(d=&gt;{e.push(new q(d))})}function i(r){const d=Math.max(0,Math.min(1,r))*(h.length-1),n=Math.floor(d),c=e[n];if(n===h.length-1)return c.getHex();const p=d-n,u=e[n+1];return o.r=c.r+p*(u.r-c.r),o.g=c.g+p*(u.g-c.g),o.b=c.b+p*(u.b-c.b),o.clone()}}var $=`</span>vec4 permute(vec4 x){vec4 xm=mod(x,<span class=\"code-number\">289.0</span>);<span class=\"code-keyword\">return</span> mod(((xm*<span class=\"code-number\">34.0</span>)+<span class=\"code-number\">10.0</span>)*xm,<span class=\"code-number\">289.0</span>);}float psrdnoise(vec3 x,vec3 period,float alpha,out vec3 gradient){\n","#ifndef PERLINGRID\n","<span class=\"code-keyword\">const</span> mat3 M=mat3(<span class=\"code-number\">0.0</span>,<span class=\"code-number\">1.0</span>,<span class=\"code-number\">1.0</span>,<span class=\"code-number\">1.0</span>,<span class=\"code-number\">0.0</span>,<span class=\"code-number\">1.0</span>,<span class=\"code-number\">1.0</span>,<span class=\"code-number\">1.0</span>,<span class=\"code-number\">0.0</span>);<span class=\"code-keyword\">const</span> mat3 Mi=mat3(<span class=\"code-number\">-0.5</span>,<span class=\"code-number\">0.5</span>,<span class=\"code-number\">0.5</span>,<span class=\"code-number\">0.5</span>,<span class=\"code-number\">-0.5</span>,<span class=\"code-number\">0.5</span>,<span class=\"code-number\">0.5</span>,<span class=\"code-number\">0.5</span>,<span class=\"code-number\">-0.5</span>);\n","#endif\n","vec3 uvw;\n","#ifndef PERLINGRID\n","uvw=M*x;\n","#else\n","uvw=x+dot(x,vec3(<span class=\"code-number\">1.0</span>/<span class=\"code-number\">3.0</span>));\n","#endif\n","vec3 i0=floor(uvw);vec3 f0=fract(uvw);vec3 g_=step(f0.xyx,f0.yzz);vec3 l_=<span class=\"code-number\">1.0</span>-g_;vec3 g=vec3(l_.z,g_.xy);vec3 l=vec3(l_.xy,g_.z);vec3 o1=min(g,l);vec3 o2=max(g,l);vec3 i1=i0+o1;vec3 i2=i0+o2;vec3 i3=i0+vec3(<span class=\"code-number\">1.0</span>);vec3 v0,v1,v2,v3;\n","#ifndef PERLINGRID\n","v0=Mi*i0;v1=Mi*i1;v2=Mi*i2;v3=Mi*i3;\n","#else\n","v0=i0-dot(i0,vec3(<span class=\"code-number\">1.0</span>/<span class=\"code-number\">6.0</span>));v1=i1-dot(i1,vec3(<span class=\"code-number\">1.0</span>/<span class=\"code-number\">6.0</span>));v2=i2-dot(i2,vec3(<span class=\"code-number\">1.0</span>/<span class=\"code-number\">6.0</span>));v3=i3-dot(i3,vec3(<span class=\"code-number\">1.0</span>/<span class=\"code-number\">6.0</span>));\n","#endif\n","vec3 x0=x-v0;vec3 x1=x-v1;vec3 x2=x-v2;vec3 x3=x-v3;<span class=\"code-keyword\">if</span>(any(greaterThan(period,vec3(<span class=\"code-number\">0.0</span>)))){vec4 vx=vec4(v0.x,v1.x,v2.x,v3.x);vec4 vy=vec4(v0.y,v1.y,v2.y,v3.y);vec4 vz=vec4(v0.z,v1.z,v2.z,v3.z);<span class=\"code-keyword\">if</span>(period.x&gt;<span class=\"code-number\">0.0</span>)vx=mod(vx,period.x);<span class=\"code-keyword\">if</span>(period.y&gt;<span class=\"code-number\">0.0</span>)vy=mod(vy,period.y);<span class=\"code-keyword\">if</span>(period.z&gt;<span class=\"code-number\">0.0</span>)vz=mod(vz,period.z);\n","#ifndef PERLINGRID\n","i0=M*vec3(vx.x,vy.x,vz.x);i1=M*vec3(vx.y,vy.y,vz.y);i2=M*vec3(vx.z,vy.z,vz.z);i3=M*vec3(vx.w,vy.w,vz.w);\n","#else\n","v0=vec3(vx.x,vy.x,vz.x);v1=vec3(vx.y,vy.y,vz.y);v2=vec3(vx.z,vy.z,vz.z);v3=vec3(vx.w,vy.w,vz.w);i0=v0+dot(v0,vec3(<span class=\"code-number\">1.0</span>/<span class=\"code-number\">3.0</span>));i1=v1+dot(v1,vec3(<span class=\"code-number\">1.0</span>/<span class=\"code-number\">3.0</span>));i2=v2+dot(v2,vec3(<span class=\"code-number\">1.0</span>/<span class=\"code-number\">3.0</span>));i3=v3+dot(v3,vec3(<span class=\"code-number\">1.0</span>/<span class=\"code-number\">3.0</span>));\n","#endif\n","i0=floor(i0+<span class=\"code-number\">0.5</span>);i1=floor(i1+<span class=\"code-number\">0.5</span>);i2=floor(i2+<span class=\"code-number\">0.5</span>);i3=floor(i3+<span class=\"code-number\">0.5</span>);}vec4 hash=permute(permute(permute(vec4(i0.z,i1.z,i2.z,i3.z))+vec4(i0.y,i1.y,i2.y,i3.y))+vec4(i0.x,i1.x,i2.x,i3.x));vec4 theta=hash*<span class=\"code-number\">3.883222077</span>;vec4 sz=hash*<span class=\"code-number\">-0.006920415</span>+<span class=\"code-number\">0.996539792</span>;vec4 psi=hash*<span class=\"code-number\">0.108705628</span>;vec4 Ct=cos(theta);vec4 St=sin(theta);vec4 sz_prime=sqrt(<span class=\"code-number\">1.0</span>-sz*sz);vec4 gx,gy,gz;\n","#ifdef FASTROTATION\n","vec4 qx=St;vec4 qy=-Ct;vec4 qz=vec4(<span class=\"code-number\">0.0</span>);vec4 px=sz*qy;vec4 py=-sz*qx;vec4 pz=sz_prime;psi+=alpha;vec4 Sa=sin(psi);vec4 Ca=cos(psi);gx=Ca*px+Sa*qx;gy=Ca*py+Sa*qy;gz=Ca*pz+Sa*qz;\n","#else\n","<span class=\"code-keyword\">if</span>(alpha!=<span class=\"code-number\">0.0</span>){vec4 Sp=sin(psi);vec4 Cp=cos(psi);vec4 px=Ct*sz_prime;vec4 py=St*sz_prime;vec4 pz=sz;vec4 Ctp=St*Sp-Ct*Cp;vec4 qx=mix(Ctp*St,Sp,sz);vec4 qy=mix(-Ctp*Ct,Cp,sz);vec4 qz=-(py*Cp+px*Sp);vec4 Sa=vec4(sin(alpha));vec4 Ca=vec4(cos(alpha));gx=Ca*px+Sa*qx;gy=Ca*py+Sa*qy;gz=Ca*pz+Sa*qz;}<span class=\"code-keyword\">else</span>{gx=Ct*sz_prime;gy=St*sz_prime;gz=sz;}\n","#endif\n","vec3 g0=vec3(gx.x,gy.x,gz.x);vec3 g1=vec3(gx.y,gy.y,gz.y);vec3 g2=vec3(gx.z,gy.z,gz.z);vec3 g3=vec3(gx.w,gy.w,gz.w);vec4 w=<span class=\"code-number\">0.5</span>-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3));w=max(w,<span class=\"code-number\">0.0</span>);vec4 w2=w*w;vec4 w3=w2*w;vec4 gdotx=vec4(dot(g0,x0),dot(g1,x1),dot(g2,x2),dot(g3,x3));float n=dot(w3,gdotx);vec4 dw=<span class=\"code-number\">-6.0</span>*w2*gdotx;vec3 dn0=w3.x*g0+dw.x*x0;vec3 dn1=w3.y*g1+dw.y*x1;vec3 dn2=w3.z*g2+dw.z*x2;vec3 dn3=w3.w*g3+dw.w*x3;gradient=<span class=\"code-number\">39.5</span>*(dn0+dn1+dn2+dn3);<span class=\"code-keyword\">return</span> <span class=\"code-number\">39.5</span>*n;}<span class=\"code-string\">`;const{randFloat:nt,randFloatSpread:st}=xe,Bt={gpgpuSize:256,colors:[65280,255],color:16711680,coordScale:1.5,noiseIntensity:.001,noiseTimeCoef:1e-4,pointSize:5,pointDecay:.005,sleepRadiusX:250,sleepRadiusY:250,sleepTimeCoefX:.001,sleepTimeCoefY:.002};function Ht(h){const e={...Bt,...h},o=e.gpgpuSize,t=o*o;let i,r,d,n,c;const p={value:0},u={value:e.coordScale},v={value:e.noiseIntensity},w={value:e.pointSize},M={value:e.pointDecay},l={value:new q(e.color)},s={value:new _},S={value:new _},E={uTime:p,uCoordScale:u,uNoiseIntensity:v,uPointSize:w,uPointDecay:M,uColor:l,uMouse:s,uMouseDirection:S};let g,R,N,x=!1;const I=new _;return oe({...Gt(h),antialias:!1,initRenderer({renderer:A}){F(A)},initScene({scene:A}){D(),A.add(N)},beforeRender({width:A,wWidth:O,wHeight:L,clock:k,pointer:W}){if(x)I.x=W.nPosition.x*.5*O,I.y=W.nPosition.y*.5*L;else{const m=k.time*e.sleepTimeCoefX,C=k.time*e.sleepTimeCoefY,b=Math.cos(m),z=Math.sin(C),T=e.sleepRadiusX*O/A,P=e.sleepRadiusY*O/A;I.x=T*b,I.y=P*z}s.value.lerp(I,.05),p.value=k.time*e.noiseTimeCoef,i.compute(),R.uniforms.texturePosition.value=i.getCurrentRenderTarget(c).texture,R.uniforms.textureVelocity.value=i.getCurrentRenderTarget(n).texture},onPointerMove({delta:A}){x=!0,S.value.copy(A)},onPointerLeave(){x=!1}}),{config:e,uniforms:E};function F(A){i=new ge(o,o,A),A.capabilities.isWebGL2||i.setDataType(he),r=i.createTexture(),d=i.createTexture(),V(r,d),n=i.addVariable(\"textureVelocity\",`</span>\n","      ${$}\n","      uniform float uTime;\n","      uniform float uCoordScale;\n","      uniform float uNoiseIntensity;\n","      <span class=\"code-keyword\">void</span> main() {\n","        vec2 uv = gl_FragCoord.xy / resolution.xy;\n","        vec4 pos = texture2D(texturePosition, uv);\n","        vec4 vel = texture2D(textureVelocity, uv);\n","\n","        <span class=\"code-keyword\">if</span> (pos.w &lt; <span class=\"code-number\">0.0</span>) {\n","          vel.x = <span class=\"code-number\">0.0</span>;\n","          vel.y = <span class=\"code-number\">0.0</span>;\n","          vel.z = <span class=\"code-number\">0.0</span>;\n","        } <span class=\"code-keyword\">else</span> {\n","          vec3 grad;\n","          vec3 p = vec3(<span class=\"code-number\">0.0</span>);\n","          float n = psrdnoise(pos.xyz * uCoordScale, p, uTime, grad);\n","          vel.xyz += grad * uNoiseIntensity * pos.w;\n","        }\n","        gl_FragColor = vel;\n","      }\n","    <span class=\"code-string\">`,d),c=i.addVariable(\"texturePosition\",`</span>\n","      uniform float uPointDecay;\n","      uniform vec2 uMouse;\n","      uniform vec2 uMouseDirection;\n","      <span class=\"code-keyword\">void</span> main() {\n","        vec2 uv = gl_FragCoord.xy / resolution.xy;\n","        vec4 pos = texture2D(texturePosition, uv);\n","        vec4 vel = texture2D(textureVelocity, uv);\n","        <span class=\"code-keyword\">if</span> (pos.w &lt; <span class=\"code-number\">0.0</span>) { pos.w = vel.w; }\n","        pos.w -= uPointDecay;\n","        <span class=\"code-keyword\">if</span> (pos.w &lt;= <span class=\"code-number\">0.0</span>) {\n","          pos.xy = uMouse.xy;\n","          pos.z = <span class=\"code-number\">0.0</span>;\n","        } <span class=\"code-keyword\">else</span> {\n","          pos.xyz += vel.xyz;\n","        }\n","        gl_FragColor = pos;\n","      }\n","    <span class=\"code-string\">`,r),i.setVariableDependencies(n,[c,n]),i.setVariableDependencies(c,[c,n]),Object.keys(E).forEach(L=&gt;{n.material.uniforms[L]=E[L],c.material.uniforms[L]=E[L]});const O=i.init();O!==null&amp;&amp;console.error(O)}function D(){g=new pe;const A=new Float32Array(t*3),O=new Float32Array(t*2),L=new Float32Array(t*3);for(let m=0;m&lt;t*3;m+=3)A[m]=0,A[m+1]=0,A[m+2]=0;let k=0;for(let m=0;m&lt;o;m++)for(let C=0;C&lt;o;C++)O[k++]=C/(o-1),O[k++]=m/(o-1);const W=ce(e.colors);for(let m=0;m&lt;t*3;m+=3){const C=W.getColorAt(Math.random());L[m]=C.r,L[m+1]=C.g,L[m+2]=C.b}g.setAttribute(\"position\",new Pe(A,3)),g.setAttribute(\"uv\",new Pe(O,2)),g.setAttribute(\"color\",new Pe(L,3)),R=new Y({blending:tt,depthTest:!1,transparent:!0,vertexColors:!0,uniforms:{texturePosition:{value:null},textureVelocity:{value:null},uPointSize:w,uColor:l},vertexShader:`</span>\n","        uniform sampler2D texturePosition;\n","        uniform sampler2D textureVelocity;\n","        uniform float uPointSize;\n","        varying vec4 vPos;\n","        varying vec4 vVel;\n","        varying vec3 vCol;\n","        <span class=\"code-keyword\">void</span> main() {\n","          vCol = color;\n","          vPos = texture2D(texturePosition, uv);\n","          vVel = texture2D(textureVelocity, uv);\n","          vec4 mvPosition = modelViewMatrix * vec4(vPos.xyz, <span class=\"code-number\">1.0</span>);\n","          <span class=\"code-comment\">// gl_PointSize = smoothstep(0.0, 2.0, vPos.w) * uPointSize;</span>\n","          gl_PointSize = vPos.w * (vVel.w + <span class=\"code-number\">0.5</span>) * uPointSize;\n","          gl_Position = projectionMatrix * mvPosition;\n","        }\n","      <span class=\"code-string\">`,fragmentShader:`</span>\n","        uniform vec3 uColor;\n","        varying vec4 vPos;\n","        varying vec4 vVel;\n","        varying vec3 vCol;\n","        <span class=\"code-keyword\">void</span> main() {\n","          float dist = length(gl_PointCoord - <span class=\"code-number\">0.5</span>);\n","          <span class=\"code-keyword\">if</span> (dist &gt; <span class=\"code-number\">0.5</span>) discard;\n","          <span class=\"code-comment\">// float a = smoothstep(0.0, 1.0, vPos.w);</span>\n","          gl_FragColor = vec4(mix(vCol, uColor, vPos.w), vPos.w);\n","        }\n","      <span class=\"code-string\">`}),N=new _t(g,R),N.matrixAutoUpdate=!1,N.updateMatrix()}function V(A,O){const L=A.image.data,k=O.image.data;for(let W=0,m=L.length;W&lt;m;W+=4)L[W+0]=st(1),L[W+1]=st(1),L[W+2]=-1e5,L[W+3]=nt(.1,1),k[W+0]=0,k[W+1]=0,k[W+2]=0,k[W+3]=nt(.1,1)}}function Gt(h){const e={};return[\"el\",\"canvas\",\"width\",\"height\",\"resize\"].forEach(o=&gt;{h[o]!==void 0&amp;&amp;(e[o]=h[o])}),e}const qt={width:256,height:256};function Yt(h){const e={...qt,...h},o=document.createElement(\"canvas\");o.width=e.width,o.height=e.height;const t=o.getContext(\"2d\"),i=new Rt(t.canvas);return{canvas:o,ctx:t,texture:i}}var Xt=\"float psrdnoise(vec2 x,vec2 period,float alpha,out vec2 gradient){vec2 uv=vec2(x.x+x.y*0.5,x.y);vec2 i0=floor(uv);vec2 f0=fract(uv);float cmp=step(f0.y,f0.x);vec2 o1=vec2(cmp,1.0-cmp);vec2 i1=i0+o1;vec2 i2=i0+vec2(1.0,1.0);vec2 v0=vec2(i0.x-i0.y*0.5,i0.y);vec2 v1=vec2(v0.x+o1.x-o1.y*0.5,v0.y+o1.y);vec2 v2=vec2(v0.x+0.5,v0.y+1.0);vec2 x0=x-v0;vec2 x1=x-v1;vec2 x2=x-v2;vec3 iu,iv;vec3 xw,yw;if(any(greaterThan(period,vec2(0.0)))){xw=vec3(v0.x,v1.x,v2.x);yw=vec3(v0.y,v1.y,v2.y);if(period.x&gt;0.0)xw=mod(vec3(v0.x,v1.x,v2.x),period.x);if(period.y&gt;0.0)yw=mod(vec3(v0.y,v1.y,v2.y),period.y);iu=floor(xw+0.5*yw+0.5);iv=floor(yw+0.5);}else{iu=vec3(i0.x,i1.x,i2.x);iv=vec3(i0.y,i1.y,i2.y);}vec3 hash=mod(iu,289.0);hash=mod((hash*51.0+2.0)*hash+iv,289.0);hash=mod((hash*34.0+10.0)*hash,289.0);vec3 psi=hash*0.07482+alpha;vec3 gx=cos(psi);vec3 gy=sin(psi);vec2 g0=vec2(gx.x,gy.x);vec2 g1=vec2(gx.y,gy.y);vec2 g2=vec2(gx.z,gy.z);vec3 w=0.8-vec3(dot(x0,x0),dot(x1,x1),dot(x2,x2));w=max(w,0.0);vec3 w2=w*w;vec3 w4=w2*w2;vec3 gdotx=vec3(dot(g0,x0),dot(g1,x1),dot(g2,x2));float n=dot(w4,gdotx);vec3 w3=w2*w;vec3 dw=-8.0*w3*gdotx;vec2 dn0=w4.x*g0+dw.x*x0;vec2 dn1=w4.y*g1+dw.y*x1;vec2 dn2=w4.z*g2+dw.z*x2;gradient=10.9*(dn0+dn1+dn2);return 10.9*n;}\";const Zt={colors:[16777215,0],minStroke:5,maxStroke:5,timeCoef:5e-4,coordScale:2,displacementScale:.002,mouseScale:.25,mouseLerp:.025};function Qt(h){const e={...Zt,...h},o=Yt({width:1,height:4096});p();const t={uMap:{value:o.texture},uTime:{value:0},uCoordScale:{value:e.coordScale},uDisplacementScale:{value:e.displacementScale},uMouse:{value:new _}},i=new ne,r=new Y({uniforms:t,vertexShader:`</span>\n","      varying vec2 vUv;\n","      <span class=\"code-keyword\">void</span> main() {\n","        vUv = uv;\n","        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, <span class=\"code-number\">1.0</span>);\n","      }\n","    <span class=\"code-string\">`,fragmentShader:`</span>\n","      uniform sampler2D uMap;\n","      uniform float uTime;\n","      uniform float uCoordScale;\n","      uniform float uDisplacementScale;\n","      uniform vec2 uMouse;\n","      varying vec2 vUv;\n","      ${Xt}\n","      <span class=\"code-keyword\">void</span> main() {\n","        vec2 p = vec2(<span class=\"code-number\">0.0</span>);\n","        vec2 grad;\n","        float n = psrdnoise(vUv * uCoordScale + uMouse, p, uTime, grad);\n","        <span class=\"code-comment\">// grad *= uCoordScale;</span>\n","        vec2 uv = vUv + uDisplacementScale * grad;\n","        gl_FragColor = texture2D(uMap, uv.yx);\n","      }\n","    <span class=\"code-string\">`}),d=new fe(i,r),n=new _,c={};return[\"el\",\"canvas\",\"width\",\"height\",\"resize\"].forEach(u=&gt;{h[u]!==void 0&amp;&amp;(c[u]=h[u])}),oe({...c,antialias:!0,initScene({camera:u,scene:v,wWidth:w,wHeight:M}){d.scale.set(w*2,M*2,1),v.add(d),u.position.set(0,-30,7),u.lookAt(0,-19,0)},beforeRender({clock:u}){t.uTime.value=u.time*e.timeCoef,t.uMouse.value.lerp(n,e.mouseLerp)},onPointerMove({nPosition:u}){n.set(-u.x,u.y).multiplyScalar(e.mouseScale)},onPointerLeave(){n.set(0,0)}}),{config:e,uniforms:t,drawTexture:p};function p(){const u=o.ctx;u.lineWidth=0;const{width:v,height:w}=o.canvas,M=ce(e.colors);let l=0,s;for(;l&lt;w;)s=e.minStroke+Math.random()*(e.maxStroke-e.minStroke),u.fillStyle=M.getColorAt(Math.random()).getStyle(),u.beginPath(),u.rect(0,l-1,v,s+1),u.fill(),u.closePath(),l+=s;o.texture.needsUpdate=!0}}const{randFloat:$t,randFloatSpread:ie}=xe,Kt={gpgpuSize:64,background:16777215,material:\"basic\",materialParams:{},texture:null,textureCount:1,colors:[16777215,16777215],lights:[{type:\"ambient\",params:[16777215,.5]},{type:\"directional\",params:[16777215,1],props:{position:[0,10,0]}}],wingsScale:[1,1,1],wingsWidthSegments:8,wingsHeightSegments:8,wingsSpeed:.75,wingsDisplacementScale:1.25,noiseCoordScale:.01,noiseTimeCoef:5e-4,noiseIntensity:.0025,attractionRadius1:100,attractionRadius2:150,maxVelocity:.1};function Jt(h){const e={...Kt,...h};if(![\"basic\",\"phong\",\"standard\"].includes(e.material))throw new Error(`</span>Invalid material ${e.material}<span class=\"code-string\">`);if(!Number.isInteger(e.wingsWidthSegments)||e.wingsWidthSegments%2!==0)throw new Error(`</span>Invalid wingsWidthSegments ${e.wingsWidthSegments}<span class=\"code-string\">`);const o=e.gpgpuSize,t=o*o;let i,r,d,n,c;const p={value:null},u={value:null},v={value:null},w={value:0},M={value:e.noiseCoordScale},l={value:e.noiseIntensity},s={value:e.maxVelocity},S={value:e.attractionRadius1},E={value:e.attractionRadius2},g={value:new j(...e.wingsScale)},R={value:e.wingsSpeed},N={value:e.wingsDisplacementScale},x={uTexturePosition:p,uOldTexturePosition:u,uTextureVelocity:v},I={uTime:w,uNoiseCoordScale:M,uNoiseIntensity:l,uMaxVelocity:s,uAttractionRadius1:S,uAttractionRadius2:E,uWingsScale:g,uWingsSpeed:R,uWingsDisplacementScale:N},F={...x,...I};let D,V,A;return{three:oe({...Ae(h),antialias:!0,orbitControls:!0,initRenderer({renderer:m}){O(m)},initCamera({camera:m}){m.position.set(0,50,70)},initScene({scene:m}){L(m)},beforeRender({clock:m}){w.value=m.time*e.noiseTimeCoef,i.compute(),p.value=c.renderTargets[i.currentTextureIndex].texture,u.value=c.renderTargets[i.currentTextureIndex===0?1:0].texture,v.value=n.renderTargets[i.currentTextureIndex].texture}}),config:e,uniforms:F,setColors:k};function O(m){i=new ge(o,o,m),m.capabilities.isWebGL2||i.setDataType(he),r=i.createTexture(),d=i.createTexture(),W(r,d),n=i.addVariable(\"textureVelocity\",`</span>\n","      ${$}\n","      uniform float uTime;\n","      uniform float uNoiseCoordScale;\n","      uniform float uNoiseIntensity;\n","      uniform float uMaxVelocity;\n","      uniform float uAttractionRadius1;\n","      uniform float uAttractionRadius2;\n","      uniform float uWingsSpeed;\n","      <span class=\"code-keyword\">void</span> main() {\n","        vec2 uv = gl_FragCoord.xy / resolution.xy;\n","        vec4 pos = texture2D(texturePosition, uv);\n","        vec4 vel = texture2D(textureVelocity, uv);\n","\n","        vec3 grad;\n","        float n = psrdnoise(pos.xyz * uNoiseCoordScale, vec3(<span class=\"code-number\">0</span>), uTime, grad);\n","        grad = grad * uNoiseIntensity;\n","        vel.xyz = vel.xyz + (pos.w * <span class=\"code-number\">0.75</span>) * grad;\n","\n","        vec3 dv = -pos.xyz;\n","        float coef = smoothstep(uAttractionRadius1, uAttractionRadius2, length(dv));\n","        vel.xyz = vel.xyz + pos.w * coef * normalize(dv);\n","        vel.xyz = clamp(vel.xyz, -uMaxVelocity, uMaxVelocity);\n","\n","        vel.w = mod(vel.w + length(vel.xyz) * (<span class=\"code-number\">0.5</span> + pos.w) * uWingsSpeed, <span class=\"code-number\">6.2831853071</span>);\n","        gl_FragColor = vel;\n","      }\n","    <span class=\"code-string\">`,d),c=i.addVariable(\"texturePosition\",`</span>\n","      ${$}\n","      uniform float uTime;\n","      <span class=\"code-keyword\">void</span> main() {\n","        vec2 uv = gl_FragCoord.xy / resolution.xy;\n","        vec4 pos = texture2D(texturePosition, uv);\n","        vec4 vel = texture2D(textureVelocity, uv);\n","        pos.xyz += vel.xyz;\n","        gl_FragColor = pos;\n","      }\n","    <span class=\"code-string\">`,r),i.setVariableDependencies(n,[c,n]),i.setVariableDependencies(c,[c,n]),Object.keys(I).forEach(b=&gt;{n.material.uniforms[b]=F[b],c.material.uniforms[b]=F[b]});const C=i.init();if(C!==null)throw new Error(C)}function L(m){e.background!==void 0&amp;&amp;(m.background=new q(e.background)),Ne(m,e.lights),D=new ne(2,2,e.wingsWidthSegments,e.wingsHeightSegments).rotateX(Math.PI/2);const C=new Float32Array(t*2),b=new Float32Array(t);let z=0,T=0;for(let f=0;f&lt;o;f++)for(let U=0;U&lt;o;U++)C[z++]=U/(o-1),C[z++]=f/(o-1),b[T++]=Math.floor(Math.random()*e.textureCount);D.setAttribute(\"gpuUv\",new le(C,2)),D.setAttribute(\"mapIndex\",new le(b,1));const P={side:Ce,...e.materialParams};switch(e.texture&amp;&amp;(P.map=new ot().load(e.texture)),P.onBeforeCompile=f=&gt;{f.defines={COMPUTE_NORMALS:e.material!==\"basic\",WINGS_WIDTH_SEGMENTS:e.wingsWidthSegments,WINGS_HEIGHT_SEGMENTS:e.wingsHeightSegments,WINGS_DX:(2/e.wingsWidthSegments).toFixed(10),WINGS_DZ:(2/e.wingsHeightSegments).toFixed(10),TEXTURE_COUNT:e.textureCount.toFixed(10)},Object.keys(F).forEach(U=&gt;{f.uniforms[U]=F[U]}),f.vertexShader=`</span>\n","        uniform sampler2D uTexturePosition;\n","        uniform sampler2D uOldTexturePosition;\n","        uniform sampler2D uTextureVelocity;\n","        uniform vec3 uWingsScale;\n","        uniform float uWingsDisplacementScale;\n","        attribute vec2 gpuUv;\n","        attribute float mapIndex;\n","        varying vec4 vPos;\n","        varying vec4 vVel;\n","        varying float vMapIndex;\n","\n","        mat3 lookAt(vec3 origin, vec3 target, vec3 up) {\n","          vec3 z = target - origin;\n","          <span class=\"code-keyword\">if</span> (z.x * z.x + z.y * z.y + z.z * z.z == <span class=\"code-number\">0.0</span>) { z.z = <span class=\"code-number\">1.0</span>; }\n","          z = normalize(z);\n","          vec3 x = cross(up, z);\n","          <span class=\"code-keyword\">if</span> (x.x * x.x + x.y * x.y + x.z * x.z == <span class=\"code-number\">0.0</span>) {\n","            <span class=\"code-keyword\">if</span> (abs(up.z) == <span class=\"code-number\">1.0</span>) { z.x += <span class=\"code-number\">0.0001</span>; }\n","            <span class=\"code-keyword\">else</span> { z.z += <span class=\"code-number\">0.0001</span>; }\n","            x = cross(up, z);\n","          }\n","          x = normalize(x);\n","          vec3 y = cross(z, x);\n","          <span class=\"code-keyword\">return</span> mat3(x, y, z);\n","        }\n","\n","        mat4 iMatrix(vec3 pos, mat3 rmat, vec3 scale) {\n","          <span class=\"code-keyword\">return</span> mat4(\n","            rmat[<span class=\"code-number\">0</span>][<span class=\"code-number\">0</span>] * scale.x, rmat[<span class=\"code-number\">0</span>][<span class=\"code-number\">1</span>] * scale.x, rmat[<span class=\"code-number\">0</span>][<span class=\"code-number\">2</span>] * scale.x, <span class=\"code-number\">0.0</span>,\n","            rmat[<span class=\"code-number\">1</span>][<span class=\"code-number\">0</span>] * scale.y, rmat[<span class=\"code-number\">1</span>][<span class=\"code-number\">1</span>] * scale.y, rmat[<span class=\"code-number\">1</span>][<span class=\"code-number\">2</span>] * scale.y, <span class=\"code-number\">0.0</span>,\n","            rmat[<span class=\"code-number\">2</span>][<span class=\"code-number\">0</span>] * scale.z, rmat[<span class=\"code-number\">2</span>][<span class=\"code-number\">1</span>] * scale.z, rmat[<span class=\"code-number\">2</span>][<span class=\"code-number\">2</span>] * scale.z, <span class=\"code-number\">0.0</span>,\n","            pos.x, pos.y, pos.z, <span class=\"code-number\">1.0</span>\n","          );\n","        }\n","      <span class=\"code-string\">`+f.vertexShader,f.vertexShader=f.vertexShader.replace(\"#include &lt;defaultnormal_vertex&gt;\",\"\"),f.vertexShader=f.vertexShader.replace(\"#include &lt;normal_vertex&gt;\",\"\"),f.vertexShader=f.vertexShader.replace(\"#include &lt;begin_vertex&gt;\",`</span>\n","        vPos = texture2D(uTexturePosition, gpuUv);\n","        vec4 oldPos = texture2D(uOldTexturePosition, gpuUv);\n","        vVel = texture2D(uTextureVelocity, gpuUv);\n","        vMapIndex = float(mapIndex);\n","\n","        mat3 rmat = lookAt(oldPos.xyz, vPos.xyz, vec3(<span class=\"code-number\">0</span>, <span class=\"code-number\">1</span>, <span class=\"code-number\">0</span>));\n","        mat4 im = iMatrix(vPos.xyz, rmat, (<span class=\"code-number\">0.5</span> + vPos.w) * uWingsScale);\n","\n","        vec3 transformed = vec3(position);\n","\n","        #ifdef COMPUTE_NORMALS\n","          vec3 transformedNormal = objectNormal; \n","        #endif\n","\n","        float dx = abs(transformed.x);\n","        <span class=\"code-keyword\">if</span> (dx &gt; <span class=\"code-number\">0.0</span>) {\n","          float sdx = smoothstep(<span class=\"code-number\">0.0</span>, <span class=\"code-number\">1.0</span> + WINGS_DX, dx);\n","          #if WINGS_HEIGHT_SEGMENTS &gt; 1\n","            float dz = transformed.z + <span class=\"code-number\">1.0</span>;\n","            float sdz = smoothstep(<span class=\"code-number\">0.0</span>, <span class=\"code-number\">2.0</span> + WINGS_DZ, dz);\n","            transformed.y = sin(vVel.w - sdx + sdz) * sdx * uWingsDisplacementScale;\n","          #else\n","            transformed.y = sin(vVel.w - sdx) * sdx * uWingsDisplacementScale;\n","          #endif\n","\n","          #ifdef COMPUTE_NORMALS\n","            #if WINGS_HEIGHT_SEGMENTS &gt; 1\n","              float s = sign(transformed.x);\n","              float sdx1 = smoothstep(<span class=\"code-number\">0.0</span>, <span class=\"code-number\">1.0</span> + WINGS_DX, dx + WINGS_DX);\n","              float sdz1 = smoothstep(<span class=\"code-number\">0.0</span>, <span class=\"code-number\">2.0</span> + WINGS_DZ, dz + WINGS_DZ);\n","              float dvy1 = sin(vVel.w - sdx + sdz1) * sdx * uWingsDisplacementScale - transformed.y;\n","              float dvy2 = sin(vVel.w - sdx1 + sdz) * sdx1 * uWingsDisplacementScale - transformed.y;\n","              vec3 v1 = vec3(<span class=\"code-number\">0.0</span>, dvy1, s * WINGS_DZ);\n","              vec3 v2 = vec3(s * WINGS_DX, dvy2, <span class=\"code-number\">0.0</span>);\n","              transformedNormal = -normalize(cross(v1, v2));\n","            #else\n","              float s = sign(transformed.x);\n","              float sdx1 = smoothstep(<span class=\"code-number\">0.0</span>, <span class=\"code-number\">1.0</span> + WINGS_DX, dx + WINGS_DX);\n","              float dvy1 = sin(vVel.w - sdx1) * sdx * uWingsDisplacementScale - transformed.y;\n","              vec3 v1 = vec3(<span class=\"code-number\">0.0</span>, <span class=\"code-number\">0.0</span>, s);\n","              vec3 v2 = vec3(s * WINGS_DX, dvy1, <span class=\"code-number\">0.0</span>);\n","              transformedNormal = -normalize(cross(v1, v2));\n","            #endif  \n","          #endif\n","        }\n","\n","        #ifdef COMPUTE_NORMALS\n","          #ifdef USE_INSTANCING\n","            mat3 m = mat3( im );\n","            transformedNormal /= vec3( dot( m[ <span class=\"code-number\">0</span> ], m[ <span class=\"code-number\">0</span> ] ), dot( m[ <span class=\"code-number\">1</span> ], m[ <span class=\"code-number\">1</span> ] ), dot( m[ <span class=\"code-number\">2</span> ], m[ <span class=\"code-number\">2</span> ] ) );\n","            transformedNormal = m * transformedNormal;\n","          #endif\n","          transformedNormal = normalMatrix * transformedNormal;\n","          #ifdef FLIP_SIDED\n","            transformedNormal = - transformedNormal;\n","          #endif\n","          #ifdef USE_TANGENT\n","            vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, <span class=\"code-number\">0.0</span> ) ).xyz;\n","            #ifdef FLIP_SIDED\n","              transformedTangent = - transformedTangent;\n","            #endif\n","          #endif\n","          #ifndef FLAT_SHADED\n","            vNormal = normalize( transformedNormal );\n","            #ifdef USE_TANGENT\n","              vTangent = normalize( transformedTangent );\n","              vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n","            #endif\n","          #endif\n","        #endif\n","      <span class=\"code-string\">`),f.vertexShader=f.vertexShader.replace(\"#include &lt;project_vertex&gt;\",`</span>\n","        vec4 mvPosition = vec4( transformed, <span class=\"code-number\">1.0</span> );\n","        #ifdef USE_INSTANCING\n","          mvPosition = im * mvPosition;\n","        #endif\n","        mvPosition = modelViewMatrix * mvPosition;\n","        gl_Position = projectionMatrix * mvPosition;\n","      <span class=\"code-string\">`),f.fragmentShader=`</span>\n","        varying float vMapIndex;\n","      <span class=\"code-string\">`+f.fragmentShader,f.fragmentShader=f.fragmentShader.replace(\"#include &lt;map_fragment&gt;\",`</span>\n","        #ifdef USE_MAP\n","          vec2 uv = vUv;\n","          uv.x = (vMapIndex + vUv.x) / TEXTURE_COUNT;\n","          vec4 sampledDiffuseColor = texture2D(map, uv);\n","          diffuseColor *= sampledDiffuseColor;\n","        #endif\n","      <span class=\"code-string\">`)},e.material){case\"standard\":V=new Ee(P);break;case\"phong\":V=new it(P);break;default:V=new Me(P)}A=new De(D,V,t),k(e.colors),m.add(A)}function k(m){if(Array.isArray(m)&amp;&amp;m.length&gt;1){const C=ce(m);for(let b=0;b&lt;t;b++)A.setColorAt(b,C.getColorAt(b/t));A.instanceColor.needsUpdate=!0}}function W(m,C){const b=m.image.data,z=C.image.data;for(let T=0,P=b.length;T&lt;P;T+=4)b[T+0]=ie(150),b[T+1]=ie(150),b[T+2]=ie(150),b[T+3]=$t(.1,1),z[T+0]=ie(.5),z[T+1]=ie(.5),z[T+2]=ie(.5),z[T+3]=0}}const ye={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`</span>\n","\n","\t\tvarying vec2 vUv;\n","\n","\t\t<span class=\"code-keyword\">void</span> main() {\n","\n","\t\t\tvUv = uv;\n","\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, <span class=\"code-number\">1.0</span> );\n","\n","\t\t}<span class=\"code-string\">`,fragmentShader:`</span>\n","\n","\t\tuniform float opacity;\n","\n","\t\tuniform sampler2D tDiffuse;\n","\n","\t\tvarying vec2 vUv;\n","\n","\t\t<span class=\"code-keyword\">void</span> main() {\n","\n","\t\t\tgl_FragColor = texture2D( tDiffuse, vUv );\n","\t\t\tgl_FragColor.a *= opacity;\n","\n","\n","\t\t}<span class=\"code-string\">`};class ue{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error(\"THREE.Pass: .render() must be implemented in derived pass.\")}}const eo=new ze(-1,1,1,-1,0,1),Ie=new pe;Ie.setAttribute(\"position\",new te([-1,3,0,-1,-1,0,3,-1,0],3)),Ie.setAttribute(\"uv\",new te([0,2,0,0,2,0],2));class lt{constructor(e){this._mesh=new fe(Ie,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,eo)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class ct extends ue{constructor(e,o){super();this.textureID=o!==void 0?o:\"tDiffuse\",e instanceof Y?(this.uniforms=e.uniforms,this.material=e):e&amp;&amp;(this.uniforms=_e.clone(e.uniforms),this.material=new Y({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new lt(this.material)}render(e,o,t){this.uniforms[this.textureID]&amp;&amp;(this.uniforms[this.textureID].value=t.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(o),this.clear&amp;&amp;e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}}class ut extends ue{constructor(e,o){super();this.scene=e,this.camera=o,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,o,t){const i=e.getContext(),r=e.state;r.buffers.color.setMask(!1),r.buffers.depth.setMask(!1),r.buffers.color.setLocked(!0),r.buffers.depth.setLocked(!0);let d,n;this.inverse?(d=0,n=1):(d=1,n=0),r.buffers.stencil.setTest(!0),r.buffers.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),r.buffers.stencil.setFunc(i.ALWAYS,d,4294967295),r.buffers.stencil.setClear(n),r.buffers.stencil.setLocked(!0),e.setRenderTarget(t),this.clear&amp;&amp;e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(o),this.clear&amp;&amp;e.clear(),e.render(this.scene,this.camera),r.buffers.color.setLocked(!1),r.buffers.depth.setLocked(!1),r.buffers.stencil.setLocked(!1),r.buffers.stencil.setFunc(i.EQUAL,1,4294967295),r.buffers.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),r.buffers.stencil.setLocked(!0)}}class to extends ue{constructor(){super();this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class oo{constructor(e,o){if(this.renderer=e,o===void 0){const t=e.getSize(new _);this._pixelRatio=e.getPixelRatio(),this._width=t.width,this._height=t.height,o=new se(this._width*this._pixelRatio,this._height*this._pixelRatio),o.texture.name=\"EffectComposer.rt1\"}else this._pixelRatio=1,this._width=o.width,this._height=o.height;this.renderTarget1=o,this.renderTarget2=o.clone(),this.renderTarget2.texture.name=\"EffectComposer.rt2\",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],ye===void 0&amp;&amp;console.error(\"THREE.EffectComposer relies on CopyShader\"),ct===void 0&amp;&amp;console.error(\"THREE.EffectComposer relies on ShaderPass\"),this.copyPass=new ct(ye),this.clock=new At}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,o){this.passes.splice(o,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const o=this.passes.indexOf(e);o!==-1&amp;&amp;this.passes.splice(o,1)}isLastEnabledPass(e){for(let o=e+1;o&lt;this.passes.length;o++)if(this.passes[o].enabled)return!1;return!0}render(e){e===void 0&amp;&amp;(e=this.clock.getDelta());const o=this.renderer.getRenderTarget();let t=!1;for(let i=0,r=this.passes.length;i&lt;r;i++){const d=this.passes[i];if(d.enabled!==!1){if(d.renderToScreen=this.renderToScreen&amp;&amp;this.isLastEnabledPass(i),d.render(this.renderer,this.writeBuffer,this.readBuffer,e,t),d.needsSwap){if(t){const n=this.renderer.getContext(),c=this.renderer.state.buffers.stencil;c.setFunc(n.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),c.setFunc(n.EQUAL,1,4294967295)}this.swapBuffers()}ut!==void 0&amp;&amp;(d instanceof ut?t=!0:d instanceof to&amp;&amp;(t=!1))}}this.renderer.setRenderTarget(o)}reset(e){if(e===void 0){const o=this.renderer.getSize(new _);this._pixelRatio=this.renderer.getPixelRatio(),this._width=o.width,this._height=o.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,o){this._width=e,this._height=o;const t=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(t,i),this.renderTarget2.setSize(t,i);for(let r=0;r&lt;this.passes.length;r++)this.passes[r].setSize(t,i)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}}new ze(-1,1,1,-1,0,1);const dt=new pe;dt.setAttribute(\"position\",new te([-1,3,0,-1,-1,0,3,-1,0],3)),dt.setAttribute(\"uv\",new te([0,2,0,0,2,0],2));class io extends ue{constructor(e,o,t,i,r){super();this.scene=e,this.camera=o,this.overrideMaterial=t,this.clearColor=i,this.clearAlpha=r!==void 0?r:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new q}render(e,o,t){const i=e.autoClear;e.autoClear=!1;let r,d;this.overrideMaterial!==void 0&amp;&amp;(d=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&amp;&amp;(e.getClearColor(this._oldClearColor),r=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&amp;&amp;e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:t),this.clear&amp;&amp;e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&amp;&amp;e.setClearColor(this._oldClearColor,r),this.overrideMaterial!==void 0&amp;&amp;(this.scene.overrideMaterial=d),e.autoClear=i}}const mt={shaderID:\"luminosityHighPass\",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new q(0)},defaultOpacity:{value:0}},vertexShader:`</span>\n","\n","\t\tvarying vec2 vUv;\n","\n","\t\t<span class=\"code-keyword\">void</span> main() {\n","\n","\t\t\tvUv = uv;\n","\n","\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, <span class=\"code-number\">1.0</span> );\n","\n","\t\t}<span class=\"code-string\">`,fragmentShader:`</span>\n","\n","\t\tuniform sampler2D tDiffuse;\n","\t\tuniform vec3 defaultColor;\n","\t\tuniform float defaultOpacity;\n","\t\tuniform float luminosityThreshold;\n","\t\tuniform float smoothWidth;\n","\n","\t\tvarying vec2 vUv;\n","\n","\t\t<span class=\"code-keyword\">void</span> main() {\n","\n","\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n","\n","\t\t\tvec3 luma = vec3( <span class=\"code-number\">0.299</span>, <span class=\"code-number\">0.587</span>, <span class=\"code-number\">0.114</span> );\n","\n","\t\t\tfloat v = dot( texel.xyz, luma );\n","\n","\t\t\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );\n","\n","\t\t\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );\n","\n","\t\t\tgl_FragColor = mix( outputColor, texel, alpha );\n","\n","\t\t}<span class=\"code-string\">`};class re extends ue{constructor(e,o,t,i){super();this.strength=o!==void 0?o:1,this.radius=t,this.threshold=i,this.resolution=e!==void 0?new _(e.x,e.y):new _(256,256),this.clearColor=new q(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let r=Math.round(this.resolution.x/2),d=Math.round(this.resolution.y/2);this.renderTargetBright=new se(r,d),this.renderTargetBright.texture.name=\"UnrealBloomPass.bright\",this.renderTargetBright.texture.generateMipmaps=!1;for(let v=0;v&lt;this.nMips;v++){const w=new se(r,d);w.texture.name=\"UnrealBloomPass.h\"+v,w.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(w);const M=new se(r,d);M.texture.name=\"UnrealBloomPass.v\"+v,M.texture.generateMipmaps=!1,this.renderTargetsVertical.push(M),r=Math.round(r/2),d=Math.round(d/2)}mt===void 0&amp;&amp;console.error(\"THREE.UnrealBloomPass relies on LuminosityHighPassShader\");const n=mt;this.highPassUniforms=_e.clone(n.uniforms),this.highPassUniforms.luminosityThreshold.value=i,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new Y({uniforms:this.highPassUniforms,vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,defines:{}}),this.separableBlurMaterials=[];const c=[3,5,7,9,11];r=Math.round(this.resolution.x/2),d=Math.round(this.resolution.y/2);for(let v=0;v&lt;this.nMips;v++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(c[v])),this.separableBlurMaterials[v].uniforms.texSize.value=new _(r,d),r=Math.round(r/2),d=Math.round(d/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=o,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0;const p=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=p,this.bloomTintColors=[new j(1,1,1),new j(1,1,1),new j(1,1,1),new j(1,1,1),new j(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,ye===void 0&amp;&amp;console.error(\"THREE.UnrealBloomPass relies on CopyShader\");const u=ye;this.copyUniforms=_e.clone(u.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new Y({uniforms:this.copyUniforms,vertexShader:u.vertexShader,fragmentShader:u.fragmentShader,blending:tt,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new q,this.oldClearAlpha=1,this.basic=new Me,this.fsQuad=new lt(null)}dispose(){for(let e=0;e&lt;this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e&lt;this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose()}setSize(e,o){let t=Math.round(e/2),i=Math.round(o/2);this.renderTargetBright.setSize(t,i);for(let r=0;r&lt;this.nMips;r++)this.renderTargetsHorizontal[r].setSize(t,i),this.renderTargetsVertical[r].setSize(t,i),this.separableBlurMaterials[r].uniforms.texSize.value=new _(t,i),t=Math.round(t/2),i=Math.round(i/2)}render(e,o,t,i,r){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const d=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),r&amp;&amp;e.state.buffers.stencil.setTest(!1),this.renderToScreen&amp;&amp;(this.fsQuad.material=this.basic,this.basic.map=t.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=t.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let n=this.renderTargetBright;for(let c=0;c&lt;this.nMips;c++)this.fsQuad.material=this.separableBlurMaterials[c],this.separableBlurMaterials[c].uniforms.colorTexture.value=n.texture,this.separableBlurMaterials[c].uniforms.direction.value=re.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[c]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[c].uniforms.colorTexture.value=this.renderTargetsHorizontal[c].texture,this.separableBlurMaterials[c].uniforms.direction.value=re.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[c]),e.clear(),this.fsQuad.render(e),n=this.renderTargetsVertical[c];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,r&amp;&amp;e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=d}getSeperableBlurMaterial(e){return new Y({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new _(.5,.5)},direction:{value:new _(.5,.5)}},vertexShader:`</span>varying vec2 vUv;\n","\t\t\t\t<span class=\"code-keyword\">void</span> main() {\n","\t\t\t\t\tvUv = uv;\n","\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, <span class=\"code-number\">1.0</span> );\n","\t\t\t\t}`,fragmentShader:`#include &lt;common&gt;\n","\t\t\t\tvarying vec2 vUv;\n","\t\t\t\tuniform sampler2D colorTexture;\n","\t\t\t\tuniform vec2 texSize;\n","\t\t\t\tuniform vec2 direction;\n","\n","\t\t\t\tfloat gaussianPdf(<span class=\"code-keyword\">in</span> float x, <span class=\"code-keyword\">in</span> float sigma) {\n","\t\t\t\t\t<span class=\"code-keyword\">return</span> <span class=\"code-number\">0.39894</span> * exp( <span class=\"code-number\">-0.5</span> * x * x/( sigma * sigma))/sigma;\n","\t\t\t\t}\n","\t\t\t\t<span class=\"code-keyword\">void</span> main() {\n","\t\t\t\t\tvec2 invSize = <span class=\"code-number\">1.0</span> / texSize;\n","\t\t\t\t\tfloat fSigma = float(SIGMA);\n","\t\t\t\t\tfloat weightSum = gaussianPdf(<span class=\"code-number\">0.0</span>, fSigma);\n","\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\n","\t\t\t\t\t<span class=\"code-keyword\">for</span>( int i = <span class=\"code-number\">1</span>; i &lt; KERNEL_RADIUS; i ++ ) {\n","\t\t\t\t\t\tfloat x = float(i);\n","\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\n","\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\n","\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\n","\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\n","\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\n","\t\t\t\t\t\tweightSum += <span class=\"code-number\">2.0</span> * w;\n","\t\t\t\t\t}\n","\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, <span class=\"code-number\">1.0</span>);\n","\t\t\t\t}<span class=\"code-string\">`})}getCompositeMaterial(e){return new Y({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`</span>varying vec2 vUv;\n","\t\t\t\t<span class=\"code-keyword\">void</span> main() {\n","\t\t\t\t\tvUv = uv;\n","\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, <span class=\"code-number\">1.0</span> );\n","\t\t\t\t}<span class=\"code-string\">`,fragmentShader:`</span>varying vec2 vUv;\n","\t\t\t\tuniform sampler2D blurTexture1;\n","\t\t\t\tuniform sampler2D blurTexture2;\n","\t\t\t\tuniform sampler2D blurTexture3;\n","\t\t\t\tuniform sampler2D blurTexture4;\n","\t\t\t\tuniform sampler2D blurTexture5;\n","\t\t\t\tuniform float bloomStrength;\n","\t\t\t\tuniform float bloomRadius;\n","\t\t\t\tuniform float bloomFactors[NUM_MIPS];\n","\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\n","\n","\t\t\t\tfloat lerpBloomFactor(<span class=\"code-keyword\">const</span> <span class=\"code-keyword\">in</span> float factor) {\n","\t\t\t\t\tfloat mirrorFactor = <span class=\"code-number\">1.2</span> - factor;\n","\t\t\t\t\t<span class=\"code-keyword\">return</span> mix(factor, mirrorFactor, bloomRadius);\n","\t\t\t\t}\n","\n","\t\t\t\t<span class=\"code-keyword\">void</span> main() {\n","\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[<span class=\"code-number\">0</span>]) * vec4(bloomTintColors[<span class=\"code-number\">0</span>], <span class=\"code-number\">1.0</span>) * texture2D(blurTexture1, vUv) +\n","\t\t\t\t\t\tlerpBloomFactor(bloomFactors[<span class=\"code-number\">1</span>]) * vec4(bloomTintColors[<span class=\"code-number\">1</span>], <span class=\"code-number\">1.0</span>) * texture2D(blurTexture2, vUv) +\n","\t\t\t\t\t\tlerpBloomFactor(bloomFactors[<span class=\"code-number\">2</span>]) * vec4(bloomTintColors[<span class=\"code-number\">2</span>], <span class=\"code-number\">1.0</span>) * texture2D(blurTexture3, vUv) +\n","\t\t\t\t\t\tlerpBloomFactor(bloomFactors[<span class=\"code-number\">3</span>]) * vec4(bloomTintColors[<span class=\"code-number\">3</span>], <span class=\"code-number\">1.0</span>) * texture2D(blurTexture4, vUv) +\n","\t\t\t\t\t\tlerpBloomFactor(bloomFactors[<span class=\"code-number\">4</span>]) * vec4(bloomTintColors[<span class=\"code-number\">4</span>], <span class=\"code-number\">1.0</span>) * texture2D(blurTexture5, vUv) );\n","\t\t\t\t}<span class=\"code-string\">`})}}re.BlurDirectionX=new _(1,0),re.BlurDirectionY=new _(0,1);const{randFloat:ao,randFloatSpread:we}=xe,ro={gpgpuSize:256,bloomStrength:1.5,bloomRadius:.5,bloomThreshold:.25,colors:[Math.random()*16777215,Math.random()*16777215,Math.random()*16777215],geometry:\"custom\",geometryScale:[1,1,1],lights:[{type:\"ambient\",params:[16777215,.5]},{type:\"point\",params:[16777215,1],props:{position:[0,0,0]}},{type:\"point\",params:[16748640,.75],props:{position:[0,-100,-100]}},{type:\"point\",params:[6328575,.75],props:{position:[0,100,100]}}],materialParams:{},noiseCoordScale:.01,noiseIntensity:.0025,noiseTimeCoef:4e-4,attractionRadius1:150,attractionRadius2:250,maxVelocity:.25};function no(h){const e={...ro,...h},o=e.gpgpuSize,t=o*o;let i,r,d,n,c;const p={value:null},u={value:null},v={value:null},w={value:new j(...e.geometryScale)},M={value:0},l={value:e.noiseCoordScale},s={value:e.noiseIntensity},S={value:e.maxVelocity},E={value:e.attractionRadius1},g={value:e.attractionRadius2},R={value:new j},N={uTexturePosition:p,uOldTexturePosition:u,uTextureVelocity:v},x={uScale:w,uTime:M,uNoiseCoordScale:l,uNoiseIntensity:s,uMaxVelocity:S,uAttractionRadius1:E,uAttractionRadius2:g,uMouse:R},I={...N,...x};let F,D,V,A,O,L,k;return{three:oe({...Ae(h),antialias:!1,orbitControls:!0,initRenderer({renderer:z}){W(z)},initCamera(z){A=z.camera,A.position.z=70},initScene({renderer:z,width:T,height:P,camera:f,scene:U}){m(U),D=new io(U,f),V=new re(new _(T,P),e.bloomStrength,e.bloomRadius,e.bloomThreshold),F=new oo(z),F.addPass(D),F.addPass(V)},afterResize({width:z,height:T}){F&amp;&amp;F.setSize(z,T)},beforeRender({clock:z}){M.value=z.time*e.noiseTimeCoef,i.compute(),p.value=c.renderTargets[i.currentTextureIndex].texture,u.value=c.renderTargets[i.currentTextureIndex===0?1:0].texture,v.value=n.renderTargets[i.currentTextureIndex].texture},render(){F.render()}}),config:e,uniforms:I,setColors:C};function W(z){i=new ge(o,o,z),z.capabilities.isWebGL2||i.setDataType(he),r=i.createTexture(),d=i.createTexture(),b(r,d),n=i.addVariable(\"textureVelocity\",`</span>\n","      ${$}\n","      uniform float uTime;\n","      uniform vec3 uMouse;\n","      uniform float uNoiseCoordScale;\n","      uniform float uNoiseIntensity;\n","      uniform float uMaxVelocity;\n","      uniform float uAttractionRadius1;\n","      uniform float uAttractionRadius2;\n","\n","      <span class=\"code-keyword\">void</span> main() {\n","        vec2 uv = gl_FragCoord.xy / resolution.xy;\n","        vec4 pos = texture2D(texturePosition, uv);\n","        vec4 vel = texture2D(textureVelocity, uv);\n","\n","        vec3 grad;\n","        float n = psrdnoise(pos.xyz * uNoiseCoordScale, vec3(<span class=\"code-number\">0</span>), uTime, grad);\n","        vel.xyz += (pos.w * <span class=\"code-number\">0.75</span>) * grad * uNoiseIntensity;\n","\n","        vec3 dv = -pos.xyz;\n","        float coef = smoothstep(uAttractionRadius1, uAttractionRadius2, length(dv));\n","        vel.xyz = vel.xyz + pos.w * coef * normalize(dv);\n","        vel.xyz = clamp(vel.xyz, -uMaxVelocity, uMaxVelocity);\n","\n","        gl_FragColor = vel;\n","      }\n","    <span class=\"code-string\">`,d),c=i.addVariable(\"texturePosition\",`</span>\n","      ${$}\n","      uniform float uTime;\n","      uniform vec3 uMouse;\n","      <span class=\"code-keyword\">void</span> main() {\n","        vec2 uv = gl_FragCoord.xy / resolution.xy;\n","        vec4 pos = texture2D(texturePosition, uv);\n","        vec4 vel = texture2D(textureVelocity, uv);\n","        pos.xyz += vel.xyz;\n","        gl_FragColor = pos;\n","      }\n","    <span class=\"code-string\">`,r),i.setVariableDependencies(n,[c,n]),i.setVariableDependencies(c,[c,n]),Object.keys(x).forEach(P=&gt;{n.material.uniforms[P]=I[P],c.material.uniforms[P]=I[P]});const T=i.init();if(T!==null)throw new Error(T)}function m(z){switch(e.background!==void 0&amp;&amp;(z.background=new q(e.background)),Ne(z,e.lights),e.geometry){case\"box\":O=new Ut;break;case\"capsule\":O=new Ot(.2,1,4,8).rotateX(Math.PI/2);break;case\"cone\":O=new kt(.4,2,6).rotateX(Math.PI/2);break;case\"octahedron\":O=new It(1,0).rotateX(Math.PI/2);break;case\"sphere\":O=new Nt(.5,8,8);break;default:O=so(1)}const T=new Float32Array(t*2);let P=0;for(let f=0;f&lt;o;f++)for(let U=0;U&lt;o;U++)T[P++]=U/(o-1),T[P++]=f/(o-1);O.setAttribute(\"gpuUv\",new le(T,2)),L=new Ee({metalness:.75,roughness:.25,side:Ce,...e.materialParams,onBeforeCompile:f=&gt;{Object.keys(I).forEach(U=&gt;{f.uniforms[U]=I[U]}),f.vertexShader=`</span>\n","          uniform sampler2D uTexturePosition;\n","          uniform sampler2D uOldTexturePosition;\n","          uniform sampler2D uTextureVelocity;\n","          uniform vec3 uScale;\n","          attribute vec2 gpuUv;\n","          varying vec4 vPos;\n","          varying vec4 vVel;\n","\n","          mat3 lookAt(vec3 origin, vec3 target, vec3 up) {\n","            vec3 z = target - origin;\n","            <span class=\"code-keyword\">if</span> (z.x * z.x + z.y * z.y + z.z * z.z == <span class=\"code-number\">0.0</span>) { z.z = <span class=\"code-number\">1.0</span>; }\n","            z = normalize(z);\n","            vec3 x = cross(up, z);\n","            <span class=\"code-keyword\">if</span> (x.x * x.x + x.y * x.y + x.z * x.z == <span class=\"code-number\">0.0</span>) {\n","              <span class=\"code-keyword\">if</span> (abs(up.z) == <span class=\"code-number\">1.0</span>) { z.x += <span class=\"code-number\">0.0001</span>; }\n","              <span class=\"code-keyword\">else</span> { z.z += <span class=\"code-number\">0.0001</span>; }\n","              x = cross(up, z);\n","            }\n","            x = normalize(x);\n","            vec3 y = cross(z, x);\n","            <span class=\"code-keyword\">return</span> mat3(x, y, z);\n","          }\n","\n","          mat4 iMatrix(vec3 pos, mat3 rmat, vec3 scale) {\n","            <span class=\"code-keyword\">return</span> mat4(\n","              rmat[<span class=\"code-number\">0</span>][<span class=\"code-number\">0</span>] * scale.x, rmat[<span class=\"code-number\">0</span>][<span class=\"code-number\">1</span>] * scale.x, rmat[<span class=\"code-number\">0</span>][<span class=\"code-number\">2</span>] * scale.x, <span class=\"code-number\">0.0</span>,\n","              rmat[<span class=\"code-number\">1</span>][<span class=\"code-number\">0</span>] * scale.y, rmat[<span class=\"code-number\">1</span>][<span class=\"code-number\">1</span>] * scale.y, rmat[<span class=\"code-number\">1</span>][<span class=\"code-number\">2</span>] * scale.y, <span class=\"code-number\">0.0</span>,\n","              rmat[<span class=\"code-number\">2</span>][<span class=\"code-number\">0</span>] * scale.z, rmat[<span class=\"code-number\">2</span>][<span class=\"code-number\">1</span>] * scale.z, rmat[<span class=\"code-number\">2</span>][<span class=\"code-number\">2</span>] * scale.z, <span class=\"code-number\">0.0</span>,\n","              pos.x, pos.y, pos.z, <span class=\"code-number\">1.0</span>\n","            );\n","          }\n","        <span class=\"code-string\">`+f.vertexShader,f.vertexShader=f.vertexShader.replace(\"#include &lt;defaultnormal_vertex&gt;\",`</span>\n","          vPos = texture2D(uTexturePosition, gpuUv);\n","          vec4 oldPos = texture2D(uOldTexturePosition, gpuUv);\n","          vVel = texture2D(uTextureVelocity, gpuUv);\n","\n","          mat3 rmat = lookAt(oldPos.xyz, vPos.xyz, vec3(<span class=\"code-number\">0</span>, <span class=\"code-number\">1</span>, <span class=\"code-number\">0</span>));\n","          mat4 im = iMatrix(vPos.xyz, rmat, (<span class=\"code-number\">0.5</span> + vPos.w) * uScale);\n","\n","          vec3 transformedNormal = objectNormal;\n","          mat3 m = mat3(im);\n","          transformedNormal /= vec3( dot( m[ <span class=\"code-number\">0</span> ], m[ <span class=\"code-number\">0</span> ] ), dot( m[ <span class=\"code-number\">1</span> ], m[ <span class=\"code-number\">1</span> ] ), dot( m[ <span class=\"code-number\">2</span> ], m[ <span class=\"code-number\">2</span> ] ) );\n","          transformedNormal = m * transformedNormal;\n","          transformedNormal = normalMatrix * transformedNormal;\n","        <span class=\"code-string\">`),f.vertexShader=f.vertexShader.replace(\"#include &lt;project_vertex&gt;\",`</span>\n","          vec4 mvPosition = modelViewMatrix * im * vec4(transformed, <span class=\"code-number\">1.0</span>);\n","          gl_Position = projectionMatrix * mvPosition;\n","        <span class=\"code-string\">`)}}),k=new De(O,L,t),C(e.colors),z.add(k)}function C(z){if(Array.isArray(z)&amp;&amp;z.length&gt;1){const T=ce(z);for(let P=0;P&lt;t;P++)k.setColorAt(P,T.getColorAt(P/t));k.instanceColor.needsUpdate=!0}}function b(z,T){const P=new j,f=z.image.data,U=T.image.data;for(let Q=0,de=f.length;Q&lt;de;Q+=4)P.set(we(1),we(1),we(1)).normalize().multiplyScalar(we(e.attractionRadius1*2)),P.toArray(f,Q),f[Q+3]=ao(.1,1),P.set(0,0,0),P.toArray(U,Q),U[Q+3]=0}}function so(h){const e=[{p:[h*.5,0,-h],n:[0,1,0]},{p:[-h*.5,0,-h],n:[0,1,0]},{p:[0,0,h],n:[0,1,0]},{p:[0,-h*.5,-h],n:[1,0,0]},{p:[0,h*.5,-h],n:[1,0,0]},{p:[0,0,h],n:[1,0,0]}],o=[0,1,2,3,4,5],t=[],i=[];for(const d of e)t.push(...d.p),i.push(...d.n);const r=new pe;return r.setAttribute(\"position\",new te(t,3)),r.setAttribute(\"normal\",new te(i,3)),r.setIndex(o),r}const{randFloat:lo,randFloatSpread:ae}=xe,co={gpgpuSize:64,background:16777215,material:\"basic\",materialParams:{},texture:null,textureCount:1,colors:[16777215,16777215],lights:[{type:\"ambient\",params:[16777215,.5]},{type:\"directional\",params:[16777215,.5],props:{position:[20,50,100]}}],fogDensity:.01,fishScale:[1,1,1],fishWidthSegments:8,fishSpeed:1.5,fishDisplacementScale:.2,noiseCoordScale:.02,noiseTimeCoef:5e-4,noiseIntensity:.0025,attractionRadius1:50,attractionRadius2:100,maxVelocity:.1};function uo(h){const e={...co,...h};if(![\"basic\",\"phong\",\"standard\"].includes(e.material))throw new Error(`</span>Invalid material ${e.material}<span class=\"code-string\">`);if(!Number.isInteger(e.fishWidthSegments)||e.fishWidthSegments%2!==0)throw new Error(`</span>Invalid fishWidthSegments ${e.fishWidthSegments}<span class=\"code-string\">`);const o=e.gpgpuSize,t=o*o;let i,r,d,n,c;const p={value:null},u={value:null},v={value:null},w={value:0},M={value:e.noiseCoordScale},l={value:e.noiseIntensity},s={value:e.maxVelocity},S={value:e.attractionRadius1},E={value:e.attractionRadius2},g={value:new j(...e.fishScale)},R={value:e.fishSpeed},N={value:e.fishDisplacementScale},x={uTexturePosition:p,uOldTexturePosition:u,uTextureVelocity:v},I={uTime:w,uNoiseCoordScale:M,uNoiseIntensity:l,uMaxVelocity:s,uAttractionRadius1:S,uAttractionRadius2:E,uFishScale:g,uFishSpeed:R,uFishDisplacementScale:N},F={...x,...I};let D,V,A;return{three:oe({...Ae(h),antialias:!0,orbitControls:!0,initRenderer({renderer:m}){O(m)},initCamera({camera:m}){m.position.set(0,20,70)},initScene({scene:m}){L(m)},beforeRender({clock:m}){w.value=m.time*e.noiseTimeCoef,i.compute(),p.value=c.renderTargets[i.currentTextureIndex].texture,u.value=c.renderTargets[i.currentTextureIndex===0?1:0].texture,v.value=n.renderTargets[i.currentTextureIndex].texture}}),config:e,uniforms:F,setColors:k};function O(m){i=new ge(o,o,m),m.capabilities.isWebGL2||i.setDataType(he),r=i.createTexture(),d=i.createTexture(),W(r,d),n=i.addVariable(\"textureVelocity\",`</span>\n","      ${$}\n","      uniform float uTime;\n","      uniform float uNoiseCoordScale;\n","      uniform float uNoiseIntensity;\n","      uniform float uMaxVelocity;\n","      uniform float uAttractionRadius1;\n","      uniform float uAttractionRadius2;\n","      uniform float uFishSpeed;\n","      <span class=\"code-keyword\">void</span> main() {\n","        vec2 uv = gl_FragCoord.xy / resolution.xy;\n","        vec4 pos = texture2D(texturePosition, uv);\n","        vec4 vel = texture2D(textureVelocity, uv);\n","\n","        vec3 grad;\n","        float n = psrdnoise(pos.xyz * uNoiseCoordScale, vec3(<span class=\"code-number\">0</span>), uTime, grad);\n","        grad = grad * uNoiseIntensity;\n","        vel.xyz = vel.xyz + (pos.w * <span class=\"code-number\">0.75</span>) * grad;\n","\n","        vec3 dv = -pos.xyz;\n","        float coef = smoothstep(uAttractionRadius1, uAttractionRadius2, length(dv));\n","        vel.xyz = vel.xyz + pos.w * coef * normalize(dv);\n","        vel.xyz = clamp(vel.xyz, -uMaxVelocity, uMaxVelocity);\n","\n","        vel.w = mod(vel.w + length(vel.xyz) * (<span class=\"code-number\">0.5</span> + pos.w) * uFishSpeed, <span class=\"code-number\">6.2831853071</span>);\n","        gl_FragColor = vel;\n","      }\n","    <span class=\"code-string\">`,d),c=i.addVariable(\"texturePosition\",`</span>\n","      ${$}\n","      uniform float uTime;\n","      <span class=\"code-keyword\">void</span> main() {\n","        vec2 uv = gl_FragCoord.xy / resolution.xy;\n","        vec4 pos = texture2D(texturePosition, uv);\n","        vec4 vel = texture2D(textureVelocity, uv);\n","        pos.xyz += vel.xyz;\n","        gl_FragColor = pos;\n","      }\n","    <span class=\"code-string\">`,r),i.setVariableDependencies(n,[c,n]),i.setVariableDependencies(c,[c,n]),Object.keys(I).forEach(b=&gt;{n.material.uniforms[b]=F[b],c.material.uniforms[b]=F[b]});const C=i.init();if(C!==null)throw new Error(C)}function L(m){e.background!==void 0&amp;&amp;(m.background=new q(e.background),e.fogDensity&amp;&amp;(m.fog=new Lt(e.background,e.fogDensity))),Ne(m,e.lights),D=new ne(2,1,e.fishWidthSegments,1).rotateY(Math.PI/2);const C=new Float32Array(t*2),b=new Float32Array(t);let z=0,T=0;for(let f=0;f&lt;o;f++)for(let U=0;U&lt;o;U++)C[z++]=U/(o-1),C[z++]=f/(o-1),b[T++]=Math.floor(Math.random()*e.textureCount);D.setAttribute(\"gpuUv\",new le(C,2)),D.setAttribute(\"mapIndex\",new le(b,1));const P={side:Ce,...e.materialParams};switch(e.texture&amp;&amp;(P.map=new ot().load(e.texture)),P.onBeforeCompile=f=&gt;{f.defines={COMPUTE_NORMALS:e.material!==\"basic\",FISH_DZ:(2/e.fishWidthSegments).toFixed(10),TEXTURE_COUNT:e.textureCount.toFixed(10)},Object.keys(F).forEach(U=&gt;{f.uniforms[U]=F[U]}),f.vertexShader=`</span>\n","        uniform sampler2D uTexturePosition;\n","        uniform sampler2D uOldTexturePosition;\n","        uniform sampler2D uTextureVelocity;\n","        uniform vec3 uFishScale;\n","        uniform float uFishDisplacementScale;\n","        attribute vec2 gpuUv;\n","        attribute float mapIndex;\n","        varying vec4 vPos;\n","        varying vec4 vVel;\n","        varying float vMapIndex;\n","\n","        mat3 lookAt(vec3 origin, vec3 target, vec3 up) {\n","          vec3 z = target - origin;\n","          <span class=\"code-keyword\">if</span> (z.x * z.x + z.y * z.y + z.z * z.z == <span class=\"code-number\">0.0</span>) { z.z = <span class=\"code-number\">1.0</span>; }\n","          z = normalize(z);\n","          vec3 x = cross(up, z);\n","          <span class=\"code-keyword\">if</span> (x.x * x.x + x.y * x.y + x.z * x.z == <span class=\"code-number\">0.0</span>) {\n","            <span class=\"code-keyword\">if</span> (abs(up.z) == <span class=\"code-number\">1.0</span>) { z.x += <span class=\"code-number\">0.0001</span>; }\n","            <span class=\"code-keyword\">else</span> { z.z += <span class=\"code-number\">0.0001</span>; }\n","            x = cross(up, z);\n","          }\n","          x = normalize(x);\n","          vec3 y = cross(z, x);\n","          <span class=\"code-keyword\">return</span> mat3(x, y, z);\n","        }\n","\n","        mat4 iMatrix(vec3 pos, mat3 rmat, vec3 scale) {\n","          <span class=\"code-keyword\">return</span> mat4(\n","            rmat[<span class=\"code-number\">0</span>][<span class=\"code-number\">0</span>] * scale.x, rmat[<span class=\"code-number\">0</span>][<span class=\"code-number\">1</span>] * scale.x, rmat[<span class=\"code-number\">0</span>][<span class=\"code-number\">2</span>] * scale.x, <span class=\"code-number\">0.0</span>,\n","            rmat[<span class=\"code-number\">1</span>][<span class=\"code-number\">0</span>] * scale.y, rmat[<span class=\"code-number\">1</span>][<span class=\"code-number\">1</span>] * scale.y, rmat[<span class=\"code-number\">1</span>][<span class=\"code-number\">2</span>] * scale.y, <span class=\"code-number\">0.0</span>,\n","            rmat[<span class=\"code-number\">2</span>][<span class=\"code-number\">0</span>] * scale.z, rmat[<span class=\"code-number\">2</span>][<span class=\"code-number\">1</span>] * scale.z, rmat[<span class=\"code-number\">2</span>][<span class=\"code-number\">2</span>] * scale.z, <span class=\"code-number\">0.0</span>,\n","            pos.x, pos.y, pos.z, <span class=\"code-number\">1.0</span>\n","          );\n","        }\n","      <span class=\"code-string\">`+f.vertexShader,f.vertexShader=f.vertexShader.replace(\"#include &lt;defaultnormal_vertex&gt;\",\"\"),f.vertexShader=f.vertexShader.replace(\"#include &lt;normal_vertex&gt;\",\"\"),f.vertexShader=f.vertexShader.replace(\"#include &lt;begin_vertex&gt;\",`</span>\n","        vPos = texture2D(uTexturePosition, gpuUv);\n","        vec4 oldPos = texture2D(uOldTexturePosition, gpuUv);\n","        vVel = texture2D(uTextureVelocity, gpuUv);\n","        vMapIndex = float(mapIndex);\n","\n","        mat3 rmat = lookAt(oldPos.xyz, vPos.xyz, vec3(<span class=\"code-number\">0</span>, <span class=\"code-number\">1</span>, <span class=\"code-number\">0</span>));\n","        mat4 im = iMatrix(vPos.xyz, rmat, (<span class=\"code-number\">0.5</span> + vPos.w) * uFishScale);\n","\n","        vec3 transformed = vec3(position);\n","\n","        #ifdef COMPUTE_NORMALS\n","          vec3 transformedNormal = objectNormal; \n","        #endif\n","\n","        float dz = transformed.z + <span class=\"code-number\">1.0</span>;\n","        float sdz = smoothstep(<span class=\"code-number\">2.0</span>, <span class=\"code-number\">0.0</span>, dz);\n","        transformed.x += sin(vVel.w + dz * PI * <span class=\"code-number\">1.5</span>) * sdz * uFishDisplacementScale;\n","\n","        #ifdef COMPUTE_NORMALS\n","          float dz1 = dz - <span class=\"code-number\">0.2</span>;\n","          float sdz1 = smoothstep(<span class=\"code-number\">2.0</span>, <span class=\"code-number\">0.0</span>, dz1);\n","          float dx1 = sin(vVel.w + dz1 * PI * <span class=\"code-number\">1.5</span>) * sdz1 * uFishDisplacementScale - transformed.x;\n","          vec3 v1 = vec3(dx1, <span class=\"code-number\">0.0</span>, -FISH_DZ);\n","          vec3 v2 = vec3(<span class=\"code-number\">0.0</span>, <span class=\"code-number\">1.0</span>, <span class=\"code-number\">0.0</span>);\n","          transformedNormal = normalize(cross(v1, v2));\n","        #endif\n","\n","        #ifdef COMPUTE_NORMALS\n","          #ifdef USE_INSTANCING\n","            mat3 m = mat3( im );\n","            transformedNormal /= vec3( dot( m[ <span class=\"code-number\">0</span> ], m[ <span class=\"code-number\">0</span> ] ), dot( m[ <span class=\"code-number\">1</span> ], m[ <span class=\"code-number\">1</span> ] ), dot( m[ <span class=\"code-number\">2</span> ], m[ <span class=\"code-number\">2</span> ] ) );\n","            transformedNormal = m * transformedNormal;\n","          #endif\n","          transformedNormal = normalMatrix * transformedNormal;\n","          #ifdef FLIP_SIDED\n","            transformedNormal = - transformedNormal;\n","          #endif\n","          #ifdef USE_TANGENT\n","            vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, <span class=\"code-number\">0.0</span> ) ).xyz;\n","            #ifdef FLIP_SIDED\n","              transformedTangent = - transformedTangent;\n","            #endif\n","          #endif\n","          #ifndef FLAT_SHADED\n","            vNormal = normalize( transformedNormal );\n","            #ifdef USE_TANGENT\n","              vTangent = normalize( transformedTangent );\n","              vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n","            #endif\n","          #endif\n","        #endif\n","      <span class=\"code-string\">`),f.vertexShader=f.vertexShader.replace(\"#include &lt;project_vertex&gt;\",`</span>\n","        vec4 mvPosition = vec4( transformed, <span class=\"code-number\">1.0</span> );\n","        #ifdef USE_INSTANCING\n","          mvPosition = im * mvPosition;\n","        #endif\n","        mvPosition = modelViewMatrix * mvPosition;\n","        gl_Position = projectionMatrix * mvPosition;\n","      <span class=\"code-string\">`),f.fragmentShader=`</span>\n","        varying float vMapIndex;\n","      <span class=\"code-string\">`+f.fragmentShader,f.fragmentShader=f.fragmentShader.replace(\"#include &lt;map_fragment&gt;\",`</span>\n","        #ifdef USE_MAP\n","          vec2 uv = vUv;\n","          uv.x = (vMapIndex + vUv.x) / TEXTURE_COUNT;\n","          vec4 sampledDiffuseColor = texture2D(map, uv);\n","          diffuseColor *= sampledDiffuseColor;\n","        #endif\n","      <span class=\"code-string\">`)},e.material){case\"standard\":V=new Ee(P);break;case\"phong\":V=new it(P);break;default:V=new Me(P)}A=new De(D,V,t),k(e.colors),m.add(A)}function k(m){if(Array.isArray(m)&amp;&amp;m.length&gt;1){const C=ce(m);for(let b=0;b&lt;t;b++)A.setColorAt(b,C.getColorAt(b/t));A.instanceColor.needsUpdate=!0}}function W(m,C){const b=m.image.data,z=C.image.data;for(let T=0,P=b.length;T&lt;P;T+=4)b[T+0]=ae(100),b[T+1]=ae(100),b[T+2]=ae(100),b[T+3]=lo(.1,1),z[T+0]=ae(.5),z[T+1]=ae(.5),z[T+2]=ae(.5),z[T+3]=0}}export{Jt as butterfliesBackground,uo as fishesBackground,jt as neonCursor,Qt as noisyLinesBackground,Ht as particlesCursor,no as swarmBackground};\n</span>","<span class=\"code-string\">//# sourceMappingURL=threejs-toys.module.cdn.min.js.map\n</span>","<span class=\"code-string\"></span>"]}}}</script></head><body><div id="root"><style data-emotion-css="gtfibm">html{box-sizing:border-box;}*,*:before,*:after{box-sizing:inherit;}html,body,#root{height:100%;margin:0;}body{font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;font-size:16px;line-height:1.5;overflow-wrap:break-word;background:white;color:black;}code{font-family:Menlo, Monaco, Lucida Console, Liberation Mono, DejaVu Sans Mono, Bitstream Vera Sans Mono, Courier New, monospace;}th,td{padding:0;}select{font-size:inherit;}#root{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}</style><style data-emotion-css="1r6h1r6">.code-listing{background:#fbfdff;color:#383a42;}.code-comment,.code-quote{color:#a0a1a7;font-style:italic;}.code-doctag,.code-keyword,.code-link,.code-formula{color:#a626a4;}.code-section,.code-name,.code-selector-tag,.code-deletion,.code-subst{color:#e45649;}.code-literal{color:#0184bb;}.code-string,.code-regexp,.code-addition,.code-attribute,.code-meta-string{color:#50a14f;}.code-built_in,.code-class .code-title{color:#c18401;}.code-attr,.code-variable,.code-template-variable,.code-type,.code-selector-class,.code-selector-attr,.code-selector-pseudo,.code-number{color:#986801;}.code-symbol,.code-bullet,.code-meta,.code-selector-id,.code-title{color:#4078f2;}.code-emphasis{font-style:italic;}.code-strong{font-weight:bold;}</style><style data-emotion-css="1c3h18e">.css-1c3h18e{-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;}</style><div class="css-1c3h18e"><style data-emotion-css="1cfuj1t">.css-1cfuj1t{max-width:940px;padding:0 20px;margin:0 auto;}</style><div class="css-1cfuj1t"><style data-emotion-css="i51og3">.css-i51og3{margin-top:2rem;}</style><header class="css-i51og3"><style data-emotion-css="1y7u1xh">.css-1y7u1xh{text-align:center;font-size:3rem;-webkit-letter-spacing:0.05em;-moz-letter-spacing:0.05em;-ms-letter-spacing:0.05em;letter-spacing:0.05em;}</style><h1 class="css-1y7u1xh"><style data-emotion-css="1ydg16i">.css-1ydg16i{color:#000;-webkit-text-decoration:none;text-decoration:none;}</style><a href="/" class="css-1ydg16i">UNPKG</a></h1></header></div><div class="css-1cfuj1t"><style data-emotion-css="93o42g">.css-93o42g{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}@media (max-width:700px){.css-93o42g{-webkit-flex-direction:column-reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}</style><header class="css-93o42g"><style data-emotion-css="1dlpvgi">.css-1dlpvgi{font-size:1.5rem;font-weight:normal;-webkit-flex:1;-ms-flex:1;flex:1;word-break:break-all;}</style><h1 class="css-1dlpvgi"><nav><style data-emotion-css="xt128v">.css-xt128v{color:#0076ff;-webkit-text-decoration:none;text-decoration:none;}.css-xt128v:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a href="/browse/threejs-toys@0.0.8/" class="css-xt128v">threejs-toys</a><style data-emotion-css="lllnmq">.css-lllnmq{padding-left:5px;padding-right:5px;}</style><span class="css-lllnmq">/</span><a href="/browse/threejs-toys@0.0.8/build/" class="css-xt128v">build</a><span class="css-lllnmq">/</span><strong>threejs-toys.module.cdn.min.js</strong></nav></h1><style data-emotion-css="1nr3dab">.css-1nr3dab{margin-left:20px;}@media (max-width:700px){.css-1nr3dab{margin-left:0;margin-bottom:0;}}</style><p class="css-1nr3dab"><label>Version:<!-- --> <style data-emotion-css="un3bt6">.css-un3bt6{-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;padding:4px 24px 4px 8px;font-weight:600;font-size:0.9em;color:#24292e;border:1px solid rgba(27,31,35,.2);border-radius:3px;background-color:#eff3f6;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAKCAYAAAC9vt6cAAAAAXNSR0IArs4c6QAAARFJREFUKBVjZAACNS39RhBNKrh17WI9o4quoT3Dn78HSNUMUs/CzOTI/O7Vi4dCYpJ3/jP+92BkYGAlyiBGhm8MjIxJt65e3MQM0vDu9YvLYmISILYZELOBxHABRkaGr0yMzF23r12YDFIDNgDEePv65SEhEXENBkYGFSAXuyGMjF8Z/jOsvX3tYiFIDwgwQSgIaaijnvj/P8M5IO8HsjiY/f//D4b//88A1SQhywG9jQr09PS4v/1mPAeUUPzP8B8cJowMjL+Bqu6xMQmaXL164AuyDgwDQJLa2qYSP//9vARkCoMVMzK8YeVkNbh+9uxzMB+JwGoASF5Vx0jz/98/18BqmZi171w9D2EjaaYKEwAEK00XQLdJuwAAAABJRU5ErkJggg==);background-position:right 8px center;background-repeat:no-repeat;background-size:auto 25%;}.css-un3bt6:hover{background-color:#e6ebf1;border-color:rgba(27,31,35,.35);}.css-un3bt6:active{background-color:#e9ecef;border-color:rgba(27,31,35,.35);box-shadow:inset 0 0.15em 0.3em rgba(27,31,35,.15);}</style><select name="version" class="css-un3bt6"><option value="0.0.1">0.0.1</option><option value="0.0.2">0.0.2</option><option value="0.0.3">0.0.3</option><option value="0.0.4">0.0.4</option><option value="0.0.5">0.0.5</option><option value="0.0.6">0.0.6</option><option value="0.0.7">0.0.7</option><option selected="" value="0.0.8">0.0.8</option></select></label></p></header></div><style data-emotion-css="107j3ms">.css-107j3ms{max-width:940px;padding:0 20px;margin:0 auto;}@media (max-width:700px){.css-107j3ms{padding:0;margin:0;}}</style><div class="css-107j3ms"><style data-emotion-css="q3frg4">.css-q3frg4{border:1px solid #dfe2e5;border-radius:3px;}@media (max-width:700px){.css-q3frg4{border-right-width:0;border-left-width:0;}}</style><div class="css-q3frg4"><style data-emotion-css="10o5omr">.css-10o5omr{padding:10px;background:#f6f8fa;color:#424242;border:1px solid #d1d5da;border-top-left-radius:3px;border-top-right-radius:3px;margin:-1px -1px 0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}@media (max-width:700px){.css-10o5omr{padding-right:20px;padding-left:20px;}}</style><div class="css-10o5omr"><span>76.3 kB</span><span>JavaScript</span><span><style data-emotion-css="18x593j">.css-18x593j{display:inline-block;margin-left:8px;padding:2px 8px;-webkit-text-decoration:none;text-decoration:none;font-weight:600;font-size:0.9rem;color:#24292e;background-color:#eff3f6;border:1px solid rgba(27,31,35,.2);border-radius:3px;}.css-18x593j:hover{background-color:#e6ebf1;border-color:rgba(27,31,35,.35);}.css-18x593j:active{background-color:#e9ecef;border-color:rgba(27,31,35,.35);box-shadow:inset 0 0.15em 0.3em rgba(27,31,35,.15);}</style><a href="/threejs-toys@0.0.8/build/threejs-toys.module.cdn.min.js" class="css-18x593j">View Raw</a></span></div><style data-emotion-css="1i31ihw">.css-1i31ihw{overflow-x:auto;overflow-y:hidden;padding-top:5px;padding-bottom:5px;}</style><div class="code-listing css-1i31ihw"><style data-emotion-css="173nir8">.css-173nir8{border:none;border-collapse:collapse;border-spacing:0;}</style><table class="css-173nir8"><tbody><tr><style data-emotion-css="a4x74f">.css-a4x74f{padding-left:10px;padding-right:10px;color:rgba(27,31,35,.3);text-align:right;vertical-align:top;width:1%;min-width:50px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}</style><td id="L1" class="css-a4x74f"><span>1</span></td><style data-emotion-css="1dcdqdg">.css-1dcdqdg{padding-left:10px;padding-right:10px;color:#24292e;white-space:pre;}</style><td id="LC1" class="css-1dcdqdg"><code>import{EventDispatcher as Tt,Vector3 as j,MOUSE as J,TOUCH as ee,Quaternion as Xe,Spherical as Ze,Vector2 as _,WebGLRenderer as bt,PerspectiveCamera as Qe,Scene as $e,PointLight as zt,DirectionalLight as Pt,AmbientLight as Ct,SplineCurve as Mt,Color as q,OrthographicCamera as ze,PlaneGeometry as ne,ShaderMaterial as Y,Mesh as fe,Camera as Et,WebGLRenderTarget as se,RGBAFormat as Ke,DataTexture as Dt,FloatType as Je,NearestFilter as ve,ClampToEdgeWrapping as et,HalfFloatType as he,BufferGeometry as pe,BufferAttribute as Pe,AdditiveBlending as tt,Points as _t,MathUtils as xe,CanvasTexture as Rt,InstancedBufferAttribute as le,DoubleSide as Ce,TextureLoader as ot,MeshBasicMaterial as Me,MeshPhongMaterial as it,MeshStandardMaterial as Ee,InstancedMesh as De,Float32BufferAttribute as te,UniformsUtils as _e,Clock as At,SphereGeometry as Nt,OctahedronGeometry as It,ConeGeometry as kt,CapsuleGeometry as Ot,BoxGeometry as Ut,FogExp2 as Lt}from"https://unpkg.com/three@0.140.0/build/three.module.js";const at={type:"change"},Re={type:"start"},rt={type:"end"};class Ft extends Tt{constructor(e,o){super();o===void 0&amp;&amp;console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),o===document&amp;&amp;console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=o,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new j,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:J.ROTATE,MIDDLE:J.DOLLY,RIGHT:J.PAN},this.touches={ONE:ee.ROTATE,TWO:ee.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return n.phi},this.getAzimuthalAngle=function(){return n.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(a){a.addEventListener("keydown",Be),this._domElementKeyEvents=a},this.saveState=function(){t.target0.copy(t.target),t.position0.copy(t.object.position),t.zoom0=t.object.zoom},this.reset=function(){t.target.copy(t.target0),t.object.position.copy(t.position0),t.object.zoom=t.zoom0,t.object.updateProjectionMatrix(),t.dispatchEvent(at),t.update(),r=i.NONE},this.update=function(){const a=new j,y=new Xe().setFromUnitVectors(e.up,new j(0,1,0)),B=y.clone().invert(),H=new j,G=new Xe,K=2*Math.PI;return function(){const Ye=t.object.position;a.copy(Ye).sub(t.target),a.applyQuaternion(y),n.setFromVector3(a),t.autoRotate&amp;&amp;r===i.NONE&amp;&amp;V(F()),t.enableDamping?(n.theta+=c.theta*t.dampingFactor,n.phi+=c.phi*t.dampingFactor):(n.theta+=c.theta,n.phi+=c.phi);let X=t.minAzimuthAngle,Z=t.maxAzimuthAngle;return isFinite(X)&amp;&amp;isFinite(Z)&amp;&amp;(X&lt;-Math.PI?X+=K:X&gt;Math.PI&amp;&amp;(X-=K),Z&lt;-Math.PI?Z+=K:Z&gt;Math.PI&amp;&amp;(Z-=K),X&lt;=Z?n.theta=Math.max(X,Math.min(Z,n.theta)):n.theta=n.theta&gt;(X+Z)/2?Math.max(X,n.theta):Math.min(Z,n.theta)),n.phi=Math.max(t.minPolarAngle,Math.min(t.maxPolarAngle,n.phi)),n.makeSafe(),n.radius*=p,n.radius=Math.max(t.minDistance,Math.min(t.maxDistance,n.radius)),t.enableDamping===!0?t.target.addScaledVector(u,t.dampingFactor):t.target.add(u),a.setFromSpherical(n),a.applyQuaternion(B),Ye.copy(t.target).add(a),t.object.lookAt(t.target),t.enableDamping===!0?(c.theta*=1-t.dampingFactor,c.phi*=1-t.dampingFactor,u.multiplyScalar(1-t.dampingFactor)):(c.set(0,0,0),u.set(0,0,0)),p=1,v||H.distanceToSquared(t.object.position)&gt;d||8*(1-G.dot(t.object.quaternion))&gt;d?(t.dispatchEvent(at),H.copy(t.object.position),G.copy(t.object.quaternion),v=!1,!0):!1}}(),this.dispose=function(){t.domElement.removeEventListener("contextmenu",He),t.domElement.removeEventListener("pointerdown",Ve),t.domElement.removeEventListener("pointercancel",We),t.domElement.removeEventListener("wheel",je),t.domElement.removeEventListener("pointermove",Se),t.domElement.removeEventListener("pointerup",Te),t._domElementKeyEvents!==null&amp;&amp;t._domElementKeyEvents.removeEventListener("keydown",Be)};const t=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let r=i.NONE;const d=1e-6,n=new Ze,c=new Ze;let p=1;const u=new j;let v=!1;const w=new _,M=new _,l=new _,s=new _,S=new _,E=new _,g=new _,R=new _,N=new _,x=[],I={};function F(){return 2*Math.PI/60/60*t.autoRotateSpeed}function D(){return Math.pow(.95,t.zoomSpeed)}function V(a){c.theta-=a}function A(a){c.phi-=a}const O=function(){const a=new j;return function(B,H){a.setFromMatrixColumn(H,0),a.multiplyScalar(-B),u.add(a)}}(),L=function(){const a=new j;return function(B,H){t.screenSpacePanning===!0?a.setFromMatrixColumn(H,1):(a.setFromMatrixColumn(H,0),a.crossVectors(t.object.up,a)),a.multiplyScalar(B),u.add(a)}}(),k=function(){const a=new j;return function(B,H){const G=t.domElement;if(t.object.isPerspectiveCamera){const K=t.object.position;a.copy(K).sub(t.target);let me=a.length();me*=Math.tan(t.object.fov/2*Math.PI/180),O(2*B*me/G.clientHeight,t.object.matrix),L(2*H*me/G.clientHeight,t.object.matrix)}else t.object.isOrthographicCamera?(O(B*(t.object.right-t.object.left)/t.object.zoom/G.clientWidth,t.object.matrix),L(H*(t.object.top-t.object.bottom)/t.object.zoom/G.clientHeight,t.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),t.enablePan=!1)}}();function W(a){t.object.isPerspectiveCamera?p/=a:t.object.isOrthographicCamera?(t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom*a)),t.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function m(a){t.object.isPerspectiveCamera?p*=a:t.object.isOrthographicCamera?(t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/a)),t.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function C(a){w.set(a.clientX,a.clientY)}function b(a){g.set(a.clientX,a.clientY)}function z(a){s.set(a.clientX,a.clientY)}function T(a){M.set(a.clientX,a.clientY),l.subVectors(M,w).multiplyScalar(t.rotateSpeed);const y=t.domElement;V(2*Math.PI*l.x/y.clientHeight),A(2*Math.PI*l.y/y.clientHeight),w.copy(M),t.update()}function P(a){R.set(a.clientX,a.clientY),N.subVectors(R,g),N.y&gt;0?W(D()):N.y&lt;0&amp;&amp;m(D()),g.copy(R),t.update()}function f(a){S.set(a.clientX,a.clientY),E.subVectors(S,s).multiplyScalar(t.panSpeed),k(E.x,E.y),s.copy(S),t.update()}function U(a){a.deltaY&lt;0?m(D()):a.deltaY&gt;0&amp;&amp;W(D()),t.update()}function Q(a){let y=!1;switch(a.code){case t.keys.UP:k(0,t.keyPanSpeed),y=!0;break;case t.keys.BOTTOM:k(0,-t.keyPanSpeed),y=!0;break;case t.keys.LEFT:k(t.keyPanSpeed,0),y=!0;break;case t.keys.RIGHT:k(-t.keyPanSpeed,0),y=!0;break}y&amp;&amp;(a.preventDefault(),t.update())}function de(){if(x.length===1)w.set(x[0].pageX,x[0].pageY);else{const a=.5*(x[0].pageX+x[1].pageX),y=.5*(x[0].pageY+x[1].pageY);w.set(a,y)}}function ke(){if(x.length===1)s.set(x[0].pageX,x[0].pageY);else{const a=.5*(x[0].pageX+x[1].pageX),y=.5*(x[0].pageY+x[1].pageY);s.set(a,y)}}function Oe(){const a=x[0].pageX-x[1].pageX,y=x[0].pageY-x[1].pageY,B=Math.sqrt(a*a+y*y);g.set(0,B)}function ft(){t.enableZoom&amp;&amp;Oe(),t.enablePan&amp;&amp;ke()}function vt(){t.enableZoom&amp;&amp;Oe(),t.enableRotate&amp;&amp;de()}function Ue(a){if(x.length==1)M.set(a.pageX,a.pageY);else{const B=be(a),H=.5*(a.pageX+B.x),G=.5*(a.pageY+B.y);M.set(H,G)}l.subVectors(M,w).multiplyScalar(t.rotateSpeed);const y=t.domElement;V(2*Math.PI*l.x/y.clientHeight),A(2*Math.PI*l.y/y.clientHeight),w.copy(M)}function Le(a){if(x.length===1)S.set(a.pageX,a.pageY);else{const y=be(a),B=.5*(a.pageX+y.x),H=.5*(a.pageY+y.y);S.set(B,H)}E.subVectors(S,s).multiplyScalar(t.panSpeed),k(E.x,E.y),s.copy(S)}function Fe(a){const y=be(a),B=a.pageX-y.x,H=a.pageY-y.y,G=Math.sqrt(B*B+H*H);R.set(0,G),N.set(0,Math.pow(R.y/g.y,t.zoomSpeed)),W(N.y),g.copy(R)}function ht(a){t.enableZoom&amp;&amp;Fe(a),t.enablePan&amp;&amp;Le(a)}function pt(a){t.enableZoom&amp;&amp;Fe(a),t.enableRotate&amp;&amp;Ue(a)}function Ve(a){t.enabled!==!1&amp;&amp;(x.length===0&amp;&amp;(t.domElement.setPointerCapture(a.pointerId),t.domElement.addEventListener("pointermove",Se),t.domElement.addEventListener("pointerup",Te)),St(a),a.pointerType==="touch"?yt(a):xt(a))}function Se(a){t.enabled!==!1&amp;&amp;(a.pointerType==="touch"?wt(a):gt(a))}function Te(a){Ge(a),x.length===0&amp;&amp;(t.domElement.releasePointerCapture(a.pointerId),t.domElement.removeEventListener("pointermove",Se),t.domElement.removeEventListener("pointerup",Te)),t.dispatchEvent(rt),r=i.NONE}function We(a){Ge(a)}function xt(a){let y;switch(a.button){case 0:y=t.mouseButtons.LEFT;break;case 1:y=t.mouseButtons.MIDDLE;break;case 2:y=t.mouseButtons.RIGHT;break;default:y=-1}switch(y){case J.DOLLY:if(t.enableZoom===!1)return;b(a),r=i.DOLLY;break;case J.ROTATE:if(a.ctrlKey||a.metaKey||a.shiftKey){if(t.enablePan===!1)return;z(a),r=i.PAN}else{if(t.enableRotate===!1)return;C(a),r=i.ROTATE}break;case J.PAN:if(a.ctrlKey||a.metaKey||a.shiftKey){if(t.enableRotate===!1)return;C(a),r=i.ROTATE}else{if(t.enablePan===!1)return;z(a),r=i.PAN}break;default:r=i.NONE}r!==i.NONE&amp;&amp;t.dispatchEvent(Re)}function gt(a){if(t.enabled!==!1)switch(r){case i.ROTATE:if(t.enableRotate===!1)return;T(a);break;case i.DOLLY:if(t.enableZoom===!1)return;P(a);break;case i.PAN:if(t.enablePan===!1)return;f(a);break}}function je(a){t.enabled===!1||t.enableZoom===!1||r!==i.NONE||(a.preventDefault(),t.dispatchEvent(Re),U(a),t.dispatchEvent(rt))}function Be(a){t.enabled===!1||t.enablePan===!1||Q(a)}function yt(a){switch(qe(a),x.length){case 1:switch(t.touches.ONE){case ee.ROTATE:if(t.enableRotate===!1)return;de(),r=i.TOUCH_ROTATE;break;case ee.PAN:if(t.enablePan===!1)return;ke(),r=i.TOUCH_PAN;break;default:r=i.NONE}break;case 2:switch(t.touches.TWO){case ee.DOLLY_PAN:if(t.enableZoom===!1&amp;&amp;t.enablePan===!1)return;ft(),r=i.TOUCH_DOLLY_PAN;break;case ee.DOLLY_ROTATE:if(t.enableZoom===!1&amp;&amp;t.enableRotate===!1)return;vt(),r=i.TOUCH_DOLLY_ROTATE;break;default:r=i.NONE}break;default:r=i.NONE}r!==i.NONE&amp;&amp;t.dispatchEvent(Re)}function wt(a){switch(qe(a),r){case i.TOUCH_ROTATE:if(t.enableRotate===!1)return;Ue(a),t.update();break;case i.TOUCH_PAN:if(t.enablePan===!1)return;Le(a),t.update();break;case i.TOUCH_DOLLY_PAN:if(t.enableZoom===!1&amp;&amp;t.enablePan===!1)return;ht(a),t.update();break;case i.TOUCH_DOLLY_ROTATE:if(t.enableZoom===!1&amp;&amp;t.enableRotate===!1)return;pt(a),t.update();break;default:r=i.NONE}}function He(a){t.enabled!==!1&amp;&amp;a.preventDefault()}function St(a){x.push(a)}function Ge(a){delete I[a.pointerId];for(let y=0;y&lt;x.length;y++)if(x[y].pointerId==a.pointerId){x.splice(y,1);return}}function qe(a){let y=I[a.pointerId];y===void 0&amp;&amp;(y=new _,I[a.pointerId]=y),y.set(a.pageX,a.pageY)}function be(a){const y=a.pointerId===x[0].pointerId?x[1]:x[0];return I[y.pointerId]}t.domElement.addEventListener("contextmenu",He),t.domElement.addEventListener("pointerdown",Ve),t.domElement.addEventListener("pointercancel",We),t.domElement.addEventListener("wheel",je,{passive:!1}),this.update()}}function Vt(h){const{domElement:e,onClick:o=()=&gt;{},onEnter:t=()=&gt;{},onMove:i=()=&gt;{},onLeave:r=()=&gt;{},onDragStart:d=()=&gt;{},onDragMove:n=()=&gt;{},onDragStop:c=()=&gt;{}}=h,p=new _,u=new _,v=new _,w=new _,M=new _,l={position:p,nPosition:u,hover:!1,down:!1,removeListeners:F};return I(),l;function s(D){v.distanceTo(p)&lt;20&amp;&amp;(x(D),o({position:p,nPosition:u}))}function S(D){l.hover=D.pointerType==="mouse",x(D),t({position:p,nPosition:u})}function E(D){l.down=!0,x(D),v.copy(p),w.copy(p),d({position:p,nPosition:u})}function g(D){x(D),M.copy(p).sub(w),l.down?n({position:p,nPosition:u,startPosition:v,lastPosition:w,delta:M}):l.hover||(l.hover=!0),i({position:p,nPosition:u,startPosition:v,lastPosition:w,delta:M}),w.copy(p)}function R(D){l.down=!1,c()}function N(D){l.down&amp;&amp;(l.down=!1,c()),l.hover=!1,r()}function x(D){const V=e.getBoundingClientRect();p.x=D.clientX-V.left,p.y=D.clientY-V.top,u.x=p.x/V.width*2-1,u.y=-(p.y/V.height)*2+1}function I(){e.addEventListener("click",s),e.addEventListener("pointerenter",S),e.addEventListener("pointerdown",E),e.addEventListener("pointermove",g),e.addEventListener("pointerup",R),e.addEventListener("pointerleave",N)}function F(){e.removeEventListener("click",s),e.removeEventListener("pointerenter",S),e.removeEventListener("pointerdown",E),e.removeEventListener("pointermove",g),e.removeEventListener("pointerup",R),e.removeEventListener("pointerleave",N)}}function oe(h){const e={el:null,canvas:null,eventsEl:null,width:null,height:null,resize:!0,alpha:!1,antialias:!1,orbitControls:!1,init(){},initCamera(){},initScene(){},afterResize(){},beforeRender(){},...h},o={renderer:null,camera:null,scene:null,pointer:null,width:0,height:0,wWidth:0,wHeight:0,clock:{startTime:0,time:0,elapsed:0},options:e};let t,i;return r(),o;function r(){var u,v,w,M,l;let s;if(e.el)s=document.createElement("canvas"),e.el.appendChild(s);else if(e.canvas)s=e.canvas;else throw new Error("Missing parameter : el or canvas is required");(u=e.init)==null||u.call(e,o),o.renderer=new bt({canvas:s,alpha:e.alpha,antialias:e.antialias}),(v=e.initRenderer)==null||v.call(e,o),o.camera=new Qe,o.camera.position.z=50,(w=e.initCamera)==null||w.call(e,o),e.orbitControls&amp;&amp;(i=new Ft(o.camera,(M=e.eventsEl)!=null?M:o.renderer.domElement),i.enableDamping=!0,i.dampingFactor=.1,typeof e.orbitControls=="object"&amp;&amp;Object.keys(e.orbitControls).forEach(S=&gt;{i[S]=e.orbitControls[S]})),c(),e.resize&amp;&amp;!e.width&amp;&amp;!e.height&amp;&amp;window.addEventListener("resize",c),o.scene=new $e,(l=e.initScene)==null||l.call(e,o),d(),t=e.render?e.render:()=&gt;{o.renderer.render(o.scene,o.camera)},requestAnimationFrame(S=&gt;{o.clock.startTime=o.clock.time=S,requestAnimationFrame(n)})}function d(){var u,v;const w={};e.onPointerEnter&amp;&amp;(w.onEnter=e.onPointerEnter),e.onPointerMove&amp;&amp;(w.onMove=e.onPointerMove),e.onPointerMove&amp;&amp;(w.onLeave=e.onPointerLeave),Object.keys(w).length&gt;0&amp;&amp;(o.pointer=Vt({domElement:(v=e.eventsEl)!=null?v:(u=e.el)!=null?u:e.canvas,...w}))}function n(u){const{clock:v}=o;v.elapsed=u-v.time,v.time=u,e.beforeRender(o),i&amp;&amp;i.update(),t(o),requestAnimationFrame(n)}function c(){var u;if(e.width&amp;&amp;e.height)o.width=e.width,o.height=e.height;else if(e.resize==="window")o.width=window.innerWidth,o.height=window.innerHeight;else{const v=o.renderer.domElement.parentElement;o.width=v.clientWidth,o.height=v.clientHeight}if(o.renderer.setSize(o.width,o.height),o.camera.aspect=o.width/o.height,o.camera.updateProjectionMatrix(),o.camera instanceof Qe){const v=p();o.wWidth=v[0],o.wHeight=v[1]}else o.wWidth=o.camera.top-o.camera.bottom,o.wHeight=o.camera.right-o.camera.left;(u=e.afterResize)==null||u.call(e,o)}function p(){const u=o.camera.fov*Math.PI/180,v=2*Math.tan(u/2)*Math.abs(o.camera.position.z);return[v*o.camera.aspect,v]}}function Ae(h){const e={};return["el","canvas","eventsEl","width","height","resize","orbitControls"].forEach(o=&gt;{h[o]!==void 0&amp;&amp;(e[o]=h[o])}),e}function Ne(h,e){const o=[];if(Array.isArray(e)&amp;&amp;e.length&gt;0){let t;e.forEach(i=&gt;{switch(i.type){case"ambient":t=new Ct(...i.params);break;case"directional":t=new Pt(...i.params);break;case"point":t=new zt(...i.params);break;default:console.error(`Unknown light type ${i.type}`)}t&amp;&amp;(typeof i.props=="object"&amp;&amp;Object.keys(i.props).forEach(r=&gt;{r==="position"?t.position.set(...i.props[r]):t[r]=i.props[r]}),h.add(t),o.push(t))})}return o}const Wt={shaderPoints:8,curvePoints:80,curveLerp:.75,radius1:3,radius2:5,velocityTreshold:10,sleepRadiusX:150,sleepRadiusY:150,sleepTimeCoefX:.0025,sleepTimeCoefY:.0025};function jt(h){const e={...Wt,...h},o=new Array(e.curvePoints).fill(0).map(()=&gt;new _),t=new Mt(o),i=new j,r=new j,d={value:new _},n={value:new _},c={value:new Array(e.shaderPoints).fill(0).map(()=&gt;new _)},p={value:new q(16711935)};let u,v,w=!1;const M={};return["el","canvas","width","height","resize"].forEach(l=&gt;{h[l]!==void 0&amp;&amp;(M[l]=h[l])}),oe({...M,antialias:!1,initCamera(l){l.camera=new ze},initScene({scene:l}){const s=new ne(2,2);u=new Y({uniforms:{uRatio:d,uSize:n,uPoints:c,uColor:p},defines:{SHADER_POINTS:e.shaderPoints},vertexShader:`
</code></td></tr><tr><td id="L2" class="css-a4x74f"><span>2</span></td><td id="LC2" class="css-1dcdqdg"><code>          varying vec2 vUv;
</code></td></tr><tr><td id="L3" class="css-a4x74f"><span>3</span></td><td id="LC3" class="css-1dcdqdg"><code>          <span class="code-keyword">void</span> main() {
</code></td></tr><tr><td id="L4" class="css-a4x74f"><span>4</span></td><td id="LC4" class="css-1dcdqdg"><code>            vUv = uv;
</code></td></tr><tr><td id="L5" class="css-a4x74f"><span>5</span></td><td id="LC5" class="css-1dcdqdg"><code>            gl_Position = vec4(position, <span class="code-number">1.0</span>);
</code></td></tr><tr><td id="L6" class="css-a4x74f"><span>6</span></td><td id="LC6" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L7" class="css-a4x74f"><span>7</span></td><td id="LC7" class="css-1dcdqdg"><code>        <span class="code-string">`,fragmentShader:`</span>
</code></td></tr><tr><td id="L8" class="css-a4x74f"><span>8</span></td><td id="LC8" class="css-1dcdqdg"><code>          <span class="code-comment">// https://www.shadertoy.com/view/wdy3DD</span>
</code></td></tr><tr><td id="L9" class="css-a4x74f"><span>9</span></td><td id="LC9" class="css-1dcdqdg"><code>          <span class="code-comment">// https://www.shadertoy.com/view/MlKcDD</span>
</code></td></tr><tr><td id="L10" class="css-a4x74f"><span>10</span></td><td id="LC10" class="css-1dcdqdg"><code>          <span class="code-comment">// Signed distance to a quadratic bezier</span>
</code></td></tr><tr><td id="L11" class="css-a4x74f"><span>11</span></td><td id="LC11" class="css-1dcdqdg"><code>          float sdBezier(vec2 pos, vec2 A, vec2 B, vec2 C) {
</code></td></tr><tr><td id="L12" class="css-a4x74f"><span>12</span></td><td id="LC12" class="css-1dcdqdg"><code>            vec2 a = B - A;
</code></td></tr><tr><td id="L13" class="css-a4x74f"><span>13</span></td><td id="LC13" class="css-1dcdqdg"><code>            vec2 b = A - <span class="code-number">2.0</span>*B + C;
</code></td></tr><tr><td id="L14" class="css-a4x74f"><span>14</span></td><td id="LC14" class="css-1dcdqdg"><code>            vec2 c = a * <span class="code-number">2.0</span>;
</code></td></tr><tr><td id="L15" class="css-a4x74f"><span>15</span></td><td id="LC15" class="css-1dcdqdg"><code>            vec2 d = A - pos;
</code></td></tr><tr><td id="L16" class="css-a4x74f"><span>16</span></td><td id="LC16" class="css-1dcdqdg"><code>            float kk = <span class="code-number">1.0</span> / dot(b,b);
</code></td></tr><tr><td id="L17" class="css-a4x74f"><span>17</span></td><td id="LC17" class="css-1dcdqdg"><code>            float kx = kk * dot(a,b);
</code></td></tr><tr><td id="L18" class="css-a4x74f"><span>18</span></td><td id="LC18" class="css-1dcdqdg"><code>            float ky = kk * (<span class="code-number">2.0</span>*dot(a,a)+dot(d,b)) / <span class="code-number">3.0</span>;
</code></td></tr><tr><td id="L19" class="css-a4x74f"><span>19</span></td><td id="LC19" class="css-1dcdqdg"><code>            float kz = kk * dot(d,a);
</code></td></tr><tr><td id="L20" class="css-a4x74f"><span>20</span></td><td id="LC20" class="css-1dcdqdg"><code>            float res = <span class="code-number">0.0</span>;
</code></td></tr><tr><td id="L21" class="css-a4x74f"><span>21</span></td><td id="LC21" class="css-1dcdqdg"><code>            float p = ky - kx*kx;
</code></td></tr><tr><td id="L22" class="css-a4x74f"><span>22</span></td><td id="LC22" class="css-1dcdqdg"><code>            float p3 = p*p*p;
</code></td></tr><tr><td id="L23" class="css-a4x74f"><span>23</span></td><td id="LC23" class="css-1dcdqdg"><code>            float q = kx*(<span class="code-number">2.0</span>*kx*kx - <span class="code-number">3.0</span>*ky) + kz;
</code></td></tr><tr><td id="L24" class="css-a4x74f"><span>24</span></td><td id="LC24" class="css-1dcdqdg"><code>            float h = q*q + <span class="code-number">4.0</span>*p3;
</code></td></tr><tr><td id="L25" class="css-a4x74f"><span>25</span></td><td id="LC25" class="css-1dcdqdg"><code>            <span class="code-keyword">if</span>(h &gt;= <span class="code-number">0.0</span>){
</code></td></tr><tr><td id="L26" class="css-a4x74f"><span>26</span></td><td id="LC26" class="css-1dcdqdg"><code>              h = sqrt(h);
</code></td></tr><tr><td id="L27" class="css-a4x74f"><span>27</span></td><td id="LC27" class="css-1dcdqdg"><code>              vec2 x = (vec2(h, -h) - q) / <span class="code-number">2.0</span>;
</code></td></tr><tr><td id="L28" class="css-a4x74f"><span>28</span></td><td id="LC28" class="css-1dcdqdg"><code>              vec2 uv = sign(x)*pow(abs(x), vec2(<span class="code-number">1.0</span>/<span class="code-number">3.0</span>));
</code></td></tr><tr><td id="L29" class="css-a4x74f"><span>29</span></td><td id="LC29" class="css-1dcdqdg"><code>              float t = uv.x + uv.y - kx;
</code></td></tr><tr><td id="L30" class="css-a4x74f"><span>30</span></td><td id="LC30" class="css-1dcdqdg"><code>              t = clamp( t, <span class="code-number">0.0</span>, <span class="code-number">1.0</span> );
</code></td></tr><tr><td id="L31" class="css-a4x74f"><span>31</span></td><td id="LC31" class="css-1dcdqdg"><code>              <span class="code-comment">// 1 root</span>
</code></td></tr><tr><td id="L32" class="css-a4x74f"><span>32</span></td><td id="LC32" class="css-1dcdqdg"><code>              vec2 qos = d + (c + b*t)*t;
</code></td></tr><tr><td id="L33" class="css-a4x74f"><span>33</span></td><td id="LC33" class="css-1dcdqdg"><code>              res = length(qos);
</code></td></tr><tr><td id="L34" class="css-a4x74f"><span>34</span></td><td id="LC34" class="css-1dcdqdg"><code>            } <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L35" class="css-a4x74f"><span>35</span></td><td id="LC35" class="css-1dcdqdg"><code>              float z = sqrt(-p);
</code></td></tr><tr><td id="L36" class="css-a4x74f"><span>36</span></td><td id="LC36" class="css-1dcdqdg"><code>              float v = acos( q/(p*z*<span class="code-number">2.0</span>) ) / <span class="code-number">3.0</span>;
</code></td></tr><tr><td id="L37" class="css-a4x74f"><span>37</span></td><td id="LC37" class="css-1dcdqdg"><code>              float m = cos(v);
</code></td></tr><tr><td id="L38" class="css-a4x74f"><span>38</span></td><td id="LC38" class="css-1dcdqdg"><code>              float n = sin(v)*<span class="code-number">1.732050808</span>;
</code></td></tr><tr><td id="L39" class="css-a4x74f"><span>39</span></td><td id="LC39" class="css-1dcdqdg"><code>              vec3 t = vec3(m + m, -n - m, n - m) * z - kx;
</code></td></tr><tr><td id="L40" class="css-a4x74f"><span>40</span></td><td id="LC40" class="css-1dcdqdg"><code>              t = clamp( t, <span class="code-number">0.0</span>, <span class="code-number">1.0</span> );
</code></td></tr><tr><td id="L41" class="css-a4x74f"><span>41</span></td><td id="LC41" class="css-1dcdqdg"><code>              <span class="code-comment">// 3 roots</span>
</code></td></tr><tr><td id="L42" class="css-a4x74f"><span>42</span></td><td id="LC42" class="css-1dcdqdg"><code>              vec2 qos = d + (c + b*t.x)*t.x;
</code></td></tr><tr><td id="L43" class="css-a4x74f"><span>43</span></td><td id="LC43" class="css-1dcdqdg"><code>              float dis = dot(qos,qos);
</code></td></tr><tr><td id="L44" class="css-a4x74f"><span>44</span></td><td id="LC44" class="css-1dcdqdg"><code>              res = dis;
</code></td></tr><tr><td id="L45" class="css-a4x74f"><span>45</span></td><td id="LC45" class="css-1dcdqdg"><code>              qos = d + (c + b*t.y)*t.y;
</code></td></tr><tr><td id="L46" class="css-a4x74f"><span>46</span></td><td id="LC46" class="css-1dcdqdg"><code>              dis = dot(qos,qos);
</code></td></tr><tr><td id="L47" class="css-a4x74f"><span>47</span></td><td id="LC47" class="css-1dcdqdg"><code>              res = min(res,dis);
</code></td></tr><tr><td id="L48" class="css-a4x74f"><span>48</span></td><td id="LC48" class="css-1dcdqdg"><code>              qos = d + (c + b*t.z)*t.z;
</code></td></tr><tr><td id="L49" class="css-a4x74f"><span>49</span></td><td id="LC49" class="css-1dcdqdg"><code>              dis = dot(qos,qos);
</code></td></tr><tr><td id="L50" class="css-a4x74f"><span>50</span></td><td id="LC50" class="css-1dcdqdg"><code>              res = min(res,dis);
</code></td></tr><tr><td id="L51" class="css-a4x74f"><span>51</span></td><td id="LC51" class="css-1dcdqdg"><code>              res = sqrt( res );
</code></td></tr><tr><td id="L52" class="css-a4x74f"><span>52</span></td><td id="LC52" class="css-1dcdqdg"><code>            }
</code></td></tr><tr><td id="L53" class="css-a4x74f"><span>53</span></td><td id="LC53" class="css-1dcdqdg"><code>            <span class="code-keyword">return</span> res;
</code></td></tr><tr><td id="L54" class="css-a4x74f"><span>54</span></td><td id="LC54" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L55" class="css-a4x74f"><span>55</span></td><td id="LC55" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L56" class="css-a4x74f"><span>56</span></td><td id="LC56" class="css-1dcdqdg"><code>          uniform vec2 uRatio;
</code></td></tr><tr><td id="L57" class="css-a4x74f"><span>57</span></td><td id="LC57" class="css-1dcdqdg"><code>          uniform vec2 uSize;
</code></td></tr><tr><td id="L58" class="css-a4x74f"><span>58</span></td><td id="LC58" class="css-1dcdqdg"><code>          uniform vec2 uPoints[SHADER_POINTS];
</code></td></tr><tr><td id="L59" class="css-a4x74f"><span>59</span></td><td id="LC59" class="css-1dcdqdg"><code>          uniform vec3 uColor;
</code></td></tr><tr><td id="L60" class="css-a4x74f"><span>60</span></td><td id="LC60" class="css-1dcdqdg"><code>          varying vec2 vUv;
</code></td></tr><tr><td id="L61" class="css-a4x74f"><span>61</span></td><td id="LC61" class="css-1dcdqdg"><code>          <span class="code-keyword">void</span> main() {
</code></td></tr><tr><td id="L62" class="css-a4x74f"><span>62</span></td><td id="LC62" class="css-1dcdqdg"><code>            float intensity = <span class="code-number">1.0</span>;
</code></td></tr><tr><td id="L63" class="css-a4x74f"><span>63</span></td><td id="LC63" class="css-1dcdqdg"><code>            float radius = <span class="code-number">0.015</span>;
</code></td></tr><tr><td id="L64" class="css-a4x74f"><span>64</span></td><td id="LC64" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L65" class="css-a4x74f"><span>65</span></td><td id="LC65" class="css-1dcdqdg"><code>            vec2 pos = (vUv - <span class="code-number">0.5</span>) * uRatio;
</code></td></tr><tr><td id="L66" class="css-a4x74f"><span>66</span></td><td id="LC66" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L67" class="css-a4x74f"><span>67</span></td><td id="LC67" class="css-1dcdqdg"><code>            vec2 c = (uPoints[<span class="code-number">0</span>] + uPoints[<span class="code-number">1</span>]) / <span class="code-number">2.0</span>;
</code></td></tr><tr><td id="L68" class="css-a4x74f"><span>68</span></td><td id="LC68" class="css-1dcdqdg"><code>            vec2 c_prev;
</code></td></tr><tr><td id="L69" class="css-a4x74f"><span>69</span></td><td id="LC69" class="css-1dcdqdg"><code>            float dist = <span class="code-number">10000.0</span>;
</code></td></tr><tr><td id="L70" class="css-a4x74f"><span>70</span></td><td id="LC70" class="css-1dcdqdg"><code>            <span class="code-keyword">for</span>(int i = <span class="code-number">0</span>; i &lt; SHADER_POINTS - <span class="code-number">1</span>; i++){
</code></td></tr><tr><td id="L71" class="css-a4x74f"><span>71</span></td><td id="LC71" class="css-1dcdqdg"><code>              c_prev = c;
</code></td></tr><tr><td id="L72" class="css-a4x74f"><span>72</span></td><td id="LC72" class="css-1dcdqdg"><code>              c = (uPoints[i] + uPoints[i + <span class="code-number">1</span>]) / <span class="code-number">2.0</span>;
</code></td></tr><tr><td id="L73" class="css-a4x74f"><span>73</span></td><td id="LC73" class="css-1dcdqdg"><code>              dist = min(dist, sdBezier(pos, c_prev, uPoints[i], c));
</code></td></tr><tr><td id="L74" class="css-a4x74f"><span>74</span></td><td id="LC74" class="css-1dcdqdg"><code>            }
</code></td></tr><tr><td id="L75" class="css-a4x74f"><span>75</span></td><td id="LC75" class="css-1dcdqdg"><code>            dist = max(<span class="code-number">0.0</span>, dist);
</code></td></tr><tr><td id="L76" class="css-a4x74f"><span>76</span></td><td id="LC76" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L77" class="css-a4x74f"><span>77</span></td><td id="LC77" class="css-1dcdqdg"><code>            float glow = pow(uSize.y / dist, intensity);
</code></td></tr><tr><td id="L78" class="css-a4x74f"><span>78</span></td><td id="LC78" class="css-1dcdqdg"><code>            vec3 col = vec3(<span class="code-number">0.0</span>);
</code></td></tr><tr><td id="L79" class="css-a4x74f"><span>79</span></td><td id="LC79" class="css-1dcdqdg"><code>            col += <span class="code-number">10.0</span> * vec3(smoothstep(uSize.x, <span class="code-number">0.0</span>, dist));
</code></td></tr><tr><td id="L80" class="css-a4x74f"><span>80</span></td><td id="LC80" class="css-1dcdqdg"><code>            col += glow * uColor;
</code></td></tr><tr><td id="L81" class="css-a4x74f"><span>81</span></td><td id="LC81" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L82" class="css-a4x74f"><span>82</span></td><td id="LC82" class="css-1dcdqdg"><code>            <span class="code-comment">// Tone mapping</span>
</code></td></tr><tr><td id="L83" class="css-a4x74f"><span>83</span></td><td id="LC83" class="css-1dcdqdg"><code>            col = <span class="code-number">1.0</span> - exp(-col);
</code></td></tr><tr><td id="L84" class="css-a4x74f"><span>84</span></td><td id="LC84" class="css-1dcdqdg"><code>            col = pow(col, vec3(<span class="code-number">0.4545</span>));
</code></td></tr><tr><td id="L85" class="css-a4x74f"><span>85</span></td><td id="LC85" class="css-1dcdqdg"><code>  
</code></td></tr><tr><td id="L86" class="css-a4x74f"><span>86</span></td><td id="LC86" class="css-1dcdqdg"><code>            gl_FragColor = vec4(col, <span class="code-number">1.0</span>);
</code></td></tr><tr><td id="L87" class="css-a4x74f"><span>87</span></td><td id="LC87" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L88" class="css-a4x74f"><span>88</span></td><td id="LC88" class="css-1dcdqdg"><code>        <span class="code-string">`}),v=new fe(s,u),l.add(v)},afterResize({width:l,height:s}){n.value.set(e.radius1,e.radius2),l&gt;=s?(d.value.set(1,s/l),n.value.multiplyScalar(1/l)):(d.value.set(l/s,1),n.value.multiplyScalar(1/s))},beforeRender({clock:l,width:s,height:S,wWidth:E}){for(let g=1;g&lt;e.curvePoints;g++)o[g].lerp(o[g-1],e.curveLerp);for(let g=0;g&lt;e.shaderPoints;g++)t.getPoint(g/(e.shaderPoints-1),c.value[g]);if(w)p.value.r=i.z,p.value.g=0,p.value.b=1-i.z,i.multiplyScalar(.95);else{const g=l.time*e.sleepTimeCoefX,R=l.time*e.sleepTimeCoefY,N=Math.cos(g),x=Math.sin(R),I=e.sleepRadiusX*E/s,F=e.sleepRadiusY*E/s,D=I*N,V=F*x;t.points[0].set(D,V),p.value.r=.5+.5*Math.cos(l.time*.0015),p.value.g=0,p.value.b=1-p.value.r}},onPointerMove({nPosition:l,delta:s}){w=!0;const S=.5*l.x*d.value.x,E=.5*l.y*d.value.y;t.points[0].set(S,E),r.x=Math.min(i.x+Math.abs(s.x)/e.velocityTreshold,1),r.y=Math.min(i.y+Math.abs(s.y)/e.velocityTreshold,1),r.z=Math.sqrt(r.x*r.x+r.y*r.y),i.lerp(r,.05)},onPointerLeave(){w=!1}}),{config:e}}class ge{constructor(e,o,t){this.variables=[],this.currentTextureIndex=0;let i=Je;const r=new $e,d=new Et;d.position.z=1;const n={passThruTexture:{value:null}},c=v(M(),n),p=new fe(new ne(2,2),c);r.add(p),this.setDataType=function(l){return i=l,this},this.addVariable=function(l,s,S){const E=this.createShaderMaterial(s),g={name:l,initialValueTexture:S,material:E,dependencies:null,renderTargets:[],wrapS:null,wrapT:null,minFilter:ve,magFilter:ve};return this.variables.push(g),g},this.setVariableDependencies=function(l,s){l.dependencies=s},this.init=function(){if(t.capabilities.isWebGL2===!1&amp;&amp;t.extensions.has("OES_texture_float")===!1)return"No OES_texture_float support for float textures.";if(t.capabilities.maxVertexTextures===0)return"No support for vertex shader textures.";for(let l=0;l&lt;this.variables.length;l++){const s=this.variables[l];s.renderTargets[0]=this.createRenderTarget(e,o,s.wrapS,s.wrapT,s.minFilter,s.magFilter),s.renderTargets[1]=this.createRenderTarget(e,o,s.wrapS,s.wrapT,s.minFilter,s.magFilter),this.renderTexture(s.initialValueTexture,s.renderTargets[0]),this.renderTexture(s.initialValueTexture,s.renderTargets[1]);const S=s.material,E=S.uniforms;if(s.dependencies!==null)for(let g=0;g&lt;s.dependencies.length;g++){const R=s.dependencies[g];if(R.name!==s.name){let N=!1;for(let x=0;x&lt;this.variables.length;x++)if(R.name===this.variables[x].name){N=!0;break}if(!N)return"Variable dependency not found. Variable="+s.name+", dependency="+R.name}E[R.name]={value:null},S.fragmentShader=`</span>
</code></td></tr><tr><td id="L89" class="css-a4x74f"><span>89</span></td><td id="LC89" class="css-1dcdqdg"><code>uniform sampler2D <span class="code-string">`+R.name+`</span>;
</code></td></tr><tr><td id="L90" class="css-a4x74f"><span>90</span></td><td id="LC90" class="css-1dcdqdg"><code><span class="code-string">`+S.fragmentShader}}return this.currentTextureIndex=0,null},this.compute=function(){const l=this.currentTextureIndex,s=this.currentTextureIndex===0?1:0;for(let S=0,E=this.variables.length;S&lt;E;S++){const g=this.variables[S];if(g.dependencies!==null){const R=g.material.uniforms;for(let N=0,x=g.dependencies.length;N&lt;x;N++){const I=g.dependencies[N];R[I.name].value=I.renderTargets[l].texture}}this.doRenderTarget(g.material,g.renderTargets[s])}this.currentTextureIndex=s},this.getCurrentRenderTarget=function(l){return l.renderTargets[this.currentTextureIndex]},this.getAlternateRenderTarget=function(l){return l.renderTargets[this.currentTextureIndex===0?1:0]};function u(l){l.defines.resolution="vec2( "+e.toFixed(1)+", "+o.toFixed(1)+" )"}this.addResolutionDefine=u;function v(l,s){s=s||{};const S=new Y({uniforms:s,vertexShader:w(),fragmentShader:l});return u(S),S}this.createShaderMaterial=v,this.createRenderTarget=function(l,s,S,E,g,R){return l=l||e,s=s||o,S=S||et,E=E||et,g=g||ve,R=R||ve,new se(l,s,{wrapS:S,wrapT:E,minFilter:g,magFilter:R,format:Ke,type:i,depthBuffer:!1})},this.createTexture=function(){const l=new Float32Array(e*o*4),s=new Dt(l,e,o,Ke,Je);return s.needsUpdate=!0,s},this.renderTexture=function(l,s){n.passThruTexture.value=l,this.doRenderTarget(c,s),n.passThruTexture.value=null},this.doRenderTarget=function(l,s){const S=t.getRenderTarget();p.material=l,t.setRenderTarget(s),t.render(r,d),p.material=c,t.setRenderTarget(S)};function w(){return`</span><span class="code-keyword">void</span> main()	{
</code></td></tr><tr><td id="L91" class="css-a4x74f"><span>91</span></td><td id="LC91" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L92" class="css-a4x74f"><span>92</span></td><td id="LC92" class="css-1dcdqdg"><code>	gl_Position = vec4( position, <span class="code-number">1.0</span> );
</code></td></tr><tr><td id="L93" class="css-a4x74f"><span>93</span></td><td id="LC93" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L94" class="css-a4x74f"><span>94</span></td><td id="LC94" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L95" class="css-a4x74f"><span>95</span></td><td id="LC95" class="css-1dcdqdg"><code><span class="code-string">`}function M(){return`</span>uniform sampler2D passThruTexture;
</code></td></tr><tr><td id="L96" class="css-a4x74f"><span>96</span></td><td id="LC96" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L97" class="css-a4x74f"><span>97</span></td><td id="LC97" class="css-1dcdqdg"><code><span class="code-keyword">void</span> main() {
</code></td></tr><tr><td id="L98" class="css-a4x74f"><span>98</span></td><td id="LC98" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L99" class="css-a4x74f"><span>99</span></td><td id="LC99" class="css-1dcdqdg"><code>	vec2 uv = gl_FragCoord.xy / resolution.xy;
</code></td></tr><tr><td id="L100" class="css-a4x74f"><span>100</span></td><td id="LC100" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L101" class="css-a4x74f"><span>101</span></td><td id="LC101" class="css-1dcdqdg"><code>	gl_FragColor = texture2D( passThruTexture, uv );
</code></td></tr><tr><td id="L102" class="css-a4x74f"><span>102</span></td><td id="LC102" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L103" class="css-a4x74f"><span>103</span></td><td id="LC103" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L104" class="css-a4x74f"><span>104</span></td><td id="LC104" class="css-1dcdqdg"><code><span class="code-string">`}}}function ce(h){let e=[];t(h);const o=new q;return{setColors:t,getColorAt:i};function t(r){e=[],r.forEach(d=&gt;{e.push(new q(d))})}function i(r){const d=Math.max(0,Math.min(1,r))*(h.length-1),n=Math.floor(d),c=e[n];if(n===h.length-1)return c.getHex();const p=d-n,u=e[n+1];return o.r=c.r+p*(u.r-c.r),o.g=c.g+p*(u.g-c.g),o.b=c.b+p*(u.b-c.b),o.clone()}}var $=`</span>vec4 permute(vec4 x){vec4 xm=mod(x,<span class="code-number">289.0</span>);<span class="code-keyword">return</span> mod(((xm*<span class="code-number">34.0</span>)+<span class="code-number">10.0</span>)*xm,<span class="code-number">289.0</span>);}float psrdnoise(vec3 x,vec3 period,float alpha,out vec3 gradient){
</code></td></tr><tr><td id="L105" class="css-a4x74f"><span>105</span></td><td id="LC105" class="css-1dcdqdg"><code>#ifndef PERLINGRID
</code></td></tr><tr><td id="L106" class="css-a4x74f"><span>106</span></td><td id="LC106" class="css-1dcdqdg"><code><span class="code-keyword">const</span> mat3 M=mat3(<span class="code-number">0.0</span>,<span class="code-number">1.0</span>,<span class="code-number">1.0</span>,<span class="code-number">1.0</span>,<span class="code-number">0.0</span>,<span class="code-number">1.0</span>,<span class="code-number">1.0</span>,<span class="code-number">1.0</span>,<span class="code-number">0.0</span>);<span class="code-keyword">const</span> mat3 Mi=mat3(<span class="code-number">-0.5</span>,<span class="code-number">0.5</span>,<span class="code-number">0.5</span>,<span class="code-number">0.5</span>,<span class="code-number">-0.5</span>,<span class="code-number">0.5</span>,<span class="code-number">0.5</span>,<span class="code-number">0.5</span>,<span class="code-number">-0.5</span>);
</code></td></tr><tr><td id="L107" class="css-a4x74f"><span>107</span></td><td id="LC107" class="css-1dcdqdg"><code>#endif
</code></td></tr><tr><td id="L108" class="css-a4x74f"><span>108</span></td><td id="LC108" class="css-1dcdqdg"><code>vec3 uvw;
</code></td></tr><tr><td id="L109" class="css-a4x74f"><span>109</span></td><td id="LC109" class="css-1dcdqdg"><code>#ifndef PERLINGRID
</code></td></tr><tr><td id="L110" class="css-a4x74f"><span>110</span></td><td id="LC110" class="css-1dcdqdg"><code>uvw=M*x;
</code></td></tr><tr><td id="L111" class="css-a4x74f"><span>111</span></td><td id="LC111" class="css-1dcdqdg"><code>#else
</code></td></tr><tr><td id="L112" class="css-a4x74f"><span>112</span></td><td id="LC112" class="css-1dcdqdg"><code>uvw=x+dot(x,vec3(<span class="code-number">1.0</span>/<span class="code-number">3.0</span>));
</code></td></tr><tr><td id="L113" class="css-a4x74f"><span>113</span></td><td id="LC113" class="css-1dcdqdg"><code>#endif
</code></td></tr><tr><td id="L114" class="css-a4x74f"><span>114</span></td><td id="LC114" class="css-1dcdqdg"><code>vec3 i0=floor(uvw);vec3 f0=fract(uvw);vec3 g_=step(f0.xyx,f0.yzz);vec3 l_=<span class="code-number">1.0</span>-g_;vec3 g=vec3(l_.z,g_.xy);vec3 l=vec3(l_.xy,g_.z);vec3 o1=min(g,l);vec3 o2=max(g,l);vec3 i1=i0+o1;vec3 i2=i0+o2;vec3 i3=i0+vec3(<span class="code-number">1.0</span>);vec3 v0,v1,v2,v3;
</code></td></tr><tr><td id="L115" class="css-a4x74f"><span>115</span></td><td id="LC115" class="css-1dcdqdg"><code>#ifndef PERLINGRID
</code></td></tr><tr><td id="L116" class="css-a4x74f"><span>116</span></td><td id="LC116" class="css-1dcdqdg"><code>v0=Mi*i0;v1=Mi*i1;v2=Mi*i2;v3=Mi*i3;
</code></td></tr><tr><td id="L117" class="css-a4x74f"><span>117</span></td><td id="LC117" class="css-1dcdqdg"><code>#else
</code></td></tr><tr><td id="L118" class="css-a4x74f"><span>118</span></td><td id="LC118" class="css-1dcdqdg"><code>v0=i0-dot(i0,vec3(<span class="code-number">1.0</span>/<span class="code-number">6.0</span>));v1=i1-dot(i1,vec3(<span class="code-number">1.0</span>/<span class="code-number">6.0</span>));v2=i2-dot(i2,vec3(<span class="code-number">1.0</span>/<span class="code-number">6.0</span>));v3=i3-dot(i3,vec3(<span class="code-number">1.0</span>/<span class="code-number">6.0</span>));
</code></td></tr><tr><td id="L119" class="css-a4x74f"><span>119</span></td><td id="LC119" class="css-1dcdqdg"><code>#endif
</code></td></tr><tr><td id="L120" class="css-a4x74f"><span>120</span></td><td id="LC120" class="css-1dcdqdg"><code>vec3 x0=x-v0;vec3 x1=x-v1;vec3 x2=x-v2;vec3 x3=x-v3;<span class="code-keyword">if</span>(any(greaterThan(period,vec3(<span class="code-number">0.0</span>)))){vec4 vx=vec4(v0.x,v1.x,v2.x,v3.x);vec4 vy=vec4(v0.y,v1.y,v2.y,v3.y);vec4 vz=vec4(v0.z,v1.z,v2.z,v3.z);<span class="code-keyword">if</span>(period.x&gt;<span class="code-number">0.0</span>)vx=mod(vx,period.x);<span class="code-keyword">if</span>(period.y&gt;<span class="code-number">0.0</span>)vy=mod(vy,period.y);<span class="code-keyword">if</span>(period.z&gt;<span class="code-number">0.0</span>)vz=mod(vz,period.z);
</code></td></tr><tr><td id="L121" class="css-a4x74f"><span>121</span></td><td id="LC121" class="css-1dcdqdg"><code>#ifndef PERLINGRID
</code></td></tr><tr><td id="L122" class="css-a4x74f"><span>122</span></td><td id="LC122" class="css-1dcdqdg"><code>i0=M*vec3(vx.x,vy.x,vz.x);i1=M*vec3(vx.y,vy.y,vz.y);i2=M*vec3(vx.z,vy.z,vz.z);i3=M*vec3(vx.w,vy.w,vz.w);
</code></td></tr><tr><td id="L123" class="css-a4x74f"><span>123</span></td><td id="LC123" class="css-1dcdqdg"><code>#else
</code></td></tr><tr><td id="L124" class="css-a4x74f"><span>124</span></td><td id="LC124" class="css-1dcdqdg"><code>v0=vec3(vx.x,vy.x,vz.x);v1=vec3(vx.y,vy.y,vz.y);v2=vec3(vx.z,vy.z,vz.z);v3=vec3(vx.w,vy.w,vz.w);i0=v0+dot(v0,vec3(<span class="code-number">1.0</span>/<span class="code-number">3.0</span>));i1=v1+dot(v1,vec3(<span class="code-number">1.0</span>/<span class="code-number">3.0</span>));i2=v2+dot(v2,vec3(<span class="code-number">1.0</span>/<span class="code-number">3.0</span>));i3=v3+dot(v3,vec3(<span class="code-number">1.0</span>/<span class="code-number">3.0</span>));
</code></td></tr><tr><td id="L125" class="css-a4x74f"><span>125</span></td><td id="LC125" class="css-1dcdqdg"><code>#endif
</code></td></tr><tr><td id="L126" class="css-a4x74f"><span>126</span></td><td id="LC126" class="css-1dcdqdg"><code>i0=floor(i0+<span class="code-number">0.5</span>);i1=floor(i1+<span class="code-number">0.5</span>);i2=floor(i2+<span class="code-number">0.5</span>);i3=floor(i3+<span class="code-number">0.5</span>);}vec4 hash=permute(permute(permute(vec4(i0.z,i1.z,i2.z,i3.z))+vec4(i0.y,i1.y,i2.y,i3.y))+vec4(i0.x,i1.x,i2.x,i3.x));vec4 theta=hash*<span class="code-number">3.883222077</span>;vec4 sz=hash*<span class="code-number">-0.006920415</span>+<span class="code-number">0.996539792</span>;vec4 psi=hash*<span class="code-number">0.108705628</span>;vec4 Ct=cos(theta);vec4 St=sin(theta);vec4 sz_prime=sqrt(<span class="code-number">1.0</span>-sz*sz);vec4 gx,gy,gz;
</code></td></tr><tr><td id="L127" class="css-a4x74f"><span>127</span></td><td id="LC127" class="css-1dcdqdg"><code>#ifdef FASTROTATION
</code></td></tr><tr><td id="L128" class="css-a4x74f"><span>128</span></td><td id="LC128" class="css-1dcdqdg"><code>vec4 qx=St;vec4 qy=-Ct;vec4 qz=vec4(<span class="code-number">0.0</span>);vec4 px=sz*qy;vec4 py=-sz*qx;vec4 pz=sz_prime;psi+=alpha;vec4 Sa=sin(psi);vec4 Ca=cos(psi);gx=Ca*px+Sa*qx;gy=Ca*py+Sa*qy;gz=Ca*pz+Sa*qz;
</code></td></tr><tr><td id="L129" class="css-a4x74f"><span>129</span></td><td id="LC129" class="css-1dcdqdg"><code>#else
</code></td></tr><tr><td id="L130" class="css-a4x74f"><span>130</span></td><td id="LC130" class="css-1dcdqdg"><code><span class="code-keyword">if</span>(alpha!=<span class="code-number">0.0</span>){vec4 Sp=sin(psi);vec4 Cp=cos(psi);vec4 px=Ct*sz_prime;vec4 py=St*sz_prime;vec4 pz=sz;vec4 Ctp=St*Sp-Ct*Cp;vec4 qx=mix(Ctp*St,Sp,sz);vec4 qy=mix(-Ctp*Ct,Cp,sz);vec4 qz=-(py*Cp+px*Sp);vec4 Sa=vec4(sin(alpha));vec4 Ca=vec4(cos(alpha));gx=Ca*px+Sa*qx;gy=Ca*py+Sa*qy;gz=Ca*pz+Sa*qz;}<span class="code-keyword">else</span>{gx=Ct*sz_prime;gy=St*sz_prime;gz=sz;}
</code></td></tr><tr><td id="L131" class="css-a4x74f"><span>131</span></td><td id="LC131" class="css-1dcdqdg"><code>#endif
</code></td></tr><tr><td id="L132" class="css-a4x74f"><span>132</span></td><td id="LC132" class="css-1dcdqdg"><code>vec3 g0=vec3(gx.x,gy.x,gz.x);vec3 g1=vec3(gx.y,gy.y,gz.y);vec3 g2=vec3(gx.z,gy.z,gz.z);vec3 g3=vec3(gx.w,gy.w,gz.w);vec4 w=<span class="code-number">0.5</span>-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3));w=max(w,<span class="code-number">0.0</span>);vec4 w2=w*w;vec4 w3=w2*w;vec4 gdotx=vec4(dot(g0,x0),dot(g1,x1),dot(g2,x2),dot(g3,x3));float n=dot(w3,gdotx);vec4 dw=<span class="code-number">-6.0</span>*w2*gdotx;vec3 dn0=w3.x*g0+dw.x*x0;vec3 dn1=w3.y*g1+dw.y*x1;vec3 dn2=w3.z*g2+dw.z*x2;vec3 dn3=w3.w*g3+dw.w*x3;gradient=<span class="code-number">39.5</span>*(dn0+dn1+dn2+dn3);<span class="code-keyword">return</span> <span class="code-number">39.5</span>*n;}<span class="code-string">`;const{randFloat:nt,randFloatSpread:st}=xe,Bt={gpgpuSize:256,colors:[65280,255],color:16711680,coordScale:1.5,noiseIntensity:.001,noiseTimeCoef:1e-4,pointSize:5,pointDecay:.005,sleepRadiusX:250,sleepRadiusY:250,sleepTimeCoefX:.001,sleepTimeCoefY:.002};function Ht(h){const e={...Bt,...h},o=e.gpgpuSize,t=o*o;let i,r,d,n,c;const p={value:0},u={value:e.coordScale},v={value:e.noiseIntensity},w={value:e.pointSize},M={value:e.pointDecay},l={value:new q(e.color)},s={value:new _},S={value:new _},E={uTime:p,uCoordScale:u,uNoiseIntensity:v,uPointSize:w,uPointDecay:M,uColor:l,uMouse:s,uMouseDirection:S};let g,R,N,x=!1;const I=new _;return oe({...Gt(h),antialias:!1,initRenderer({renderer:A}){F(A)},initScene({scene:A}){D(),A.add(N)},beforeRender({width:A,wWidth:O,wHeight:L,clock:k,pointer:W}){if(x)I.x=W.nPosition.x*.5*O,I.y=W.nPosition.y*.5*L;else{const m=k.time*e.sleepTimeCoefX,C=k.time*e.sleepTimeCoefY,b=Math.cos(m),z=Math.sin(C),T=e.sleepRadiusX*O/A,P=e.sleepRadiusY*O/A;I.x=T*b,I.y=P*z}s.value.lerp(I,.05),p.value=k.time*e.noiseTimeCoef,i.compute(),R.uniforms.texturePosition.value=i.getCurrentRenderTarget(c).texture,R.uniforms.textureVelocity.value=i.getCurrentRenderTarget(n).texture},onPointerMove({delta:A}){x=!0,S.value.copy(A)},onPointerLeave(){x=!1}}),{config:e,uniforms:E};function F(A){i=new ge(o,o,A),A.capabilities.isWebGL2||i.setDataType(he),r=i.createTexture(),d=i.createTexture(),V(r,d),n=i.addVariable("textureVelocity",`</span>
</code></td></tr><tr><td id="L133" class="css-a4x74f"><span>133</span></td><td id="LC133" class="css-1dcdqdg"><code>      ${$}
</code></td></tr><tr><td id="L134" class="css-a4x74f"><span>134</span></td><td id="LC134" class="css-1dcdqdg"><code>      uniform float uTime;
</code></td></tr><tr><td id="L135" class="css-a4x74f"><span>135</span></td><td id="LC135" class="css-1dcdqdg"><code>      uniform float uCoordScale;
</code></td></tr><tr><td id="L136" class="css-a4x74f"><span>136</span></td><td id="LC136" class="css-1dcdqdg"><code>      uniform float uNoiseIntensity;
</code></td></tr><tr><td id="L137" class="css-a4x74f"><span>137</span></td><td id="LC137" class="css-1dcdqdg"><code>      <span class="code-keyword">void</span> main() {
</code></td></tr><tr><td id="L138" class="css-a4x74f"><span>138</span></td><td id="LC138" class="css-1dcdqdg"><code>        vec2 uv = gl_FragCoord.xy / resolution.xy;
</code></td></tr><tr><td id="L139" class="css-a4x74f"><span>139</span></td><td id="LC139" class="css-1dcdqdg"><code>        vec4 pos = texture2D(texturePosition, uv);
</code></td></tr><tr><td id="L140" class="css-a4x74f"><span>140</span></td><td id="LC140" class="css-1dcdqdg"><code>        vec4 vel = texture2D(textureVelocity, uv);
</code></td></tr><tr><td id="L141" class="css-a4x74f"><span>141</span></td><td id="LC141" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L142" class="css-a4x74f"><span>142</span></td><td id="LC142" class="css-1dcdqdg"><code>        <span class="code-keyword">if</span> (pos.w &lt; <span class="code-number">0.0</span>) {
</code></td></tr><tr><td id="L143" class="css-a4x74f"><span>143</span></td><td id="LC143" class="css-1dcdqdg"><code>          vel.x = <span class="code-number">0.0</span>;
</code></td></tr><tr><td id="L144" class="css-a4x74f"><span>144</span></td><td id="LC144" class="css-1dcdqdg"><code>          vel.y = <span class="code-number">0.0</span>;
</code></td></tr><tr><td id="L145" class="css-a4x74f"><span>145</span></td><td id="LC145" class="css-1dcdqdg"><code>          vel.z = <span class="code-number">0.0</span>;
</code></td></tr><tr><td id="L146" class="css-a4x74f"><span>146</span></td><td id="LC146" class="css-1dcdqdg"><code>        } <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L147" class="css-a4x74f"><span>147</span></td><td id="LC147" class="css-1dcdqdg"><code>          vec3 grad;
</code></td></tr><tr><td id="L148" class="css-a4x74f"><span>148</span></td><td id="LC148" class="css-1dcdqdg"><code>          vec3 p = vec3(<span class="code-number">0.0</span>);
</code></td></tr><tr><td id="L149" class="css-a4x74f"><span>149</span></td><td id="LC149" class="css-1dcdqdg"><code>          float n = psrdnoise(pos.xyz * uCoordScale, p, uTime, grad);
</code></td></tr><tr><td id="L150" class="css-a4x74f"><span>150</span></td><td id="LC150" class="css-1dcdqdg"><code>          vel.xyz += grad * uNoiseIntensity * pos.w;
</code></td></tr><tr><td id="L151" class="css-a4x74f"><span>151</span></td><td id="LC151" class="css-1dcdqdg"><code>        }
</code></td></tr><tr><td id="L152" class="css-a4x74f"><span>152</span></td><td id="LC152" class="css-1dcdqdg"><code>        gl_FragColor = vel;
</code></td></tr><tr><td id="L153" class="css-a4x74f"><span>153</span></td><td id="LC153" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L154" class="css-a4x74f"><span>154</span></td><td id="LC154" class="css-1dcdqdg"><code>    <span class="code-string">`,d),c=i.addVariable("texturePosition",`</span>
</code></td></tr><tr><td id="L155" class="css-a4x74f"><span>155</span></td><td id="LC155" class="css-1dcdqdg"><code>      uniform float uPointDecay;
</code></td></tr><tr><td id="L156" class="css-a4x74f"><span>156</span></td><td id="LC156" class="css-1dcdqdg"><code>      uniform vec2 uMouse;
</code></td></tr><tr><td id="L157" class="css-a4x74f"><span>157</span></td><td id="LC157" class="css-1dcdqdg"><code>      uniform vec2 uMouseDirection;
</code></td></tr><tr><td id="L158" class="css-a4x74f"><span>158</span></td><td id="LC158" class="css-1dcdqdg"><code>      <span class="code-keyword">void</span> main() {
</code></td></tr><tr><td id="L159" class="css-a4x74f"><span>159</span></td><td id="LC159" class="css-1dcdqdg"><code>        vec2 uv = gl_FragCoord.xy / resolution.xy;
</code></td></tr><tr><td id="L160" class="css-a4x74f"><span>160</span></td><td id="LC160" class="css-1dcdqdg"><code>        vec4 pos = texture2D(texturePosition, uv);
</code></td></tr><tr><td id="L161" class="css-a4x74f"><span>161</span></td><td id="LC161" class="css-1dcdqdg"><code>        vec4 vel = texture2D(textureVelocity, uv);
</code></td></tr><tr><td id="L162" class="css-a4x74f"><span>162</span></td><td id="LC162" class="css-1dcdqdg"><code>        <span class="code-keyword">if</span> (pos.w &lt; <span class="code-number">0.0</span>) { pos.w = vel.w; }
</code></td></tr><tr><td id="L163" class="css-a4x74f"><span>163</span></td><td id="LC163" class="css-1dcdqdg"><code>        pos.w -= uPointDecay;
</code></td></tr><tr><td id="L164" class="css-a4x74f"><span>164</span></td><td id="LC164" class="css-1dcdqdg"><code>        <span class="code-keyword">if</span> (pos.w &lt;= <span class="code-number">0.0</span>) {
</code></td></tr><tr><td id="L165" class="css-a4x74f"><span>165</span></td><td id="LC165" class="css-1dcdqdg"><code>          pos.xy = uMouse.xy;
</code></td></tr><tr><td id="L166" class="css-a4x74f"><span>166</span></td><td id="LC166" class="css-1dcdqdg"><code>          pos.z = <span class="code-number">0.0</span>;
</code></td></tr><tr><td id="L167" class="css-a4x74f"><span>167</span></td><td id="LC167" class="css-1dcdqdg"><code>        } <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L168" class="css-a4x74f"><span>168</span></td><td id="LC168" class="css-1dcdqdg"><code>          pos.xyz += vel.xyz;
</code></td></tr><tr><td id="L169" class="css-a4x74f"><span>169</span></td><td id="LC169" class="css-1dcdqdg"><code>        }
</code></td></tr><tr><td id="L170" class="css-a4x74f"><span>170</span></td><td id="LC170" class="css-1dcdqdg"><code>        gl_FragColor = pos;
</code></td></tr><tr><td id="L171" class="css-a4x74f"><span>171</span></td><td id="LC171" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L172" class="css-a4x74f"><span>172</span></td><td id="LC172" class="css-1dcdqdg"><code>    <span class="code-string">`,r),i.setVariableDependencies(n,[c,n]),i.setVariableDependencies(c,[c,n]),Object.keys(E).forEach(L=&gt;{n.material.uniforms[L]=E[L],c.material.uniforms[L]=E[L]});const O=i.init();O!==null&amp;&amp;console.error(O)}function D(){g=new pe;const A=new Float32Array(t*3),O=new Float32Array(t*2),L=new Float32Array(t*3);for(let m=0;m&lt;t*3;m+=3)A[m]=0,A[m+1]=0,A[m+2]=0;let k=0;for(let m=0;m&lt;o;m++)for(let C=0;C&lt;o;C++)O[k++]=C/(o-1),O[k++]=m/(o-1);const W=ce(e.colors);for(let m=0;m&lt;t*3;m+=3){const C=W.getColorAt(Math.random());L[m]=C.r,L[m+1]=C.g,L[m+2]=C.b}g.setAttribute("position",new Pe(A,3)),g.setAttribute("uv",new Pe(O,2)),g.setAttribute("color",new Pe(L,3)),R=new Y({blending:tt,depthTest:!1,transparent:!0,vertexColors:!0,uniforms:{texturePosition:{value:null},textureVelocity:{value:null},uPointSize:w,uColor:l},vertexShader:`</span>
</code></td></tr><tr><td id="L173" class="css-a4x74f"><span>173</span></td><td id="LC173" class="css-1dcdqdg"><code>        uniform sampler2D texturePosition;
</code></td></tr><tr><td id="L174" class="css-a4x74f"><span>174</span></td><td id="LC174" class="css-1dcdqdg"><code>        uniform sampler2D textureVelocity;
</code></td></tr><tr><td id="L175" class="css-a4x74f"><span>175</span></td><td id="LC175" class="css-1dcdqdg"><code>        uniform float uPointSize;
</code></td></tr><tr><td id="L176" class="css-a4x74f"><span>176</span></td><td id="LC176" class="css-1dcdqdg"><code>        varying vec4 vPos;
</code></td></tr><tr><td id="L177" class="css-a4x74f"><span>177</span></td><td id="LC177" class="css-1dcdqdg"><code>        varying vec4 vVel;
</code></td></tr><tr><td id="L178" class="css-a4x74f"><span>178</span></td><td id="LC178" class="css-1dcdqdg"><code>        varying vec3 vCol;
</code></td></tr><tr><td id="L179" class="css-a4x74f"><span>179</span></td><td id="LC179" class="css-1dcdqdg"><code>        <span class="code-keyword">void</span> main() {
</code></td></tr><tr><td id="L180" class="css-a4x74f"><span>180</span></td><td id="LC180" class="css-1dcdqdg"><code>          vCol = color;
</code></td></tr><tr><td id="L181" class="css-a4x74f"><span>181</span></td><td id="LC181" class="css-1dcdqdg"><code>          vPos = texture2D(texturePosition, uv);
</code></td></tr><tr><td id="L182" class="css-a4x74f"><span>182</span></td><td id="LC182" class="css-1dcdqdg"><code>          vVel = texture2D(textureVelocity, uv);
</code></td></tr><tr><td id="L183" class="css-a4x74f"><span>183</span></td><td id="LC183" class="css-1dcdqdg"><code>          vec4 mvPosition = modelViewMatrix * vec4(vPos.xyz, <span class="code-number">1.0</span>);
</code></td></tr><tr><td id="L184" class="css-a4x74f"><span>184</span></td><td id="LC184" class="css-1dcdqdg"><code>          <span class="code-comment">// gl_PointSize = smoothstep(0.0, 2.0, vPos.w) * uPointSize;</span>
</code></td></tr><tr><td id="L185" class="css-a4x74f"><span>185</span></td><td id="LC185" class="css-1dcdqdg"><code>          gl_PointSize = vPos.w * (vVel.w + <span class="code-number">0.5</span>) * uPointSize;
</code></td></tr><tr><td id="L186" class="css-a4x74f"><span>186</span></td><td id="LC186" class="css-1dcdqdg"><code>          gl_Position = projectionMatrix * mvPosition;
</code></td></tr><tr><td id="L187" class="css-a4x74f"><span>187</span></td><td id="LC187" class="css-1dcdqdg"><code>        }
</code></td></tr><tr><td id="L188" class="css-a4x74f"><span>188</span></td><td id="LC188" class="css-1dcdqdg"><code>      <span class="code-string">`,fragmentShader:`</span>
</code></td></tr><tr><td id="L189" class="css-a4x74f"><span>189</span></td><td id="LC189" class="css-1dcdqdg"><code>        uniform vec3 uColor;
</code></td></tr><tr><td id="L190" class="css-a4x74f"><span>190</span></td><td id="LC190" class="css-1dcdqdg"><code>        varying vec4 vPos;
</code></td></tr><tr><td id="L191" class="css-a4x74f"><span>191</span></td><td id="LC191" class="css-1dcdqdg"><code>        varying vec4 vVel;
</code></td></tr><tr><td id="L192" class="css-a4x74f"><span>192</span></td><td id="LC192" class="css-1dcdqdg"><code>        varying vec3 vCol;
</code></td></tr><tr><td id="L193" class="css-a4x74f"><span>193</span></td><td id="LC193" class="css-1dcdqdg"><code>        <span class="code-keyword">void</span> main() {
</code></td></tr><tr><td id="L194" class="css-a4x74f"><span>194</span></td><td id="LC194" class="css-1dcdqdg"><code>          float dist = length(gl_PointCoord - <span class="code-number">0.5</span>);
</code></td></tr><tr><td id="L195" class="css-a4x74f"><span>195</span></td><td id="LC195" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (dist &gt; <span class="code-number">0.5</span>) discard;
</code></td></tr><tr><td id="L196" class="css-a4x74f"><span>196</span></td><td id="LC196" class="css-1dcdqdg"><code>          <span class="code-comment">// float a = smoothstep(0.0, 1.0, vPos.w);</span>
</code></td></tr><tr><td id="L197" class="css-a4x74f"><span>197</span></td><td id="LC197" class="css-1dcdqdg"><code>          gl_FragColor = vec4(mix(vCol, uColor, vPos.w), vPos.w);
</code></td></tr><tr><td id="L198" class="css-a4x74f"><span>198</span></td><td id="LC198" class="css-1dcdqdg"><code>        }
</code></td></tr><tr><td id="L199" class="css-a4x74f"><span>199</span></td><td id="LC199" class="css-1dcdqdg"><code>      <span class="code-string">`}),N=new _t(g,R),N.matrixAutoUpdate=!1,N.updateMatrix()}function V(A,O){const L=A.image.data,k=O.image.data;for(let W=0,m=L.length;W&lt;m;W+=4)L[W+0]=st(1),L[W+1]=st(1),L[W+2]=-1e5,L[W+3]=nt(.1,1),k[W+0]=0,k[W+1]=0,k[W+2]=0,k[W+3]=nt(.1,1)}}function Gt(h){const e={};return["el","canvas","width","height","resize"].forEach(o=&gt;{h[o]!==void 0&amp;&amp;(e[o]=h[o])}),e}const qt={width:256,height:256};function Yt(h){const e={...qt,...h},o=document.createElement("canvas");o.width=e.width,o.height=e.height;const t=o.getContext("2d"),i=new Rt(t.canvas);return{canvas:o,ctx:t,texture:i}}var Xt="float psrdnoise(vec2 x,vec2 period,float alpha,out vec2 gradient){vec2 uv=vec2(x.x+x.y*0.5,x.y);vec2 i0=floor(uv);vec2 f0=fract(uv);float cmp=step(f0.y,f0.x);vec2 o1=vec2(cmp,1.0-cmp);vec2 i1=i0+o1;vec2 i2=i0+vec2(1.0,1.0);vec2 v0=vec2(i0.x-i0.y*0.5,i0.y);vec2 v1=vec2(v0.x+o1.x-o1.y*0.5,v0.y+o1.y);vec2 v2=vec2(v0.x+0.5,v0.y+1.0);vec2 x0=x-v0;vec2 x1=x-v1;vec2 x2=x-v2;vec3 iu,iv;vec3 xw,yw;if(any(greaterThan(period,vec2(0.0)))){xw=vec3(v0.x,v1.x,v2.x);yw=vec3(v0.y,v1.y,v2.y);if(period.x&gt;0.0)xw=mod(vec3(v0.x,v1.x,v2.x),period.x);if(period.y&gt;0.0)yw=mod(vec3(v0.y,v1.y,v2.y),period.y);iu=floor(xw+0.5*yw+0.5);iv=floor(yw+0.5);}else{iu=vec3(i0.x,i1.x,i2.x);iv=vec3(i0.y,i1.y,i2.y);}vec3 hash=mod(iu,289.0);hash=mod((hash*51.0+2.0)*hash+iv,289.0);hash=mod((hash*34.0+10.0)*hash,289.0);vec3 psi=hash*0.07482+alpha;vec3 gx=cos(psi);vec3 gy=sin(psi);vec2 g0=vec2(gx.x,gy.x);vec2 g1=vec2(gx.y,gy.y);vec2 g2=vec2(gx.z,gy.z);vec3 w=0.8-vec3(dot(x0,x0),dot(x1,x1),dot(x2,x2));w=max(w,0.0);vec3 w2=w*w;vec3 w4=w2*w2;vec3 gdotx=vec3(dot(g0,x0),dot(g1,x1),dot(g2,x2));float n=dot(w4,gdotx);vec3 w3=w2*w;vec3 dw=-8.0*w3*gdotx;vec2 dn0=w4.x*g0+dw.x*x0;vec2 dn1=w4.y*g1+dw.y*x1;vec2 dn2=w4.z*g2+dw.z*x2;gradient=10.9*(dn0+dn1+dn2);return 10.9*n;}";const Zt={colors:[16777215,0],minStroke:5,maxStroke:5,timeCoef:5e-4,coordScale:2,displacementScale:.002,mouseScale:.25,mouseLerp:.025};function Qt(h){const e={...Zt,...h},o=Yt({width:1,height:4096});p();const t={uMap:{value:o.texture},uTime:{value:0},uCoordScale:{value:e.coordScale},uDisplacementScale:{value:e.displacementScale},uMouse:{value:new _}},i=new ne,r=new Y({uniforms:t,vertexShader:`</span>
</code></td></tr><tr><td id="L200" class="css-a4x74f"><span>200</span></td><td id="LC200" class="css-1dcdqdg"><code>      varying vec2 vUv;
</code></td></tr><tr><td id="L201" class="css-a4x74f"><span>201</span></td><td id="LC201" class="css-1dcdqdg"><code>      <span class="code-keyword">void</span> main() {
</code></td></tr><tr><td id="L202" class="css-a4x74f"><span>202</span></td><td id="LC202" class="css-1dcdqdg"><code>        vUv = uv;
</code></td></tr><tr><td id="L203" class="css-a4x74f"><span>203</span></td><td id="LC203" class="css-1dcdqdg"><code>        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, <span class="code-number">1.0</span>);
</code></td></tr><tr><td id="L204" class="css-a4x74f"><span>204</span></td><td id="LC204" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L205" class="css-a4x74f"><span>205</span></td><td id="LC205" class="css-1dcdqdg"><code>    <span class="code-string">`,fragmentShader:`</span>
</code></td></tr><tr><td id="L206" class="css-a4x74f"><span>206</span></td><td id="LC206" class="css-1dcdqdg"><code>      uniform sampler2D uMap;
</code></td></tr><tr><td id="L207" class="css-a4x74f"><span>207</span></td><td id="LC207" class="css-1dcdqdg"><code>      uniform float uTime;
</code></td></tr><tr><td id="L208" class="css-a4x74f"><span>208</span></td><td id="LC208" class="css-1dcdqdg"><code>      uniform float uCoordScale;
</code></td></tr><tr><td id="L209" class="css-a4x74f"><span>209</span></td><td id="LC209" class="css-1dcdqdg"><code>      uniform float uDisplacementScale;
</code></td></tr><tr><td id="L210" class="css-a4x74f"><span>210</span></td><td id="LC210" class="css-1dcdqdg"><code>      uniform vec2 uMouse;
</code></td></tr><tr><td id="L211" class="css-a4x74f"><span>211</span></td><td id="LC211" class="css-1dcdqdg"><code>      varying vec2 vUv;
</code></td></tr><tr><td id="L212" class="css-a4x74f"><span>212</span></td><td id="LC212" class="css-1dcdqdg"><code>      ${Xt}
</code></td></tr><tr><td id="L213" class="css-a4x74f"><span>213</span></td><td id="LC213" class="css-1dcdqdg"><code>      <span class="code-keyword">void</span> main() {
</code></td></tr><tr><td id="L214" class="css-a4x74f"><span>214</span></td><td id="LC214" class="css-1dcdqdg"><code>        vec2 p = vec2(<span class="code-number">0.0</span>);
</code></td></tr><tr><td id="L215" class="css-a4x74f"><span>215</span></td><td id="LC215" class="css-1dcdqdg"><code>        vec2 grad;
</code></td></tr><tr><td id="L216" class="css-a4x74f"><span>216</span></td><td id="LC216" class="css-1dcdqdg"><code>        float n = psrdnoise(vUv * uCoordScale + uMouse, p, uTime, grad);
</code></td></tr><tr><td id="L217" class="css-a4x74f"><span>217</span></td><td id="LC217" class="css-1dcdqdg"><code>        <span class="code-comment">// grad *= uCoordScale;</span>
</code></td></tr><tr><td id="L218" class="css-a4x74f"><span>218</span></td><td id="LC218" class="css-1dcdqdg"><code>        vec2 uv = vUv + uDisplacementScale * grad;
</code></td></tr><tr><td id="L219" class="css-a4x74f"><span>219</span></td><td id="LC219" class="css-1dcdqdg"><code>        gl_FragColor = texture2D(uMap, uv.yx);
</code></td></tr><tr><td id="L220" class="css-a4x74f"><span>220</span></td><td id="LC220" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L221" class="css-a4x74f"><span>221</span></td><td id="LC221" class="css-1dcdqdg"><code>    <span class="code-string">`}),d=new fe(i,r),n=new _,c={};return["el","canvas","width","height","resize"].forEach(u=&gt;{h[u]!==void 0&amp;&amp;(c[u]=h[u])}),oe({...c,antialias:!0,initScene({camera:u,scene:v,wWidth:w,wHeight:M}){d.scale.set(w*2,M*2,1),v.add(d),u.position.set(0,-30,7),u.lookAt(0,-19,0)},beforeRender({clock:u}){t.uTime.value=u.time*e.timeCoef,t.uMouse.value.lerp(n,e.mouseLerp)},onPointerMove({nPosition:u}){n.set(-u.x,u.y).multiplyScalar(e.mouseScale)},onPointerLeave(){n.set(0,0)}}),{config:e,uniforms:t,drawTexture:p};function p(){const u=o.ctx;u.lineWidth=0;const{width:v,height:w}=o.canvas,M=ce(e.colors);let l=0,s;for(;l&lt;w;)s=e.minStroke+Math.random()*(e.maxStroke-e.minStroke),u.fillStyle=M.getColorAt(Math.random()).getStyle(),u.beginPath(),u.rect(0,l-1,v,s+1),u.fill(),u.closePath(),l+=s;o.texture.needsUpdate=!0}}const{randFloat:$t,randFloatSpread:ie}=xe,Kt={gpgpuSize:64,background:16777215,material:"basic",materialParams:{},texture:null,textureCount:1,colors:[16777215,16777215],lights:[{type:"ambient",params:[16777215,.5]},{type:"directional",params:[16777215,1],props:{position:[0,10,0]}}],wingsScale:[1,1,1],wingsWidthSegments:8,wingsHeightSegments:8,wingsSpeed:.75,wingsDisplacementScale:1.25,noiseCoordScale:.01,noiseTimeCoef:5e-4,noiseIntensity:.0025,attractionRadius1:100,attractionRadius2:150,maxVelocity:.1};function Jt(h){const e={...Kt,...h};if(!["basic","phong","standard"].includes(e.material))throw new Error(`</span>Invalid material ${e.material}<span class="code-string">`);if(!Number.isInteger(e.wingsWidthSegments)||e.wingsWidthSegments%2!==0)throw new Error(`</span>Invalid wingsWidthSegments ${e.wingsWidthSegments}<span class="code-string">`);const o=e.gpgpuSize,t=o*o;let i,r,d,n,c;const p={value:null},u={value:null},v={value:null},w={value:0},M={value:e.noiseCoordScale},l={value:e.noiseIntensity},s={value:e.maxVelocity},S={value:e.attractionRadius1},E={value:e.attractionRadius2},g={value:new j(...e.wingsScale)},R={value:e.wingsSpeed},N={value:e.wingsDisplacementScale},x={uTexturePosition:p,uOldTexturePosition:u,uTextureVelocity:v},I={uTime:w,uNoiseCoordScale:M,uNoiseIntensity:l,uMaxVelocity:s,uAttractionRadius1:S,uAttractionRadius2:E,uWingsScale:g,uWingsSpeed:R,uWingsDisplacementScale:N},F={...x,...I};let D,V,A;return{three:oe({...Ae(h),antialias:!0,orbitControls:!0,initRenderer({renderer:m}){O(m)},initCamera({camera:m}){m.position.set(0,50,70)},initScene({scene:m}){L(m)},beforeRender({clock:m}){w.value=m.time*e.noiseTimeCoef,i.compute(),p.value=c.renderTargets[i.currentTextureIndex].texture,u.value=c.renderTargets[i.currentTextureIndex===0?1:0].texture,v.value=n.renderTargets[i.currentTextureIndex].texture}}),config:e,uniforms:F,setColors:k};function O(m){i=new ge(o,o,m),m.capabilities.isWebGL2||i.setDataType(he),r=i.createTexture(),d=i.createTexture(),W(r,d),n=i.addVariable("textureVelocity",`</span>
</code></td></tr><tr><td id="L222" class="css-a4x74f"><span>222</span></td><td id="LC222" class="css-1dcdqdg"><code>      ${$}
</code></td></tr><tr><td id="L223" class="css-a4x74f"><span>223</span></td><td id="LC223" class="css-1dcdqdg"><code>      uniform float uTime;
</code></td></tr><tr><td id="L224" class="css-a4x74f"><span>224</span></td><td id="LC224" class="css-1dcdqdg"><code>      uniform float uNoiseCoordScale;
</code></td></tr><tr><td id="L225" class="css-a4x74f"><span>225</span></td><td id="LC225" class="css-1dcdqdg"><code>      uniform float uNoiseIntensity;
</code></td></tr><tr><td id="L226" class="css-a4x74f"><span>226</span></td><td id="LC226" class="css-1dcdqdg"><code>      uniform float uMaxVelocity;
</code></td></tr><tr><td id="L227" class="css-a4x74f"><span>227</span></td><td id="LC227" class="css-1dcdqdg"><code>      uniform float uAttractionRadius1;
</code></td></tr><tr><td id="L228" class="css-a4x74f"><span>228</span></td><td id="LC228" class="css-1dcdqdg"><code>      uniform float uAttractionRadius2;
</code></td></tr><tr><td id="L229" class="css-a4x74f"><span>229</span></td><td id="LC229" class="css-1dcdqdg"><code>      uniform float uWingsSpeed;
</code></td></tr><tr><td id="L230" class="css-a4x74f"><span>230</span></td><td id="LC230" class="css-1dcdqdg"><code>      <span class="code-keyword">void</span> main() {
</code></td></tr><tr><td id="L231" class="css-a4x74f"><span>231</span></td><td id="LC231" class="css-1dcdqdg"><code>        vec2 uv = gl_FragCoord.xy / resolution.xy;
</code></td></tr><tr><td id="L232" class="css-a4x74f"><span>232</span></td><td id="LC232" class="css-1dcdqdg"><code>        vec4 pos = texture2D(texturePosition, uv);
</code></td></tr><tr><td id="L233" class="css-a4x74f"><span>233</span></td><td id="LC233" class="css-1dcdqdg"><code>        vec4 vel = texture2D(textureVelocity, uv);
</code></td></tr><tr><td id="L234" class="css-a4x74f"><span>234</span></td><td id="LC234" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L235" class="css-a4x74f"><span>235</span></td><td id="LC235" class="css-1dcdqdg"><code>        vec3 grad;
</code></td></tr><tr><td id="L236" class="css-a4x74f"><span>236</span></td><td id="LC236" class="css-1dcdqdg"><code>        float n = psrdnoise(pos.xyz * uNoiseCoordScale, vec3(<span class="code-number">0</span>), uTime, grad);
</code></td></tr><tr><td id="L237" class="css-a4x74f"><span>237</span></td><td id="LC237" class="css-1dcdqdg"><code>        grad = grad * uNoiseIntensity;
</code></td></tr><tr><td id="L238" class="css-a4x74f"><span>238</span></td><td id="LC238" class="css-1dcdqdg"><code>        vel.xyz = vel.xyz + (pos.w * <span class="code-number">0.75</span>) * grad;
</code></td></tr><tr><td id="L239" class="css-a4x74f"><span>239</span></td><td id="LC239" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L240" class="css-a4x74f"><span>240</span></td><td id="LC240" class="css-1dcdqdg"><code>        vec3 dv = -pos.xyz;
</code></td></tr><tr><td id="L241" class="css-a4x74f"><span>241</span></td><td id="LC241" class="css-1dcdqdg"><code>        float coef = smoothstep(uAttractionRadius1, uAttractionRadius2, length(dv));
</code></td></tr><tr><td id="L242" class="css-a4x74f"><span>242</span></td><td id="LC242" class="css-1dcdqdg"><code>        vel.xyz = vel.xyz + pos.w * coef * normalize(dv);
</code></td></tr><tr><td id="L243" class="css-a4x74f"><span>243</span></td><td id="LC243" class="css-1dcdqdg"><code>        vel.xyz = clamp(vel.xyz, -uMaxVelocity, uMaxVelocity);
</code></td></tr><tr><td id="L244" class="css-a4x74f"><span>244</span></td><td id="LC244" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L245" class="css-a4x74f"><span>245</span></td><td id="LC245" class="css-1dcdqdg"><code>        vel.w = mod(vel.w + length(vel.xyz) * (<span class="code-number">0.5</span> + pos.w) * uWingsSpeed, <span class="code-number">6.2831853071</span>);
</code></td></tr><tr><td id="L246" class="css-a4x74f"><span>246</span></td><td id="LC246" class="css-1dcdqdg"><code>        gl_FragColor = vel;
</code></td></tr><tr><td id="L247" class="css-a4x74f"><span>247</span></td><td id="LC247" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L248" class="css-a4x74f"><span>248</span></td><td id="LC248" class="css-1dcdqdg"><code>    <span class="code-string">`,d),c=i.addVariable("texturePosition",`</span>
</code></td></tr><tr><td id="L249" class="css-a4x74f"><span>249</span></td><td id="LC249" class="css-1dcdqdg"><code>      ${$}
</code></td></tr><tr><td id="L250" class="css-a4x74f"><span>250</span></td><td id="LC250" class="css-1dcdqdg"><code>      uniform float uTime;
</code></td></tr><tr><td id="L251" class="css-a4x74f"><span>251</span></td><td id="LC251" class="css-1dcdqdg"><code>      <span class="code-keyword">void</span> main() {
</code></td></tr><tr><td id="L252" class="css-a4x74f"><span>252</span></td><td id="LC252" class="css-1dcdqdg"><code>        vec2 uv = gl_FragCoord.xy / resolution.xy;
</code></td></tr><tr><td id="L253" class="css-a4x74f"><span>253</span></td><td id="LC253" class="css-1dcdqdg"><code>        vec4 pos = texture2D(texturePosition, uv);
</code></td></tr><tr><td id="L254" class="css-a4x74f"><span>254</span></td><td id="LC254" class="css-1dcdqdg"><code>        vec4 vel = texture2D(textureVelocity, uv);
</code></td></tr><tr><td id="L255" class="css-a4x74f"><span>255</span></td><td id="LC255" class="css-1dcdqdg"><code>        pos.xyz += vel.xyz;
</code></td></tr><tr><td id="L256" class="css-a4x74f"><span>256</span></td><td id="LC256" class="css-1dcdqdg"><code>        gl_FragColor = pos;
</code></td></tr><tr><td id="L257" class="css-a4x74f"><span>257</span></td><td id="LC257" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L258" class="css-a4x74f"><span>258</span></td><td id="LC258" class="css-1dcdqdg"><code>    <span class="code-string">`,r),i.setVariableDependencies(n,[c,n]),i.setVariableDependencies(c,[c,n]),Object.keys(I).forEach(b=&gt;{n.material.uniforms[b]=F[b],c.material.uniforms[b]=F[b]});const C=i.init();if(C!==null)throw new Error(C)}function L(m){e.background!==void 0&amp;&amp;(m.background=new q(e.background)),Ne(m,e.lights),D=new ne(2,2,e.wingsWidthSegments,e.wingsHeightSegments).rotateX(Math.PI/2);const C=new Float32Array(t*2),b=new Float32Array(t);let z=0,T=0;for(let f=0;f&lt;o;f++)for(let U=0;U&lt;o;U++)C[z++]=U/(o-1),C[z++]=f/(o-1),b[T++]=Math.floor(Math.random()*e.textureCount);D.setAttribute("gpuUv",new le(C,2)),D.setAttribute("mapIndex",new le(b,1));const P={side:Ce,...e.materialParams};switch(e.texture&amp;&amp;(P.map=new ot().load(e.texture)),P.onBeforeCompile=f=&gt;{f.defines={COMPUTE_NORMALS:e.material!=="basic",WINGS_WIDTH_SEGMENTS:e.wingsWidthSegments,WINGS_HEIGHT_SEGMENTS:e.wingsHeightSegments,WINGS_DX:(2/e.wingsWidthSegments).toFixed(10),WINGS_DZ:(2/e.wingsHeightSegments).toFixed(10),TEXTURE_COUNT:e.textureCount.toFixed(10)},Object.keys(F).forEach(U=&gt;{f.uniforms[U]=F[U]}),f.vertexShader=`</span>
</code></td></tr><tr><td id="L259" class="css-a4x74f"><span>259</span></td><td id="LC259" class="css-1dcdqdg"><code>        uniform sampler2D uTexturePosition;
</code></td></tr><tr><td id="L260" class="css-a4x74f"><span>260</span></td><td id="LC260" class="css-1dcdqdg"><code>        uniform sampler2D uOldTexturePosition;
</code></td></tr><tr><td id="L261" class="css-a4x74f"><span>261</span></td><td id="LC261" class="css-1dcdqdg"><code>        uniform sampler2D uTextureVelocity;
</code></td></tr><tr><td id="L262" class="css-a4x74f"><span>262</span></td><td id="LC262" class="css-1dcdqdg"><code>        uniform vec3 uWingsScale;
</code></td></tr><tr><td id="L263" class="css-a4x74f"><span>263</span></td><td id="LC263" class="css-1dcdqdg"><code>        uniform float uWingsDisplacementScale;
</code></td></tr><tr><td id="L264" class="css-a4x74f"><span>264</span></td><td id="LC264" class="css-1dcdqdg"><code>        attribute vec2 gpuUv;
</code></td></tr><tr><td id="L265" class="css-a4x74f"><span>265</span></td><td id="LC265" class="css-1dcdqdg"><code>        attribute float mapIndex;
</code></td></tr><tr><td id="L266" class="css-a4x74f"><span>266</span></td><td id="LC266" class="css-1dcdqdg"><code>        varying vec4 vPos;
</code></td></tr><tr><td id="L267" class="css-a4x74f"><span>267</span></td><td id="LC267" class="css-1dcdqdg"><code>        varying vec4 vVel;
</code></td></tr><tr><td id="L268" class="css-a4x74f"><span>268</span></td><td id="LC268" class="css-1dcdqdg"><code>        varying float vMapIndex;
</code></td></tr><tr><td id="L269" class="css-a4x74f"><span>269</span></td><td id="LC269" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L270" class="css-a4x74f"><span>270</span></td><td id="LC270" class="css-1dcdqdg"><code>        mat3 lookAt(vec3 origin, vec3 target, vec3 up) {
</code></td></tr><tr><td id="L271" class="css-a4x74f"><span>271</span></td><td id="LC271" class="css-1dcdqdg"><code>          vec3 z = target - origin;
</code></td></tr><tr><td id="L272" class="css-a4x74f"><span>272</span></td><td id="LC272" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (z.x * z.x + z.y * z.y + z.z * z.z == <span class="code-number">0.0</span>) { z.z = <span class="code-number">1.0</span>; }
</code></td></tr><tr><td id="L273" class="css-a4x74f"><span>273</span></td><td id="LC273" class="css-1dcdqdg"><code>          z = normalize(z);
</code></td></tr><tr><td id="L274" class="css-a4x74f"><span>274</span></td><td id="LC274" class="css-1dcdqdg"><code>          vec3 x = cross(up, z);
</code></td></tr><tr><td id="L275" class="css-a4x74f"><span>275</span></td><td id="LC275" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (x.x * x.x + x.y * x.y + x.z * x.z == <span class="code-number">0.0</span>) {
</code></td></tr><tr><td id="L276" class="css-a4x74f"><span>276</span></td><td id="LC276" class="css-1dcdqdg"><code>            <span class="code-keyword">if</span> (abs(up.z) == <span class="code-number">1.0</span>) { z.x += <span class="code-number">0.0001</span>; }
</code></td></tr><tr><td id="L277" class="css-a4x74f"><span>277</span></td><td id="LC277" class="css-1dcdqdg"><code>            <span class="code-keyword">else</span> { z.z += <span class="code-number">0.0001</span>; }
</code></td></tr><tr><td id="L278" class="css-a4x74f"><span>278</span></td><td id="LC278" class="css-1dcdqdg"><code>            x = cross(up, z);
</code></td></tr><tr><td id="L279" class="css-a4x74f"><span>279</span></td><td id="LC279" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L280" class="css-a4x74f"><span>280</span></td><td id="LC280" class="css-1dcdqdg"><code>          x = normalize(x);
</code></td></tr><tr><td id="L281" class="css-a4x74f"><span>281</span></td><td id="LC281" class="css-1dcdqdg"><code>          vec3 y = cross(z, x);
</code></td></tr><tr><td id="L282" class="css-a4x74f"><span>282</span></td><td id="LC282" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> mat3(x, y, z);
</code></td></tr><tr><td id="L283" class="css-a4x74f"><span>283</span></td><td id="LC283" class="css-1dcdqdg"><code>        }
</code></td></tr><tr><td id="L284" class="css-a4x74f"><span>284</span></td><td id="LC284" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L285" class="css-a4x74f"><span>285</span></td><td id="LC285" class="css-1dcdqdg"><code>        mat4 iMatrix(vec3 pos, mat3 rmat, vec3 scale) {
</code></td></tr><tr><td id="L286" class="css-a4x74f"><span>286</span></td><td id="LC286" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> mat4(
</code></td></tr><tr><td id="L287" class="css-a4x74f"><span>287</span></td><td id="LC287" class="css-1dcdqdg"><code>            rmat[<span class="code-number">0</span>][<span class="code-number">0</span>] * scale.x, rmat[<span class="code-number">0</span>][<span class="code-number">1</span>] * scale.x, rmat[<span class="code-number">0</span>][<span class="code-number">2</span>] * scale.x, <span class="code-number">0.0</span>,
</code></td></tr><tr><td id="L288" class="css-a4x74f"><span>288</span></td><td id="LC288" class="css-1dcdqdg"><code>            rmat[<span class="code-number">1</span>][<span class="code-number">0</span>] * scale.y, rmat[<span class="code-number">1</span>][<span class="code-number">1</span>] * scale.y, rmat[<span class="code-number">1</span>][<span class="code-number">2</span>] * scale.y, <span class="code-number">0.0</span>,
</code></td></tr><tr><td id="L289" class="css-a4x74f"><span>289</span></td><td id="LC289" class="css-1dcdqdg"><code>            rmat[<span class="code-number">2</span>][<span class="code-number">0</span>] * scale.z, rmat[<span class="code-number">2</span>][<span class="code-number">1</span>] * scale.z, rmat[<span class="code-number">2</span>][<span class="code-number">2</span>] * scale.z, <span class="code-number">0.0</span>,
</code></td></tr><tr><td id="L290" class="css-a4x74f"><span>290</span></td><td id="LC290" class="css-1dcdqdg"><code>            pos.x, pos.y, pos.z, <span class="code-number">1.0</span>
</code></td></tr><tr><td id="L291" class="css-a4x74f"><span>291</span></td><td id="LC291" class="css-1dcdqdg"><code>          );
</code></td></tr><tr><td id="L292" class="css-a4x74f"><span>292</span></td><td id="LC292" class="css-1dcdqdg"><code>        }
</code></td></tr><tr><td id="L293" class="css-a4x74f"><span>293</span></td><td id="LC293" class="css-1dcdqdg"><code>      <span class="code-string">`+f.vertexShader,f.vertexShader=f.vertexShader.replace("#include &lt;defaultnormal_vertex&gt;",""),f.vertexShader=f.vertexShader.replace("#include &lt;normal_vertex&gt;",""),f.vertexShader=f.vertexShader.replace("#include &lt;begin_vertex&gt;",`</span>
</code></td></tr><tr><td id="L294" class="css-a4x74f"><span>294</span></td><td id="LC294" class="css-1dcdqdg"><code>        vPos = texture2D(uTexturePosition, gpuUv);
</code></td></tr><tr><td id="L295" class="css-a4x74f"><span>295</span></td><td id="LC295" class="css-1dcdqdg"><code>        vec4 oldPos = texture2D(uOldTexturePosition, gpuUv);
</code></td></tr><tr><td id="L296" class="css-a4x74f"><span>296</span></td><td id="LC296" class="css-1dcdqdg"><code>        vVel = texture2D(uTextureVelocity, gpuUv);
</code></td></tr><tr><td id="L297" class="css-a4x74f"><span>297</span></td><td id="LC297" class="css-1dcdqdg"><code>        vMapIndex = float(mapIndex);
</code></td></tr><tr><td id="L298" class="css-a4x74f"><span>298</span></td><td id="LC298" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L299" class="css-a4x74f"><span>299</span></td><td id="LC299" class="css-1dcdqdg"><code>        mat3 rmat = lookAt(oldPos.xyz, vPos.xyz, vec3(<span class="code-number">0</span>, <span class="code-number">1</span>, <span class="code-number">0</span>));
</code></td></tr><tr><td id="L300" class="css-a4x74f"><span>300</span></td><td id="LC300" class="css-1dcdqdg"><code>        mat4 im = iMatrix(vPos.xyz, rmat, (<span class="code-number">0.5</span> + vPos.w) * uWingsScale);
</code></td></tr><tr><td id="L301" class="css-a4x74f"><span>301</span></td><td id="LC301" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L302" class="css-a4x74f"><span>302</span></td><td id="LC302" class="css-1dcdqdg"><code>        vec3 transformed = vec3(position);
</code></td></tr><tr><td id="L303" class="css-a4x74f"><span>303</span></td><td id="LC303" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L304" class="css-a4x74f"><span>304</span></td><td id="LC304" class="css-1dcdqdg"><code>        #ifdef COMPUTE_NORMALS
</code></td></tr><tr><td id="L305" class="css-a4x74f"><span>305</span></td><td id="LC305" class="css-1dcdqdg"><code>          vec3 transformedNormal = objectNormal; 
</code></td></tr><tr><td id="L306" class="css-a4x74f"><span>306</span></td><td id="LC306" class="css-1dcdqdg"><code>        #endif
</code></td></tr><tr><td id="L307" class="css-a4x74f"><span>307</span></td><td id="LC307" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L308" class="css-a4x74f"><span>308</span></td><td id="LC308" class="css-1dcdqdg"><code>        float dx = abs(transformed.x);
</code></td></tr><tr><td id="L309" class="css-a4x74f"><span>309</span></td><td id="LC309" class="css-1dcdqdg"><code>        <span class="code-keyword">if</span> (dx &gt; <span class="code-number">0.0</span>) {
</code></td></tr><tr><td id="L310" class="css-a4x74f"><span>310</span></td><td id="LC310" class="css-1dcdqdg"><code>          float sdx = smoothstep(<span class="code-number">0.0</span>, <span class="code-number">1.0</span> + WINGS_DX, dx);
</code></td></tr><tr><td id="L311" class="css-a4x74f"><span>311</span></td><td id="LC311" class="css-1dcdqdg"><code>          #if WINGS_HEIGHT_SEGMENTS &gt; 1
</code></td></tr><tr><td id="L312" class="css-a4x74f"><span>312</span></td><td id="LC312" class="css-1dcdqdg"><code>            float dz = transformed.z + <span class="code-number">1.0</span>;
</code></td></tr><tr><td id="L313" class="css-a4x74f"><span>313</span></td><td id="LC313" class="css-1dcdqdg"><code>            float sdz = smoothstep(<span class="code-number">0.0</span>, <span class="code-number">2.0</span> + WINGS_DZ, dz);
</code></td></tr><tr><td id="L314" class="css-a4x74f"><span>314</span></td><td id="LC314" class="css-1dcdqdg"><code>            transformed.y = sin(vVel.w - sdx + sdz) * sdx * uWingsDisplacementScale;
</code></td></tr><tr><td id="L315" class="css-a4x74f"><span>315</span></td><td id="LC315" class="css-1dcdqdg"><code>          #else
</code></td></tr><tr><td id="L316" class="css-a4x74f"><span>316</span></td><td id="LC316" class="css-1dcdqdg"><code>            transformed.y = sin(vVel.w - sdx) * sdx * uWingsDisplacementScale;
</code></td></tr><tr><td id="L317" class="css-a4x74f"><span>317</span></td><td id="LC317" class="css-1dcdqdg"><code>          #endif
</code></td></tr><tr><td id="L318" class="css-a4x74f"><span>318</span></td><td id="LC318" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L319" class="css-a4x74f"><span>319</span></td><td id="LC319" class="css-1dcdqdg"><code>          #ifdef COMPUTE_NORMALS
</code></td></tr><tr><td id="L320" class="css-a4x74f"><span>320</span></td><td id="LC320" class="css-1dcdqdg"><code>            #if WINGS_HEIGHT_SEGMENTS &gt; 1
</code></td></tr><tr><td id="L321" class="css-a4x74f"><span>321</span></td><td id="LC321" class="css-1dcdqdg"><code>              float s = sign(transformed.x);
</code></td></tr><tr><td id="L322" class="css-a4x74f"><span>322</span></td><td id="LC322" class="css-1dcdqdg"><code>              float sdx1 = smoothstep(<span class="code-number">0.0</span>, <span class="code-number">1.0</span> + WINGS_DX, dx + WINGS_DX);
</code></td></tr><tr><td id="L323" class="css-a4x74f"><span>323</span></td><td id="LC323" class="css-1dcdqdg"><code>              float sdz1 = smoothstep(<span class="code-number">0.0</span>, <span class="code-number">2.0</span> + WINGS_DZ, dz + WINGS_DZ);
</code></td></tr><tr><td id="L324" class="css-a4x74f"><span>324</span></td><td id="LC324" class="css-1dcdqdg"><code>              float dvy1 = sin(vVel.w - sdx + sdz1) * sdx * uWingsDisplacementScale - transformed.y;
</code></td></tr><tr><td id="L325" class="css-a4x74f"><span>325</span></td><td id="LC325" class="css-1dcdqdg"><code>              float dvy2 = sin(vVel.w - sdx1 + sdz) * sdx1 * uWingsDisplacementScale - transformed.y;
</code></td></tr><tr><td id="L326" class="css-a4x74f"><span>326</span></td><td id="LC326" class="css-1dcdqdg"><code>              vec3 v1 = vec3(<span class="code-number">0.0</span>, dvy1, s * WINGS_DZ);
</code></td></tr><tr><td id="L327" class="css-a4x74f"><span>327</span></td><td id="LC327" class="css-1dcdqdg"><code>              vec3 v2 = vec3(s * WINGS_DX, dvy2, <span class="code-number">0.0</span>);
</code></td></tr><tr><td id="L328" class="css-a4x74f"><span>328</span></td><td id="LC328" class="css-1dcdqdg"><code>              transformedNormal = -normalize(cross(v1, v2));
</code></td></tr><tr><td id="L329" class="css-a4x74f"><span>329</span></td><td id="LC329" class="css-1dcdqdg"><code>            #else
</code></td></tr><tr><td id="L330" class="css-a4x74f"><span>330</span></td><td id="LC330" class="css-1dcdqdg"><code>              float s = sign(transformed.x);
</code></td></tr><tr><td id="L331" class="css-a4x74f"><span>331</span></td><td id="LC331" class="css-1dcdqdg"><code>              float sdx1 = smoothstep(<span class="code-number">0.0</span>, <span class="code-number">1.0</span> + WINGS_DX, dx + WINGS_DX);
</code></td></tr><tr><td id="L332" class="css-a4x74f"><span>332</span></td><td id="LC332" class="css-1dcdqdg"><code>              float dvy1 = sin(vVel.w - sdx1) * sdx * uWingsDisplacementScale - transformed.y;
</code></td></tr><tr><td id="L333" class="css-a4x74f"><span>333</span></td><td id="LC333" class="css-1dcdqdg"><code>              vec3 v1 = vec3(<span class="code-number">0.0</span>, <span class="code-number">0.0</span>, s);
</code></td></tr><tr><td id="L334" class="css-a4x74f"><span>334</span></td><td id="LC334" class="css-1dcdqdg"><code>              vec3 v2 = vec3(s * WINGS_DX, dvy1, <span class="code-number">0.0</span>);
</code></td></tr><tr><td id="L335" class="css-a4x74f"><span>335</span></td><td id="LC335" class="css-1dcdqdg"><code>              transformedNormal = -normalize(cross(v1, v2));
</code></td></tr><tr><td id="L336" class="css-a4x74f"><span>336</span></td><td id="LC336" class="css-1dcdqdg"><code>            #endif  
</code></td></tr><tr><td id="L337" class="css-a4x74f"><span>337</span></td><td id="LC337" class="css-1dcdqdg"><code>          #endif
</code></td></tr><tr><td id="L338" class="css-a4x74f"><span>338</span></td><td id="LC338" class="css-1dcdqdg"><code>        }
</code></td></tr><tr><td id="L339" class="css-a4x74f"><span>339</span></td><td id="LC339" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L340" class="css-a4x74f"><span>340</span></td><td id="LC340" class="css-1dcdqdg"><code>        #ifdef COMPUTE_NORMALS
</code></td></tr><tr><td id="L341" class="css-a4x74f"><span>341</span></td><td id="LC341" class="css-1dcdqdg"><code>          #ifdef USE_INSTANCING
</code></td></tr><tr><td id="L342" class="css-a4x74f"><span>342</span></td><td id="LC342" class="css-1dcdqdg"><code>            mat3 m = mat3( im );
</code></td></tr><tr><td id="L343" class="css-a4x74f"><span>343</span></td><td id="LC343" class="css-1dcdqdg"><code>            transformedNormal /= vec3( dot( m[ <span class="code-number">0</span> ], m[ <span class="code-number">0</span> ] ), dot( m[ <span class="code-number">1</span> ], m[ <span class="code-number">1</span> ] ), dot( m[ <span class="code-number">2</span> ], m[ <span class="code-number">2</span> ] ) );
</code></td></tr><tr><td id="L344" class="css-a4x74f"><span>344</span></td><td id="LC344" class="css-1dcdqdg"><code>            transformedNormal = m * transformedNormal;
</code></td></tr><tr><td id="L345" class="css-a4x74f"><span>345</span></td><td id="LC345" class="css-1dcdqdg"><code>          #endif
</code></td></tr><tr><td id="L346" class="css-a4x74f"><span>346</span></td><td id="LC346" class="css-1dcdqdg"><code>          transformedNormal = normalMatrix * transformedNormal;
</code></td></tr><tr><td id="L347" class="css-a4x74f"><span>347</span></td><td id="LC347" class="css-1dcdqdg"><code>          #ifdef FLIP_SIDED
</code></td></tr><tr><td id="L348" class="css-a4x74f"><span>348</span></td><td id="LC348" class="css-1dcdqdg"><code>            transformedNormal = - transformedNormal;
</code></td></tr><tr><td id="L349" class="css-a4x74f"><span>349</span></td><td id="LC349" class="css-1dcdqdg"><code>          #endif
</code></td></tr><tr><td id="L350" class="css-a4x74f"><span>350</span></td><td id="LC350" class="css-1dcdqdg"><code>          #ifdef USE_TANGENT
</code></td></tr><tr><td id="L351" class="css-a4x74f"><span>351</span></td><td id="LC351" class="css-1dcdqdg"><code>            vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, <span class="code-number">0.0</span> ) ).xyz;
</code></td></tr><tr><td id="L352" class="css-a4x74f"><span>352</span></td><td id="LC352" class="css-1dcdqdg"><code>            #ifdef FLIP_SIDED
</code></td></tr><tr><td id="L353" class="css-a4x74f"><span>353</span></td><td id="LC353" class="css-1dcdqdg"><code>              transformedTangent = - transformedTangent;
</code></td></tr><tr><td id="L354" class="css-a4x74f"><span>354</span></td><td id="LC354" class="css-1dcdqdg"><code>            #endif
</code></td></tr><tr><td id="L355" class="css-a4x74f"><span>355</span></td><td id="LC355" class="css-1dcdqdg"><code>          #endif
</code></td></tr><tr><td id="L356" class="css-a4x74f"><span>356</span></td><td id="LC356" class="css-1dcdqdg"><code>          #ifndef FLAT_SHADED
</code></td></tr><tr><td id="L357" class="css-a4x74f"><span>357</span></td><td id="LC357" class="css-1dcdqdg"><code>            vNormal = normalize( transformedNormal );
</code></td></tr><tr><td id="L358" class="css-a4x74f"><span>358</span></td><td id="LC358" class="css-1dcdqdg"><code>            #ifdef USE_TANGENT
</code></td></tr><tr><td id="L359" class="css-a4x74f"><span>359</span></td><td id="LC359" class="css-1dcdqdg"><code>              vTangent = normalize( transformedTangent );
</code></td></tr><tr><td id="L360" class="css-a4x74f"><span>360</span></td><td id="LC360" class="css-1dcdqdg"><code>              vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
</code></td></tr><tr><td id="L361" class="css-a4x74f"><span>361</span></td><td id="LC361" class="css-1dcdqdg"><code>            #endif
</code></td></tr><tr><td id="L362" class="css-a4x74f"><span>362</span></td><td id="LC362" class="css-1dcdqdg"><code>          #endif
</code></td></tr><tr><td id="L363" class="css-a4x74f"><span>363</span></td><td id="LC363" class="css-1dcdqdg"><code>        #endif
</code></td></tr><tr><td id="L364" class="css-a4x74f"><span>364</span></td><td id="LC364" class="css-1dcdqdg"><code>      <span class="code-string">`),f.vertexShader=f.vertexShader.replace("#include &lt;project_vertex&gt;",`</span>
</code></td></tr><tr><td id="L365" class="css-a4x74f"><span>365</span></td><td id="LC365" class="css-1dcdqdg"><code>        vec4 mvPosition = vec4( transformed, <span class="code-number">1.0</span> );
</code></td></tr><tr><td id="L366" class="css-a4x74f"><span>366</span></td><td id="LC366" class="css-1dcdqdg"><code>        #ifdef USE_INSTANCING
</code></td></tr><tr><td id="L367" class="css-a4x74f"><span>367</span></td><td id="LC367" class="css-1dcdqdg"><code>          mvPosition = im * mvPosition;
</code></td></tr><tr><td id="L368" class="css-a4x74f"><span>368</span></td><td id="LC368" class="css-1dcdqdg"><code>        #endif
</code></td></tr><tr><td id="L369" class="css-a4x74f"><span>369</span></td><td id="LC369" class="css-1dcdqdg"><code>        mvPosition = modelViewMatrix * mvPosition;
</code></td></tr><tr><td id="L370" class="css-a4x74f"><span>370</span></td><td id="LC370" class="css-1dcdqdg"><code>        gl_Position = projectionMatrix * mvPosition;
</code></td></tr><tr><td id="L371" class="css-a4x74f"><span>371</span></td><td id="LC371" class="css-1dcdqdg"><code>      <span class="code-string">`),f.fragmentShader=`</span>
</code></td></tr><tr><td id="L372" class="css-a4x74f"><span>372</span></td><td id="LC372" class="css-1dcdqdg"><code>        varying float vMapIndex;
</code></td></tr><tr><td id="L373" class="css-a4x74f"><span>373</span></td><td id="LC373" class="css-1dcdqdg"><code>      <span class="code-string">`+f.fragmentShader,f.fragmentShader=f.fragmentShader.replace("#include &lt;map_fragment&gt;",`</span>
</code></td></tr><tr><td id="L374" class="css-a4x74f"><span>374</span></td><td id="LC374" class="css-1dcdqdg"><code>        #ifdef USE_MAP
</code></td></tr><tr><td id="L375" class="css-a4x74f"><span>375</span></td><td id="LC375" class="css-1dcdqdg"><code>          vec2 uv = vUv;
</code></td></tr><tr><td id="L376" class="css-a4x74f"><span>376</span></td><td id="LC376" class="css-1dcdqdg"><code>          uv.x = (vMapIndex + vUv.x) / TEXTURE_COUNT;
</code></td></tr><tr><td id="L377" class="css-a4x74f"><span>377</span></td><td id="LC377" class="css-1dcdqdg"><code>          vec4 sampledDiffuseColor = texture2D(map, uv);
</code></td></tr><tr><td id="L378" class="css-a4x74f"><span>378</span></td><td id="LC378" class="css-1dcdqdg"><code>          diffuseColor *= sampledDiffuseColor;
</code></td></tr><tr><td id="L379" class="css-a4x74f"><span>379</span></td><td id="LC379" class="css-1dcdqdg"><code>        #endif
</code></td></tr><tr><td id="L380" class="css-a4x74f"><span>380</span></td><td id="LC380" class="css-1dcdqdg"><code>      <span class="code-string">`)},e.material){case"standard":V=new Ee(P);break;case"phong":V=new it(P);break;default:V=new Me(P)}A=new De(D,V,t),k(e.colors),m.add(A)}function k(m){if(Array.isArray(m)&amp;&amp;m.length&gt;1){const C=ce(m);for(let b=0;b&lt;t;b++)A.setColorAt(b,C.getColorAt(b/t));A.instanceColor.needsUpdate=!0}}function W(m,C){const b=m.image.data,z=C.image.data;for(let T=0,P=b.length;T&lt;P;T+=4)b[T+0]=ie(150),b[T+1]=ie(150),b[T+2]=ie(150),b[T+3]=$t(.1,1),z[T+0]=ie(.5),z[T+1]=ie(.5),z[T+2]=ie(.5),z[T+3]=0}}const ye={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`</span>
</code></td></tr><tr><td id="L381" class="css-a4x74f"><span>381</span></td><td id="LC381" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L382" class="css-a4x74f"><span>382</span></td><td id="LC382" class="css-1dcdqdg"><code>		varying vec2 vUv;
</code></td></tr><tr><td id="L383" class="css-a4x74f"><span>383</span></td><td id="LC383" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L384" class="css-a4x74f"><span>384</span></td><td id="LC384" class="css-1dcdqdg"><code>		<span class="code-keyword">void</span> main() {
</code></td></tr><tr><td id="L385" class="css-a4x74f"><span>385</span></td><td id="LC385" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L386" class="css-a4x74f"><span>386</span></td><td id="LC386" class="css-1dcdqdg"><code>			vUv = uv;
</code></td></tr><tr><td id="L387" class="css-a4x74f"><span>387</span></td><td id="LC387" class="css-1dcdqdg"><code>			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, <span class="code-number">1.0</span> );
</code></td></tr><tr><td id="L388" class="css-a4x74f"><span>388</span></td><td id="LC388" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L389" class="css-a4x74f"><span>389</span></td><td id="LC389" class="css-1dcdqdg"><code>		}<span class="code-string">`,fragmentShader:`</span>
</code></td></tr><tr><td id="L390" class="css-a4x74f"><span>390</span></td><td id="LC390" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L391" class="css-a4x74f"><span>391</span></td><td id="LC391" class="css-1dcdqdg"><code>		uniform float opacity;
</code></td></tr><tr><td id="L392" class="css-a4x74f"><span>392</span></td><td id="LC392" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L393" class="css-a4x74f"><span>393</span></td><td id="LC393" class="css-1dcdqdg"><code>		uniform sampler2D tDiffuse;
</code></td></tr><tr><td id="L394" class="css-a4x74f"><span>394</span></td><td id="LC394" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L395" class="css-a4x74f"><span>395</span></td><td id="LC395" class="css-1dcdqdg"><code>		varying vec2 vUv;
</code></td></tr><tr><td id="L396" class="css-a4x74f"><span>396</span></td><td id="LC396" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L397" class="css-a4x74f"><span>397</span></td><td id="LC397" class="css-1dcdqdg"><code>		<span class="code-keyword">void</span> main() {
</code></td></tr><tr><td id="L398" class="css-a4x74f"><span>398</span></td><td id="LC398" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L399" class="css-a4x74f"><span>399</span></td><td id="LC399" class="css-1dcdqdg"><code>			gl_FragColor = texture2D( tDiffuse, vUv );
</code></td></tr><tr><td id="L400" class="css-a4x74f"><span>400</span></td><td id="LC400" class="css-1dcdqdg"><code>			gl_FragColor.a *= opacity;
</code></td></tr><tr><td id="L401" class="css-a4x74f"><span>401</span></td><td id="LC401" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L402" class="css-a4x74f"><span>402</span></td><td id="LC402" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L403" class="css-a4x74f"><span>403</span></td><td id="LC403" class="css-1dcdqdg"><code>		}<span class="code-string">`};class ue{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}const eo=new ze(-1,1,1,-1,0,1),Ie=new pe;Ie.setAttribute("position",new te([-1,3,0,-1,-1,0,3,-1,0],3)),Ie.setAttribute("uv",new te([0,2,0,0,2,0],2));class lt{constructor(e){this._mesh=new fe(Ie,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,eo)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class ct extends ue{constructor(e,o){super();this.textureID=o!==void 0?o:"tDiffuse",e instanceof Y?(this.uniforms=e.uniforms,this.material=e):e&amp;&amp;(this.uniforms=_e.clone(e.uniforms),this.material=new Y({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new lt(this.material)}render(e,o,t){this.uniforms[this.textureID]&amp;&amp;(this.uniforms[this.textureID].value=t.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(o),this.clear&amp;&amp;e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}}class ut extends ue{constructor(e,o){super();this.scene=e,this.camera=o,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,o,t){const i=e.getContext(),r=e.state;r.buffers.color.setMask(!1),r.buffers.depth.setMask(!1),r.buffers.color.setLocked(!0),r.buffers.depth.setLocked(!0);let d,n;this.inverse?(d=0,n=1):(d=1,n=0),r.buffers.stencil.setTest(!0),r.buffers.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),r.buffers.stencil.setFunc(i.ALWAYS,d,4294967295),r.buffers.stencil.setClear(n),r.buffers.stencil.setLocked(!0),e.setRenderTarget(t),this.clear&amp;&amp;e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(o),this.clear&amp;&amp;e.clear(),e.render(this.scene,this.camera),r.buffers.color.setLocked(!1),r.buffers.depth.setLocked(!1),r.buffers.stencil.setLocked(!1),r.buffers.stencil.setFunc(i.EQUAL,1,4294967295),r.buffers.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),r.buffers.stencil.setLocked(!0)}}class to extends ue{constructor(){super();this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class oo{constructor(e,o){if(this.renderer=e,o===void 0){const t=e.getSize(new _);this._pixelRatio=e.getPixelRatio(),this._width=t.width,this._height=t.height,o=new se(this._width*this._pixelRatio,this._height*this._pixelRatio),o.texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=o.width,this._height=o.height;this.renderTarget1=o,this.renderTarget2=o.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],ye===void 0&amp;&amp;console.error("THREE.EffectComposer relies on CopyShader"),ct===void 0&amp;&amp;console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new ct(ye),this.clock=new At}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,o){this.passes.splice(o,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const o=this.passes.indexOf(e);o!==-1&amp;&amp;this.passes.splice(o,1)}isLastEnabledPass(e){for(let o=e+1;o&lt;this.passes.length;o++)if(this.passes[o].enabled)return!1;return!0}render(e){e===void 0&amp;&amp;(e=this.clock.getDelta());const o=this.renderer.getRenderTarget();let t=!1;for(let i=0,r=this.passes.length;i&lt;r;i++){const d=this.passes[i];if(d.enabled!==!1){if(d.renderToScreen=this.renderToScreen&amp;&amp;this.isLastEnabledPass(i),d.render(this.renderer,this.writeBuffer,this.readBuffer,e,t),d.needsSwap){if(t){const n=this.renderer.getContext(),c=this.renderer.state.buffers.stencil;c.setFunc(n.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),c.setFunc(n.EQUAL,1,4294967295)}this.swapBuffers()}ut!==void 0&amp;&amp;(d instanceof ut?t=!0:d instanceof to&amp;&amp;(t=!1))}}this.renderer.setRenderTarget(o)}reset(e){if(e===void 0){const o=this.renderer.getSize(new _);this._pixelRatio=this.renderer.getPixelRatio(),this._width=o.width,this._height=o.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,o){this._width=e,this._height=o;const t=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(t,i),this.renderTarget2.setSize(t,i);for(let r=0;r&lt;this.passes.length;r++)this.passes[r].setSize(t,i)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}}new ze(-1,1,1,-1,0,1);const dt=new pe;dt.setAttribute("position",new te([-1,3,0,-1,-1,0,3,-1,0],3)),dt.setAttribute("uv",new te([0,2,0,0,2,0],2));class io extends ue{constructor(e,o,t,i,r){super();this.scene=e,this.camera=o,this.overrideMaterial=t,this.clearColor=i,this.clearAlpha=r!==void 0?r:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new q}render(e,o,t){const i=e.autoClear;e.autoClear=!1;let r,d;this.overrideMaterial!==void 0&amp;&amp;(d=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&amp;&amp;(e.getClearColor(this._oldClearColor),r=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&amp;&amp;e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:t),this.clear&amp;&amp;e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&amp;&amp;e.setClearColor(this._oldClearColor,r),this.overrideMaterial!==void 0&amp;&amp;(this.scene.overrideMaterial=d),e.autoClear=i}}const mt={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new q(0)},defaultOpacity:{value:0}},vertexShader:`</span>
</code></td></tr><tr><td id="L404" class="css-a4x74f"><span>404</span></td><td id="LC404" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L405" class="css-a4x74f"><span>405</span></td><td id="LC405" class="css-1dcdqdg"><code>		varying vec2 vUv;
</code></td></tr><tr><td id="L406" class="css-a4x74f"><span>406</span></td><td id="LC406" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L407" class="css-a4x74f"><span>407</span></td><td id="LC407" class="css-1dcdqdg"><code>		<span class="code-keyword">void</span> main() {
</code></td></tr><tr><td id="L408" class="css-a4x74f"><span>408</span></td><td id="LC408" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L409" class="css-a4x74f"><span>409</span></td><td id="LC409" class="css-1dcdqdg"><code>			vUv = uv;
</code></td></tr><tr><td id="L410" class="css-a4x74f"><span>410</span></td><td id="LC410" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L411" class="css-a4x74f"><span>411</span></td><td id="LC411" class="css-1dcdqdg"><code>			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, <span class="code-number">1.0</span> );
</code></td></tr><tr><td id="L412" class="css-a4x74f"><span>412</span></td><td id="LC412" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L413" class="css-a4x74f"><span>413</span></td><td id="LC413" class="css-1dcdqdg"><code>		}<span class="code-string">`,fragmentShader:`</span>
</code></td></tr><tr><td id="L414" class="css-a4x74f"><span>414</span></td><td id="LC414" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L415" class="css-a4x74f"><span>415</span></td><td id="LC415" class="css-1dcdqdg"><code>		uniform sampler2D tDiffuse;
</code></td></tr><tr><td id="L416" class="css-a4x74f"><span>416</span></td><td id="LC416" class="css-1dcdqdg"><code>		uniform vec3 defaultColor;
</code></td></tr><tr><td id="L417" class="css-a4x74f"><span>417</span></td><td id="LC417" class="css-1dcdqdg"><code>		uniform float defaultOpacity;
</code></td></tr><tr><td id="L418" class="css-a4x74f"><span>418</span></td><td id="LC418" class="css-1dcdqdg"><code>		uniform float luminosityThreshold;
</code></td></tr><tr><td id="L419" class="css-a4x74f"><span>419</span></td><td id="LC419" class="css-1dcdqdg"><code>		uniform float smoothWidth;
</code></td></tr><tr><td id="L420" class="css-a4x74f"><span>420</span></td><td id="LC420" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L421" class="css-a4x74f"><span>421</span></td><td id="LC421" class="css-1dcdqdg"><code>		varying vec2 vUv;
</code></td></tr><tr><td id="L422" class="css-a4x74f"><span>422</span></td><td id="LC422" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L423" class="css-a4x74f"><span>423</span></td><td id="LC423" class="css-1dcdqdg"><code>		<span class="code-keyword">void</span> main() {
</code></td></tr><tr><td id="L424" class="css-a4x74f"><span>424</span></td><td id="LC424" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L425" class="css-a4x74f"><span>425</span></td><td id="LC425" class="css-1dcdqdg"><code>			vec4 texel = texture2D( tDiffuse, vUv );
</code></td></tr><tr><td id="L426" class="css-a4x74f"><span>426</span></td><td id="LC426" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L427" class="css-a4x74f"><span>427</span></td><td id="LC427" class="css-1dcdqdg"><code>			vec3 luma = vec3( <span class="code-number">0.299</span>, <span class="code-number">0.587</span>, <span class="code-number">0.114</span> );
</code></td></tr><tr><td id="L428" class="css-a4x74f"><span>428</span></td><td id="LC428" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L429" class="css-a4x74f"><span>429</span></td><td id="LC429" class="css-1dcdqdg"><code>			float v = dot( texel.xyz, luma );
</code></td></tr><tr><td id="L430" class="css-a4x74f"><span>430</span></td><td id="LC430" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L431" class="css-a4x74f"><span>431</span></td><td id="LC431" class="css-1dcdqdg"><code>			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );
</code></td></tr><tr><td id="L432" class="css-a4x74f"><span>432</span></td><td id="LC432" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L433" class="css-a4x74f"><span>433</span></td><td id="LC433" class="css-1dcdqdg"><code>			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );
</code></td></tr><tr><td id="L434" class="css-a4x74f"><span>434</span></td><td id="LC434" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L435" class="css-a4x74f"><span>435</span></td><td id="LC435" class="css-1dcdqdg"><code>			gl_FragColor = mix( outputColor, texel, alpha );
</code></td></tr><tr><td id="L436" class="css-a4x74f"><span>436</span></td><td id="LC436" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L437" class="css-a4x74f"><span>437</span></td><td id="LC437" class="css-1dcdqdg"><code>		}<span class="code-string">`};class re extends ue{constructor(e,o,t,i){super();this.strength=o!==void 0?o:1,this.radius=t,this.threshold=i,this.resolution=e!==void 0?new _(e.x,e.y):new _(256,256),this.clearColor=new q(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let r=Math.round(this.resolution.x/2),d=Math.round(this.resolution.y/2);this.renderTargetBright=new se(r,d),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let v=0;v&lt;this.nMips;v++){const w=new se(r,d);w.texture.name="UnrealBloomPass.h"+v,w.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(w);const M=new se(r,d);M.texture.name="UnrealBloomPass.v"+v,M.texture.generateMipmaps=!1,this.renderTargetsVertical.push(M),r=Math.round(r/2),d=Math.round(d/2)}mt===void 0&amp;&amp;console.error("THREE.UnrealBloomPass relies on LuminosityHighPassShader");const n=mt;this.highPassUniforms=_e.clone(n.uniforms),this.highPassUniforms.luminosityThreshold.value=i,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new Y({uniforms:this.highPassUniforms,vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,defines:{}}),this.separableBlurMaterials=[];const c=[3,5,7,9,11];r=Math.round(this.resolution.x/2),d=Math.round(this.resolution.y/2);for(let v=0;v&lt;this.nMips;v++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(c[v])),this.separableBlurMaterials[v].uniforms.texSize.value=new _(r,d),r=Math.round(r/2),d=Math.round(d/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=o,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0;const p=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=p,this.bloomTintColors=[new j(1,1,1),new j(1,1,1),new j(1,1,1),new j(1,1,1),new j(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,ye===void 0&amp;&amp;console.error("THREE.UnrealBloomPass relies on CopyShader");const u=ye;this.copyUniforms=_e.clone(u.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new Y({uniforms:this.copyUniforms,vertexShader:u.vertexShader,fragmentShader:u.fragmentShader,blending:tt,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new q,this.oldClearAlpha=1,this.basic=new Me,this.fsQuad=new lt(null)}dispose(){for(let e=0;e&lt;this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e&lt;this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose()}setSize(e,o){let t=Math.round(e/2),i=Math.round(o/2);this.renderTargetBright.setSize(t,i);for(let r=0;r&lt;this.nMips;r++)this.renderTargetsHorizontal[r].setSize(t,i),this.renderTargetsVertical[r].setSize(t,i),this.separableBlurMaterials[r].uniforms.texSize.value=new _(t,i),t=Math.round(t/2),i=Math.round(i/2)}render(e,o,t,i,r){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const d=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),r&amp;&amp;e.state.buffers.stencil.setTest(!1),this.renderToScreen&amp;&amp;(this.fsQuad.material=this.basic,this.basic.map=t.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=t.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let n=this.renderTargetBright;for(let c=0;c&lt;this.nMips;c++)this.fsQuad.material=this.separableBlurMaterials[c],this.separableBlurMaterials[c].uniforms.colorTexture.value=n.texture,this.separableBlurMaterials[c].uniforms.direction.value=re.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[c]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[c].uniforms.colorTexture.value=this.renderTargetsHorizontal[c].texture,this.separableBlurMaterials[c].uniforms.direction.value=re.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[c]),e.clear(),this.fsQuad.render(e),n=this.renderTargetsVertical[c];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,r&amp;&amp;e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=d}getSeperableBlurMaterial(e){return new Y({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new _(.5,.5)},direction:{value:new _(.5,.5)}},vertexShader:`</span>varying vec2 vUv;
</code></td></tr><tr><td id="L438" class="css-a4x74f"><span>438</span></td><td id="LC438" class="css-1dcdqdg"><code>				<span class="code-keyword">void</span> main() {
</code></td></tr><tr><td id="L439" class="css-a4x74f"><span>439</span></td><td id="LC439" class="css-1dcdqdg"><code>					vUv = uv;
</code></td></tr><tr><td id="L440" class="css-a4x74f"><span>440</span></td><td id="LC440" class="css-1dcdqdg"><code>					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, <span class="code-number">1.0</span> );
</code></td></tr><tr><td id="L441" class="css-a4x74f"><span>441</span></td><td id="LC441" class="css-1dcdqdg"><code>				}`,fragmentShader:`#include &lt;common&gt;
</code></td></tr><tr><td id="L442" class="css-a4x74f"><span>442</span></td><td id="LC442" class="css-1dcdqdg"><code>				varying vec2 vUv;
</code></td></tr><tr><td id="L443" class="css-a4x74f"><span>443</span></td><td id="LC443" class="css-1dcdqdg"><code>				uniform sampler2D colorTexture;
</code></td></tr><tr><td id="L444" class="css-a4x74f"><span>444</span></td><td id="LC444" class="css-1dcdqdg"><code>				uniform vec2 texSize;
</code></td></tr><tr><td id="L445" class="css-a4x74f"><span>445</span></td><td id="LC445" class="css-1dcdqdg"><code>				uniform vec2 direction;
</code></td></tr><tr><td id="L446" class="css-a4x74f"><span>446</span></td><td id="LC446" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L447" class="css-a4x74f"><span>447</span></td><td id="LC447" class="css-1dcdqdg"><code>				float gaussianPdf(<span class="code-keyword">in</span> float x, <span class="code-keyword">in</span> float sigma) {
</code></td></tr><tr><td id="L448" class="css-a4x74f"><span>448</span></td><td id="LC448" class="css-1dcdqdg"><code>					<span class="code-keyword">return</span> <span class="code-number">0.39894</span> * exp( <span class="code-number">-0.5</span> * x * x/( sigma * sigma))/sigma;
</code></td></tr><tr><td id="L449" class="css-a4x74f"><span>449</span></td><td id="LC449" class="css-1dcdqdg"><code>				}
</code></td></tr><tr><td id="L450" class="css-a4x74f"><span>450</span></td><td id="LC450" class="css-1dcdqdg"><code>				<span class="code-keyword">void</span> main() {
</code></td></tr><tr><td id="L451" class="css-a4x74f"><span>451</span></td><td id="LC451" class="css-1dcdqdg"><code>					vec2 invSize = <span class="code-number">1.0</span> / texSize;
</code></td></tr><tr><td id="L452" class="css-a4x74f"><span>452</span></td><td id="LC452" class="css-1dcdqdg"><code>					float fSigma = float(SIGMA);
</code></td></tr><tr><td id="L453" class="css-a4x74f"><span>453</span></td><td id="LC453" class="css-1dcdqdg"><code>					float weightSum = gaussianPdf(<span class="code-number">0.0</span>, fSigma);
</code></td></tr><tr><td id="L454" class="css-a4x74f"><span>454</span></td><td id="LC454" class="css-1dcdqdg"><code>					vec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;
</code></td></tr><tr><td id="L455" class="css-a4x74f"><span>455</span></td><td id="LC455" class="css-1dcdqdg"><code>					<span class="code-keyword">for</span>( int i = <span class="code-number">1</span>; i &lt; KERNEL_RADIUS; i ++ ) {
</code></td></tr><tr><td id="L456" class="css-a4x74f"><span>456</span></td><td id="LC456" class="css-1dcdqdg"><code>						float x = float(i);
</code></td></tr><tr><td id="L457" class="css-a4x74f"><span>457</span></td><td id="LC457" class="css-1dcdqdg"><code>						float w = gaussianPdf(x, fSigma);
</code></td></tr><tr><td id="L458" class="css-a4x74f"><span>458</span></td><td id="LC458" class="css-1dcdqdg"><code>						vec2 uvOffset = direction * invSize * x;
</code></td></tr><tr><td id="L459" class="css-a4x74f"><span>459</span></td><td id="LC459" class="css-1dcdqdg"><code>						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;
</code></td></tr><tr><td id="L460" class="css-a4x74f"><span>460</span></td><td id="LC460" class="css-1dcdqdg"><code>						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;
</code></td></tr><tr><td id="L461" class="css-a4x74f"><span>461</span></td><td id="LC461" class="css-1dcdqdg"><code>						diffuseSum += (sample1 + sample2) * w;
</code></td></tr><tr><td id="L462" class="css-a4x74f"><span>462</span></td><td id="LC462" class="css-1dcdqdg"><code>						weightSum += <span class="code-number">2.0</span> * w;
</code></td></tr><tr><td id="L463" class="css-a4x74f"><span>463</span></td><td id="LC463" class="css-1dcdqdg"><code>					}
</code></td></tr><tr><td id="L464" class="css-a4x74f"><span>464</span></td><td id="LC464" class="css-1dcdqdg"><code>					gl_FragColor = vec4(diffuseSum/weightSum, <span class="code-number">1.0</span>);
</code></td></tr><tr><td id="L465" class="css-a4x74f"><span>465</span></td><td id="LC465" class="css-1dcdqdg"><code>				}<span class="code-string">`})}getCompositeMaterial(e){return new Y({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`</span>varying vec2 vUv;
</code></td></tr><tr><td id="L466" class="css-a4x74f"><span>466</span></td><td id="LC466" class="css-1dcdqdg"><code>				<span class="code-keyword">void</span> main() {
</code></td></tr><tr><td id="L467" class="css-a4x74f"><span>467</span></td><td id="LC467" class="css-1dcdqdg"><code>					vUv = uv;
</code></td></tr><tr><td id="L468" class="css-a4x74f"><span>468</span></td><td id="LC468" class="css-1dcdqdg"><code>					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, <span class="code-number">1.0</span> );
</code></td></tr><tr><td id="L469" class="css-a4x74f"><span>469</span></td><td id="LC469" class="css-1dcdqdg"><code>				}<span class="code-string">`,fragmentShader:`</span>varying vec2 vUv;
</code></td></tr><tr><td id="L470" class="css-a4x74f"><span>470</span></td><td id="LC470" class="css-1dcdqdg"><code>				uniform sampler2D blurTexture1;
</code></td></tr><tr><td id="L471" class="css-a4x74f"><span>471</span></td><td id="LC471" class="css-1dcdqdg"><code>				uniform sampler2D blurTexture2;
</code></td></tr><tr><td id="L472" class="css-a4x74f"><span>472</span></td><td id="LC472" class="css-1dcdqdg"><code>				uniform sampler2D blurTexture3;
</code></td></tr><tr><td id="L473" class="css-a4x74f"><span>473</span></td><td id="LC473" class="css-1dcdqdg"><code>				uniform sampler2D blurTexture4;
</code></td></tr><tr><td id="L474" class="css-a4x74f"><span>474</span></td><td id="LC474" class="css-1dcdqdg"><code>				uniform sampler2D blurTexture5;
</code></td></tr><tr><td id="L475" class="css-a4x74f"><span>475</span></td><td id="LC475" class="css-1dcdqdg"><code>				uniform float bloomStrength;
</code></td></tr><tr><td id="L476" class="css-a4x74f"><span>476</span></td><td id="LC476" class="css-1dcdqdg"><code>				uniform float bloomRadius;
</code></td></tr><tr><td id="L477" class="css-a4x74f"><span>477</span></td><td id="LC477" class="css-1dcdqdg"><code>				uniform float bloomFactors[NUM_MIPS];
</code></td></tr><tr><td id="L478" class="css-a4x74f"><span>478</span></td><td id="LC478" class="css-1dcdqdg"><code>				uniform vec3 bloomTintColors[NUM_MIPS];
</code></td></tr><tr><td id="L479" class="css-a4x74f"><span>479</span></td><td id="LC479" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L480" class="css-a4x74f"><span>480</span></td><td id="LC480" class="css-1dcdqdg"><code>				float lerpBloomFactor(<span class="code-keyword">const</span> <span class="code-keyword">in</span> float factor) {
</code></td></tr><tr><td id="L481" class="css-a4x74f"><span>481</span></td><td id="LC481" class="css-1dcdqdg"><code>					float mirrorFactor = <span class="code-number">1.2</span> - factor;
</code></td></tr><tr><td id="L482" class="css-a4x74f"><span>482</span></td><td id="LC482" class="css-1dcdqdg"><code>					<span class="code-keyword">return</span> mix(factor, mirrorFactor, bloomRadius);
</code></td></tr><tr><td id="L483" class="css-a4x74f"><span>483</span></td><td id="LC483" class="css-1dcdqdg"><code>				}
</code></td></tr><tr><td id="L484" class="css-a4x74f"><span>484</span></td><td id="LC484" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L485" class="css-a4x74f"><span>485</span></td><td id="LC485" class="css-1dcdqdg"><code>				<span class="code-keyword">void</span> main() {
</code></td></tr><tr><td id="L486" class="css-a4x74f"><span>486</span></td><td id="LC486" class="css-1dcdqdg"><code>					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[<span class="code-number">0</span>]) * vec4(bloomTintColors[<span class="code-number">0</span>], <span class="code-number">1.0</span>) * texture2D(blurTexture1, vUv) +
</code></td></tr><tr><td id="L487" class="css-a4x74f"><span>487</span></td><td id="LC487" class="css-1dcdqdg"><code>						lerpBloomFactor(bloomFactors[<span class="code-number">1</span>]) * vec4(bloomTintColors[<span class="code-number">1</span>], <span class="code-number">1.0</span>) * texture2D(blurTexture2, vUv) +
</code></td></tr><tr><td id="L488" class="css-a4x74f"><span>488</span></td><td id="LC488" class="css-1dcdqdg"><code>						lerpBloomFactor(bloomFactors[<span class="code-number">2</span>]) * vec4(bloomTintColors[<span class="code-number">2</span>], <span class="code-number">1.0</span>) * texture2D(blurTexture3, vUv) +
</code></td></tr><tr><td id="L489" class="css-a4x74f"><span>489</span></td><td id="LC489" class="css-1dcdqdg"><code>						lerpBloomFactor(bloomFactors[<span class="code-number">3</span>]) * vec4(bloomTintColors[<span class="code-number">3</span>], <span class="code-number">1.0</span>) * texture2D(blurTexture4, vUv) +
</code></td></tr><tr><td id="L490" class="css-a4x74f"><span>490</span></td><td id="LC490" class="css-1dcdqdg"><code>						lerpBloomFactor(bloomFactors[<span class="code-number">4</span>]) * vec4(bloomTintColors[<span class="code-number">4</span>], <span class="code-number">1.0</span>) * texture2D(blurTexture5, vUv) );
</code></td></tr><tr><td id="L491" class="css-a4x74f"><span>491</span></td><td id="LC491" class="css-1dcdqdg"><code>				}<span class="code-string">`})}}re.BlurDirectionX=new _(1,0),re.BlurDirectionY=new _(0,1);const{randFloat:ao,randFloatSpread:we}=xe,ro={gpgpuSize:256,bloomStrength:1.5,bloomRadius:.5,bloomThreshold:.25,colors:[Math.random()*16777215,Math.random()*16777215,Math.random()*16777215],geometry:"custom",geometryScale:[1,1,1],lights:[{type:"ambient",params:[16777215,.5]},{type:"point",params:[16777215,1],props:{position:[0,0,0]}},{type:"point",params:[16748640,.75],props:{position:[0,-100,-100]}},{type:"point",params:[6328575,.75],props:{position:[0,100,100]}}],materialParams:{},noiseCoordScale:.01,noiseIntensity:.0025,noiseTimeCoef:4e-4,attractionRadius1:150,attractionRadius2:250,maxVelocity:.25};function no(h){const e={...ro,...h},o=e.gpgpuSize,t=o*o;let i,r,d,n,c;const p={value:null},u={value:null},v={value:null},w={value:new j(...e.geometryScale)},M={value:0},l={value:e.noiseCoordScale},s={value:e.noiseIntensity},S={value:e.maxVelocity},E={value:e.attractionRadius1},g={value:e.attractionRadius2},R={value:new j},N={uTexturePosition:p,uOldTexturePosition:u,uTextureVelocity:v},x={uScale:w,uTime:M,uNoiseCoordScale:l,uNoiseIntensity:s,uMaxVelocity:S,uAttractionRadius1:E,uAttractionRadius2:g,uMouse:R},I={...N,...x};let F,D,V,A,O,L,k;return{three:oe({...Ae(h),antialias:!1,orbitControls:!0,initRenderer({renderer:z}){W(z)},initCamera(z){A=z.camera,A.position.z=70},initScene({renderer:z,width:T,height:P,camera:f,scene:U}){m(U),D=new io(U,f),V=new re(new _(T,P),e.bloomStrength,e.bloomRadius,e.bloomThreshold),F=new oo(z),F.addPass(D),F.addPass(V)},afterResize({width:z,height:T}){F&amp;&amp;F.setSize(z,T)},beforeRender({clock:z}){M.value=z.time*e.noiseTimeCoef,i.compute(),p.value=c.renderTargets[i.currentTextureIndex].texture,u.value=c.renderTargets[i.currentTextureIndex===0?1:0].texture,v.value=n.renderTargets[i.currentTextureIndex].texture},render(){F.render()}}),config:e,uniforms:I,setColors:C};function W(z){i=new ge(o,o,z),z.capabilities.isWebGL2||i.setDataType(he),r=i.createTexture(),d=i.createTexture(),b(r,d),n=i.addVariable("textureVelocity",`</span>
</code></td></tr><tr><td id="L492" class="css-a4x74f"><span>492</span></td><td id="LC492" class="css-1dcdqdg"><code>      ${$}
</code></td></tr><tr><td id="L493" class="css-a4x74f"><span>493</span></td><td id="LC493" class="css-1dcdqdg"><code>      uniform float uTime;
</code></td></tr><tr><td id="L494" class="css-a4x74f"><span>494</span></td><td id="LC494" class="css-1dcdqdg"><code>      uniform vec3 uMouse;
</code></td></tr><tr><td id="L495" class="css-a4x74f"><span>495</span></td><td id="LC495" class="css-1dcdqdg"><code>      uniform float uNoiseCoordScale;
</code></td></tr><tr><td id="L496" class="css-a4x74f"><span>496</span></td><td id="LC496" class="css-1dcdqdg"><code>      uniform float uNoiseIntensity;
</code></td></tr><tr><td id="L497" class="css-a4x74f"><span>497</span></td><td id="LC497" class="css-1dcdqdg"><code>      uniform float uMaxVelocity;
</code></td></tr><tr><td id="L498" class="css-a4x74f"><span>498</span></td><td id="LC498" class="css-1dcdqdg"><code>      uniform float uAttractionRadius1;
</code></td></tr><tr><td id="L499" class="css-a4x74f"><span>499</span></td><td id="LC499" class="css-1dcdqdg"><code>      uniform float uAttractionRadius2;
</code></td></tr><tr><td id="L500" class="css-a4x74f"><span>500</span></td><td id="LC500" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L501" class="css-a4x74f"><span>501</span></td><td id="LC501" class="css-1dcdqdg"><code>      <span class="code-keyword">void</span> main() {
</code></td></tr><tr><td id="L502" class="css-a4x74f"><span>502</span></td><td id="LC502" class="css-1dcdqdg"><code>        vec2 uv = gl_FragCoord.xy / resolution.xy;
</code></td></tr><tr><td id="L503" class="css-a4x74f"><span>503</span></td><td id="LC503" class="css-1dcdqdg"><code>        vec4 pos = texture2D(texturePosition, uv);
</code></td></tr><tr><td id="L504" class="css-a4x74f"><span>504</span></td><td id="LC504" class="css-1dcdqdg"><code>        vec4 vel = texture2D(textureVelocity, uv);
</code></td></tr><tr><td id="L505" class="css-a4x74f"><span>505</span></td><td id="LC505" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L506" class="css-a4x74f"><span>506</span></td><td id="LC506" class="css-1dcdqdg"><code>        vec3 grad;
</code></td></tr><tr><td id="L507" class="css-a4x74f"><span>507</span></td><td id="LC507" class="css-1dcdqdg"><code>        float n = psrdnoise(pos.xyz * uNoiseCoordScale, vec3(<span class="code-number">0</span>), uTime, grad);
</code></td></tr><tr><td id="L508" class="css-a4x74f"><span>508</span></td><td id="LC508" class="css-1dcdqdg"><code>        vel.xyz += (pos.w * <span class="code-number">0.75</span>) * grad * uNoiseIntensity;
</code></td></tr><tr><td id="L509" class="css-a4x74f"><span>509</span></td><td id="LC509" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L510" class="css-a4x74f"><span>510</span></td><td id="LC510" class="css-1dcdqdg"><code>        vec3 dv = -pos.xyz;
</code></td></tr><tr><td id="L511" class="css-a4x74f"><span>511</span></td><td id="LC511" class="css-1dcdqdg"><code>        float coef = smoothstep(uAttractionRadius1, uAttractionRadius2, length(dv));
</code></td></tr><tr><td id="L512" class="css-a4x74f"><span>512</span></td><td id="LC512" class="css-1dcdqdg"><code>        vel.xyz = vel.xyz + pos.w * coef * normalize(dv);
</code></td></tr><tr><td id="L513" class="css-a4x74f"><span>513</span></td><td id="LC513" class="css-1dcdqdg"><code>        vel.xyz = clamp(vel.xyz, -uMaxVelocity, uMaxVelocity);
</code></td></tr><tr><td id="L514" class="css-a4x74f"><span>514</span></td><td id="LC514" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L515" class="css-a4x74f"><span>515</span></td><td id="LC515" class="css-1dcdqdg"><code>        gl_FragColor = vel;
</code></td></tr><tr><td id="L516" class="css-a4x74f"><span>516</span></td><td id="LC516" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L517" class="css-a4x74f"><span>517</span></td><td id="LC517" class="css-1dcdqdg"><code>    <span class="code-string">`,d),c=i.addVariable("texturePosition",`</span>
</code></td></tr><tr><td id="L518" class="css-a4x74f"><span>518</span></td><td id="LC518" class="css-1dcdqdg"><code>      ${$}
</code></td></tr><tr><td id="L519" class="css-a4x74f"><span>519</span></td><td id="LC519" class="css-1dcdqdg"><code>      uniform float uTime;
</code></td></tr><tr><td id="L520" class="css-a4x74f"><span>520</span></td><td id="LC520" class="css-1dcdqdg"><code>      uniform vec3 uMouse;
</code></td></tr><tr><td id="L521" class="css-a4x74f"><span>521</span></td><td id="LC521" class="css-1dcdqdg"><code>      <span class="code-keyword">void</span> main() {
</code></td></tr><tr><td id="L522" class="css-a4x74f"><span>522</span></td><td id="LC522" class="css-1dcdqdg"><code>        vec2 uv = gl_FragCoord.xy / resolution.xy;
</code></td></tr><tr><td id="L523" class="css-a4x74f"><span>523</span></td><td id="LC523" class="css-1dcdqdg"><code>        vec4 pos = texture2D(texturePosition, uv);
</code></td></tr><tr><td id="L524" class="css-a4x74f"><span>524</span></td><td id="LC524" class="css-1dcdqdg"><code>        vec4 vel = texture2D(textureVelocity, uv);
</code></td></tr><tr><td id="L525" class="css-a4x74f"><span>525</span></td><td id="LC525" class="css-1dcdqdg"><code>        pos.xyz += vel.xyz;
</code></td></tr><tr><td id="L526" class="css-a4x74f"><span>526</span></td><td id="LC526" class="css-1dcdqdg"><code>        gl_FragColor = pos;
</code></td></tr><tr><td id="L527" class="css-a4x74f"><span>527</span></td><td id="LC527" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L528" class="css-a4x74f"><span>528</span></td><td id="LC528" class="css-1dcdqdg"><code>    <span class="code-string">`,r),i.setVariableDependencies(n,[c,n]),i.setVariableDependencies(c,[c,n]),Object.keys(x).forEach(P=&gt;{n.material.uniforms[P]=I[P],c.material.uniforms[P]=I[P]});const T=i.init();if(T!==null)throw new Error(T)}function m(z){switch(e.background!==void 0&amp;&amp;(z.background=new q(e.background)),Ne(z,e.lights),e.geometry){case"box":O=new Ut;break;case"capsule":O=new Ot(.2,1,4,8).rotateX(Math.PI/2);break;case"cone":O=new kt(.4,2,6).rotateX(Math.PI/2);break;case"octahedron":O=new It(1,0).rotateX(Math.PI/2);break;case"sphere":O=new Nt(.5,8,8);break;default:O=so(1)}const T=new Float32Array(t*2);let P=0;for(let f=0;f&lt;o;f++)for(let U=0;U&lt;o;U++)T[P++]=U/(o-1),T[P++]=f/(o-1);O.setAttribute("gpuUv",new le(T,2)),L=new Ee({metalness:.75,roughness:.25,side:Ce,...e.materialParams,onBeforeCompile:f=&gt;{Object.keys(I).forEach(U=&gt;{f.uniforms[U]=I[U]}),f.vertexShader=`</span>
</code></td></tr><tr><td id="L529" class="css-a4x74f"><span>529</span></td><td id="LC529" class="css-1dcdqdg"><code>          uniform sampler2D uTexturePosition;
</code></td></tr><tr><td id="L530" class="css-a4x74f"><span>530</span></td><td id="LC530" class="css-1dcdqdg"><code>          uniform sampler2D uOldTexturePosition;
</code></td></tr><tr><td id="L531" class="css-a4x74f"><span>531</span></td><td id="LC531" class="css-1dcdqdg"><code>          uniform sampler2D uTextureVelocity;
</code></td></tr><tr><td id="L532" class="css-a4x74f"><span>532</span></td><td id="LC532" class="css-1dcdqdg"><code>          uniform vec3 uScale;
</code></td></tr><tr><td id="L533" class="css-a4x74f"><span>533</span></td><td id="LC533" class="css-1dcdqdg"><code>          attribute vec2 gpuUv;
</code></td></tr><tr><td id="L534" class="css-a4x74f"><span>534</span></td><td id="LC534" class="css-1dcdqdg"><code>          varying vec4 vPos;
</code></td></tr><tr><td id="L535" class="css-a4x74f"><span>535</span></td><td id="LC535" class="css-1dcdqdg"><code>          varying vec4 vVel;
</code></td></tr><tr><td id="L536" class="css-a4x74f"><span>536</span></td><td id="LC536" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L537" class="css-a4x74f"><span>537</span></td><td id="LC537" class="css-1dcdqdg"><code>          mat3 lookAt(vec3 origin, vec3 target, vec3 up) {
</code></td></tr><tr><td id="L538" class="css-a4x74f"><span>538</span></td><td id="LC538" class="css-1dcdqdg"><code>            vec3 z = target - origin;
</code></td></tr><tr><td id="L539" class="css-a4x74f"><span>539</span></td><td id="LC539" class="css-1dcdqdg"><code>            <span class="code-keyword">if</span> (z.x * z.x + z.y * z.y + z.z * z.z == <span class="code-number">0.0</span>) { z.z = <span class="code-number">1.0</span>; }
</code></td></tr><tr><td id="L540" class="css-a4x74f"><span>540</span></td><td id="LC540" class="css-1dcdqdg"><code>            z = normalize(z);
</code></td></tr><tr><td id="L541" class="css-a4x74f"><span>541</span></td><td id="LC541" class="css-1dcdqdg"><code>            vec3 x = cross(up, z);
</code></td></tr><tr><td id="L542" class="css-a4x74f"><span>542</span></td><td id="LC542" class="css-1dcdqdg"><code>            <span class="code-keyword">if</span> (x.x * x.x + x.y * x.y + x.z * x.z == <span class="code-number">0.0</span>) {
</code></td></tr><tr><td id="L543" class="css-a4x74f"><span>543</span></td><td id="LC543" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (abs(up.z) == <span class="code-number">1.0</span>) { z.x += <span class="code-number">0.0001</span>; }
</code></td></tr><tr><td id="L544" class="css-a4x74f"><span>544</span></td><td id="LC544" class="css-1dcdqdg"><code>              <span class="code-keyword">else</span> { z.z += <span class="code-number">0.0001</span>; }
</code></td></tr><tr><td id="L545" class="css-a4x74f"><span>545</span></td><td id="LC545" class="css-1dcdqdg"><code>              x = cross(up, z);
</code></td></tr><tr><td id="L546" class="css-a4x74f"><span>546</span></td><td id="LC546" class="css-1dcdqdg"><code>            }
</code></td></tr><tr><td id="L547" class="css-a4x74f"><span>547</span></td><td id="LC547" class="css-1dcdqdg"><code>            x = normalize(x);
</code></td></tr><tr><td id="L548" class="css-a4x74f"><span>548</span></td><td id="LC548" class="css-1dcdqdg"><code>            vec3 y = cross(z, x);
</code></td></tr><tr><td id="L549" class="css-a4x74f"><span>549</span></td><td id="LC549" class="css-1dcdqdg"><code>            <span class="code-keyword">return</span> mat3(x, y, z);
</code></td></tr><tr><td id="L550" class="css-a4x74f"><span>550</span></td><td id="LC550" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L551" class="css-a4x74f"><span>551</span></td><td id="LC551" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L552" class="css-a4x74f"><span>552</span></td><td id="LC552" class="css-1dcdqdg"><code>          mat4 iMatrix(vec3 pos, mat3 rmat, vec3 scale) {
</code></td></tr><tr><td id="L553" class="css-a4x74f"><span>553</span></td><td id="LC553" class="css-1dcdqdg"><code>            <span class="code-keyword">return</span> mat4(
</code></td></tr><tr><td id="L554" class="css-a4x74f"><span>554</span></td><td id="LC554" class="css-1dcdqdg"><code>              rmat[<span class="code-number">0</span>][<span class="code-number">0</span>] * scale.x, rmat[<span class="code-number">0</span>][<span class="code-number">1</span>] * scale.x, rmat[<span class="code-number">0</span>][<span class="code-number">2</span>] * scale.x, <span class="code-number">0.0</span>,
</code></td></tr><tr><td id="L555" class="css-a4x74f"><span>555</span></td><td id="LC555" class="css-1dcdqdg"><code>              rmat[<span class="code-number">1</span>][<span class="code-number">0</span>] * scale.y, rmat[<span class="code-number">1</span>][<span class="code-number">1</span>] * scale.y, rmat[<span class="code-number">1</span>][<span class="code-number">2</span>] * scale.y, <span class="code-number">0.0</span>,
</code></td></tr><tr><td id="L556" class="css-a4x74f"><span>556</span></td><td id="LC556" class="css-1dcdqdg"><code>              rmat[<span class="code-number">2</span>][<span class="code-number">0</span>] * scale.z, rmat[<span class="code-number">2</span>][<span class="code-number">1</span>] * scale.z, rmat[<span class="code-number">2</span>][<span class="code-number">2</span>] * scale.z, <span class="code-number">0.0</span>,
</code></td></tr><tr><td id="L557" class="css-a4x74f"><span>557</span></td><td id="LC557" class="css-1dcdqdg"><code>              pos.x, pos.y, pos.z, <span class="code-number">1.0</span>
</code></td></tr><tr><td id="L558" class="css-a4x74f"><span>558</span></td><td id="LC558" class="css-1dcdqdg"><code>            );
</code></td></tr><tr><td id="L559" class="css-a4x74f"><span>559</span></td><td id="LC559" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L560" class="css-a4x74f"><span>560</span></td><td id="LC560" class="css-1dcdqdg"><code>        <span class="code-string">`+f.vertexShader,f.vertexShader=f.vertexShader.replace("#include &lt;defaultnormal_vertex&gt;",`</span>
</code></td></tr><tr><td id="L561" class="css-a4x74f"><span>561</span></td><td id="LC561" class="css-1dcdqdg"><code>          vPos = texture2D(uTexturePosition, gpuUv);
</code></td></tr><tr><td id="L562" class="css-a4x74f"><span>562</span></td><td id="LC562" class="css-1dcdqdg"><code>          vec4 oldPos = texture2D(uOldTexturePosition, gpuUv);
</code></td></tr><tr><td id="L563" class="css-a4x74f"><span>563</span></td><td id="LC563" class="css-1dcdqdg"><code>          vVel = texture2D(uTextureVelocity, gpuUv);
</code></td></tr><tr><td id="L564" class="css-a4x74f"><span>564</span></td><td id="LC564" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L565" class="css-a4x74f"><span>565</span></td><td id="LC565" class="css-1dcdqdg"><code>          mat3 rmat = lookAt(oldPos.xyz, vPos.xyz, vec3(<span class="code-number">0</span>, <span class="code-number">1</span>, <span class="code-number">0</span>));
</code></td></tr><tr><td id="L566" class="css-a4x74f"><span>566</span></td><td id="LC566" class="css-1dcdqdg"><code>          mat4 im = iMatrix(vPos.xyz, rmat, (<span class="code-number">0.5</span> + vPos.w) * uScale);
</code></td></tr><tr><td id="L567" class="css-a4x74f"><span>567</span></td><td id="LC567" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L568" class="css-a4x74f"><span>568</span></td><td id="LC568" class="css-1dcdqdg"><code>          vec3 transformedNormal = objectNormal;
</code></td></tr><tr><td id="L569" class="css-a4x74f"><span>569</span></td><td id="LC569" class="css-1dcdqdg"><code>          mat3 m = mat3(im);
</code></td></tr><tr><td id="L570" class="css-a4x74f"><span>570</span></td><td id="LC570" class="css-1dcdqdg"><code>          transformedNormal /= vec3( dot( m[ <span class="code-number">0</span> ], m[ <span class="code-number">0</span> ] ), dot( m[ <span class="code-number">1</span> ], m[ <span class="code-number">1</span> ] ), dot( m[ <span class="code-number">2</span> ], m[ <span class="code-number">2</span> ] ) );
</code></td></tr><tr><td id="L571" class="css-a4x74f"><span>571</span></td><td id="LC571" class="css-1dcdqdg"><code>          transformedNormal = m * transformedNormal;
</code></td></tr><tr><td id="L572" class="css-a4x74f"><span>572</span></td><td id="LC572" class="css-1dcdqdg"><code>          transformedNormal = normalMatrix * transformedNormal;
</code></td></tr><tr><td id="L573" class="css-a4x74f"><span>573</span></td><td id="LC573" class="css-1dcdqdg"><code>        <span class="code-string">`),f.vertexShader=f.vertexShader.replace("#include &lt;project_vertex&gt;",`</span>
</code></td></tr><tr><td id="L574" class="css-a4x74f"><span>574</span></td><td id="LC574" class="css-1dcdqdg"><code>          vec4 mvPosition = modelViewMatrix * im * vec4(transformed, <span class="code-number">1.0</span>);
</code></td></tr><tr><td id="L575" class="css-a4x74f"><span>575</span></td><td id="LC575" class="css-1dcdqdg"><code>          gl_Position = projectionMatrix * mvPosition;
</code></td></tr><tr><td id="L576" class="css-a4x74f"><span>576</span></td><td id="LC576" class="css-1dcdqdg"><code>        <span class="code-string">`)}}),k=new De(O,L,t),C(e.colors),z.add(k)}function C(z){if(Array.isArray(z)&amp;&amp;z.length&gt;1){const T=ce(z);for(let P=0;P&lt;t;P++)k.setColorAt(P,T.getColorAt(P/t));k.instanceColor.needsUpdate=!0}}function b(z,T){const P=new j,f=z.image.data,U=T.image.data;for(let Q=0,de=f.length;Q&lt;de;Q+=4)P.set(we(1),we(1),we(1)).normalize().multiplyScalar(we(e.attractionRadius1*2)),P.toArray(f,Q),f[Q+3]=ao(.1,1),P.set(0,0,0),P.toArray(U,Q),U[Q+3]=0}}function so(h){const e=[{p:[h*.5,0,-h],n:[0,1,0]},{p:[-h*.5,0,-h],n:[0,1,0]},{p:[0,0,h],n:[0,1,0]},{p:[0,-h*.5,-h],n:[1,0,0]},{p:[0,h*.5,-h],n:[1,0,0]},{p:[0,0,h],n:[1,0,0]}],o=[0,1,2,3,4,5],t=[],i=[];for(const d of e)t.push(...d.p),i.push(...d.n);const r=new pe;return r.setAttribute("position",new te(t,3)),r.setAttribute("normal",new te(i,3)),r.setIndex(o),r}const{randFloat:lo,randFloatSpread:ae}=xe,co={gpgpuSize:64,background:16777215,material:"basic",materialParams:{},texture:null,textureCount:1,colors:[16777215,16777215],lights:[{type:"ambient",params:[16777215,.5]},{type:"directional",params:[16777215,.5],props:{position:[20,50,100]}}],fogDensity:.01,fishScale:[1,1,1],fishWidthSegments:8,fishSpeed:1.5,fishDisplacementScale:.2,noiseCoordScale:.02,noiseTimeCoef:5e-4,noiseIntensity:.0025,attractionRadius1:50,attractionRadius2:100,maxVelocity:.1};function uo(h){const e={...co,...h};if(!["basic","phong","standard"].includes(e.material))throw new Error(`</span>Invalid material ${e.material}<span class="code-string">`);if(!Number.isInteger(e.fishWidthSegments)||e.fishWidthSegments%2!==0)throw new Error(`</span>Invalid fishWidthSegments ${e.fishWidthSegments}<span class="code-string">`);const o=e.gpgpuSize,t=o*o;let i,r,d,n,c;const p={value:null},u={value:null},v={value:null},w={value:0},M={value:e.noiseCoordScale},l={value:e.noiseIntensity},s={value:e.maxVelocity},S={value:e.attractionRadius1},E={value:e.attractionRadius2},g={value:new j(...e.fishScale)},R={value:e.fishSpeed},N={value:e.fishDisplacementScale},x={uTexturePosition:p,uOldTexturePosition:u,uTextureVelocity:v},I={uTime:w,uNoiseCoordScale:M,uNoiseIntensity:l,uMaxVelocity:s,uAttractionRadius1:S,uAttractionRadius2:E,uFishScale:g,uFishSpeed:R,uFishDisplacementScale:N},F={...x,...I};let D,V,A;return{three:oe({...Ae(h),antialias:!0,orbitControls:!0,initRenderer({renderer:m}){O(m)},initCamera({camera:m}){m.position.set(0,20,70)},initScene({scene:m}){L(m)},beforeRender({clock:m}){w.value=m.time*e.noiseTimeCoef,i.compute(),p.value=c.renderTargets[i.currentTextureIndex].texture,u.value=c.renderTargets[i.currentTextureIndex===0?1:0].texture,v.value=n.renderTargets[i.currentTextureIndex].texture}}),config:e,uniforms:F,setColors:k};function O(m){i=new ge(o,o,m),m.capabilities.isWebGL2||i.setDataType(he),r=i.createTexture(),d=i.createTexture(),W(r,d),n=i.addVariable("textureVelocity",`</span>
</code></td></tr><tr><td id="L577" class="css-a4x74f"><span>577</span></td><td id="LC577" class="css-1dcdqdg"><code>      ${$}
</code></td></tr><tr><td id="L578" class="css-a4x74f"><span>578</span></td><td id="LC578" class="css-1dcdqdg"><code>      uniform float uTime;
</code></td></tr><tr><td id="L579" class="css-a4x74f"><span>579</span></td><td id="LC579" class="css-1dcdqdg"><code>      uniform float uNoiseCoordScale;
</code></td></tr><tr><td id="L580" class="css-a4x74f"><span>580</span></td><td id="LC580" class="css-1dcdqdg"><code>      uniform float uNoiseIntensity;
</code></td></tr><tr><td id="L581" class="css-a4x74f"><span>581</span></td><td id="LC581" class="css-1dcdqdg"><code>      uniform float uMaxVelocity;
</code></td></tr><tr><td id="L582" class="css-a4x74f"><span>582</span></td><td id="LC582" class="css-1dcdqdg"><code>      uniform float uAttractionRadius1;
</code></td></tr><tr><td id="L583" class="css-a4x74f"><span>583</span></td><td id="LC583" class="css-1dcdqdg"><code>      uniform float uAttractionRadius2;
</code></td></tr><tr><td id="L584" class="css-a4x74f"><span>584</span></td><td id="LC584" class="css-1dcdqdg"><code>      uniform float uFishSpeed;
</code></td></tr><tr><td id="L585" class="css-a4x74f"><span>585</span></td><td id="LC585" class="css-1dcdqdg"><code>      <span class="code-keyword">void</span> main() {
</code></td></tr><tr><td id="L586" class="css-a4x74f"><span>586</span></td><td id="LC586" class="css-1dcdqdg"><code>        vec2 uv = gl_FragCoord.xy / resolution.xy;
</code></td></tr><tr><td id="L587" class="css-a4x74f"><span>587</span></td><td id="LC587" class="css-1dcdqdg"><code>        vec4 pos = texture2D(texturePosition, uv);
</code></td></tr><tr><td id="L588" class="css-a4x74f"><span>588</span></td><td id="LC588" class="css-1dcdqdg"><code>        vec4 vel = texture2D(textureVelocity, uv);
</code></td></tr><tr><td id="L589" class="css-a4x74f"><span>589</span></td><td id="LC589" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L590" class="css-a4x74f"><span>590</span></td><td id="LC590" class="css-1dcdqdg"><code>        vec3 grad;
</code></td></tr><tr><td id="L591" class="css-a4x74f"><span>591</span></td><td id="LC591" class="css-1dcdqdg"><code>        float n = psrdnoise(pos.xyz * uNoiseCoordScale, vec3(<span class="code-number">0</span>), uTime, grad);
</code></td></tr><tr><td id="L592" class="css-a4x74f"><span>592</span></td><td id="LC592" class="css-1dcdqdg"><code>        grad = grad * uNoiseIntensity;
</code></td></tr><tr><td id="L593" class="css-a4x74f"><span>593</span></td><td id="LC593" class="css-1dcdqdg"><code>        vel.xyz = vel.xyz + (pos.w * <span class="code-number">0.75</span>) * grad;
</code></td></tr><tr><td id="L594" class="css-a4x74f"><span>594</span></td><td id="LC594" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L595" class="css-a4x74f"><span>595</span></td><td id="LC595" class="css-1dcdqdg"><code>        vec3 dv = -pos.xyz;
</code></td></tr><tr><td id="L596" class="css-a4x74f"><span>596</span></td><td id="LC596" class="css-1dcdqdg"><code>        float coef = smoothstep(uAttractionRadius1, uAttractionRadius2, length(dv));
</code></td></tr><tr><td id="L597" class="css-a4x74f"><span>597</span></td><td id="LC597" class="css-1dcdqdg"><code>        vel.xyz = vel.xyz + pos.w * coef * normalize(dv);
</code></td></tr><tr><td id="L598" class="css-a4x74f"><span>598</span></td><td id="LC598" class="css-1dcdqdg"><code>        vel.xyz = clamp(vel.xyz, -uMaxVelocity, uMaxVelocity);
</code></td></tr><tr><td id="L599" class="css-a4x74f"><span>599</span></td><td id="LC599" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L600" class="css-a4x74f"><span>600</span></td><td id="LC600" class="css-1dcdqdg"><code>        vel.w = mod(vel.w + length(vel.xyz) * (<span class="code-number">0.5</span> + pos.w) * uFishSpeed, <span class="code-number">6.2831853071</span>);
</code></td></tr><tr><td id="L601" class="css-a4x74f"><span>601</span></td><td id="LC601" class="css-1dcdqdg"><code>        gl_FragColor = vel;
</code></td></tr><tr><td id="L602" class="css-a4x74f"><span>602</span></td><td id="LC602" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L603" class="css-a4x74f"><span>603</span></td><td id="LC603" class="css-1dcdqdg"><code>    <span class="code-string">`,d),c=i.addVariable("texturePosition",`</span>
</code></td></tr><tr><td id="L604" class="css-a4x74f"><span>604</span></td><td id="LC604" class="css-1dcdqdg"><code>      ${$}
</code></td></tr><tr><td id="L605" class="css-a4x74f"><span>605</span></td><td id="LC605" class="css-1dcdqdg"><code>      uniform float uTime;
</code></td></tr><tr><td id="L606" class="css-a4x74f"><span>606</span></td><td id="LC606" class="css-1dcdqdg"><code>      <span class="code-keyword">void</span> main() {
</code></td></tr><tr><td id="L607" class="css-a4x74f"><span>607</span></td><td id="LC607" class="css-1dcdqdg"><code>        vec2 uv = gl_FragCoord.xy / resolution.xy;
</code></td></tr><tr><td id="L608" class="css-a4x74f"><span>608</span></td><td id="LC608" class="css-1dcdqdg"><code>        vec4 pos = texture2D(texturePosition, uv);
</code></td></tr><tr><td id="L609" class="css-a4x74f"><span>609</span></td><td id="LC609" class="css-1dcdqdg"><code>        vec4 vel = texture2D(textureVelocity, uv);
</code></td></tr><tr><td id="L610" class="css-a4x74f"><span>610</span></td><td id="LC610" class="css-1dcdqdg"><code>        pos.xyz += vel.xyz;
</code></td></tr><tr><td id="L611" class="css-a4x74f"><span>611</span></td><td id="LC611" class="css-1dcdqdg"><code>        gl_FragColor = pos;
</code></td></tr><tr><td id="L612" class="css-a4x74f"><span>612</span></td><td id="LC612" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L613" class="css-a4x74f"><span>613</span></td><td id="LC613" class="css-1dcdqdg"><code>    <span class="code-string">`,r),i.setVariableDependencies(n,[c,n]),i.setVariableDependencies(c,[c,n]),Object.keys(I).forEach(b=&gt;{n.material.uniforms[b]=F[b],c.material.uniforms[b]=F[b]});const C=i.init();if(C!==null)throw new Error(C)}function L(m){e.background!==void 0&amp;&amp;(m.background=new q(e.background),e.fogDensity&amp;&amp;(m.fog=new Lt(e.background,e.fogDensity))),Ne(m,e.lights),D=new ne(2,1,e.fishWidthSegments,1).rotateY(Math.PI/2);const C=new Float32Array(t*2),b=new Float32Array(t);let z=0,T=0;for(let f=0;f&lt;o;f++)for(let U=0;U&lt;o;U++)C[z++]=U/(o-1),C[z++]=f/(o-1),b[T++]=Math.floor(Math.random()*e.textureCount);D.setAttribute("gpuUv",new le(C,2)),D.setAttribute("mapIndex",new le(b,1));const P={side:Ce,...e.materialParams};switch(e.texture&amp;&amp;(P.map=new ot().load(e.texture)),P.onBeforeCompile=f=&gt;{f.defines={COMPUTE_NORMALS:e.material!=="basic",FISH_DZ:(2/e.fishWidthSegments).toFixed(10),TEXTURE_COUNT:e.textureCount.toFixed(10)},Object.keys(F).forEach(U=&gt;{f.uniforms[U]=F[U]}),f.vertexShader=`</span>
</code></td></tr><tr><td id="L614" class="css-a4x74f"><span>614</span></td><td id="LC614" class="css-1dcdqdg"><code>        uniform sampler2D uTexturePosition;
</code></td></tr><tr><td id="L615" class="css-a4x74f"><span>615</span></td><td id="LC615" class="css-1dcdqdg"><code>        uniform sampler2D uOldTexturePosition;
</code></td></tr><tr><td id="L616" class="css-a4x74f"><span>616</span></td><td id="LC616" class="css-1dcdqdg"><code>        uniform sampler2D uTextureVelocity;
</code></td></tr><tr><td id="L617" class="css-a4x74f"><span>617</span></td><td id="LC617" class="css-1dcdqdg"><code>        uniform vec3 uFishScale;
</code></td></tr><tr><td id="L618" class="css-a4x74f"><span>618</span></td><td id="LC618" class="css-1dcdqdg"><code>        uniform float uFishDisplacementScale;
</code></td></tr><tr><td id="L619" class="css-a4x74f"><span>619</span></td><td id="LC619" class="css-1dcdqdg"><code>        attribute vec2 gpuUv;
</code></td></tr><tr><td id="L620" class="css-a4x74f"><span>620</span></td><td id="LC620" class="css-1dcdqdg"><code>        attribute float mapIndex;
</code></td></tr><tr><td id="L621" class="css-a4x74f"><span>621</span></td><td id="LC621" class="css-1dcdqdg"><code>        varying vec4 vPos;
</code></td></tr><tr><td id="L622" class="css-a4x74f"><span>622</span></td><td id="LC622" class="css-1dcdqdg"><code>        varying vec4 vVel;
</code></td></tr><tr><td id="L623" class="css-a4x74f"><span>623</span></td><td id="LC623" class="css-1dcdqdg"><code>        varying float vMapIndex;
</code></td></tr><tr><td id="L624" class="css-a4x74f"><span>624</span></td><td id="LC624" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L625" class="css-a4x74f"><span>625</span></td><td id="LC625" class="css-1dcdqdg"><code>        mat3 lookAt(vec3 origin, vec3 target, vec3 up) {
</code></td></tr><tr><td id="L626" class="css-a4x74f"><span>626</span></td><td id="LC626" class="css-1dcdqdg"><code>          vec3 z = target - origin;
</code></td></tr><tr><td id="L627" class="css-a4x74f"><span>627</span></td><td id="LC627" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (z.x * z.x + z.y * z.y + z.z * z.z == <span class="code-number">0.0</span>) { z.z = <span class="code-number">1.0</span>; }
</code></td></tr><tr><td id="L628" class="css-a4x74f"><span>628</span></td><td id="LC628" class="css-1dcdqdg"><code>          z = normalize(z);
</code></td></tr><tr><td id="L629" class="css-a4x74f"><span>629</span></td><td id="LC629" class="css-1dcdqdg"><code>          vec3 x = cross(up, z);
</code></td></tr><tr><td id="L630" class="css-a4x74f"><span>630</span></td><td id="LC630" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (x.x * x.x + x.y * x.y + x.z * x.z == <span class="code-number">0.0</span>) {
</code></td></tr><tr><td id="L631" class="css-a4x74f"><span>631</span></td><td id="LC631" class="css-1dcdqdg"><code>            <span class="code-keyword">if</span> (abs(up.z) == <span class="code-number">1.0</span>) { z.x += <span class="code-number">0.0001</span>; }
</code></td></tr><tr><td id="L632" class="css-a4x74f"><span>632</span></td><td id="LC632" class="css-1dcdqdg"><code>            <span class="code-keyword">else</span> { z.z += <span class="code-number">0.0001</span>; }
</code></td></tr><tr><td id="L633" class="css-a4x74f"><span>633</span></td><td id="LC633" class="css-1dcdqdg"><code>            x = cross(up, z);
</code></td></tr><tr><td id="L634" class="css-a4x74f"><span>634</span></td><td id="LC634" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L635" class="css-a4x74f"><span>635</span></td><td id="LC635" class="css-1dcdqdg"><code>          x = normalize(x);
</code></td></tr><tr><td id="L636" class="css-a4x74f"><span>636</span></td><td id="LC636" class="css-1dcdqdg"><code>          vec3 y = cross(z, x);
</code></td></tr><tr><td id="L637" class="css-a4x74f"><span>637</span></td><td id="LC637" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> mat3(x, y, z);
</code></td></tr><tr><td id="L638" class="css-a4x74f"><span>638</span></td><td id="LC638" class="css-1dcdqdg"><code>        }
</code></td></tr><tr><td id="L639" class="css-a4x74f"><span>639</span></td><td id="LC639" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L640" class="css-a4x74f"><span>640</span></td><td id="LC640" class="css-1dcdqdg"><code>        mat4 iMatrix(vec3 pos, mat3 rmat, vec3 scale) {
</code></td></tr><tr><td id="L641" class="css-a4x74f"><span>641</span></td><td id="LC641" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> mat4(
</code></td></tr><tr><td id="L642" class="css-a4x74f"><span>642</span></td><td id="LC642" class="css-1dcdqdg"><code>            rmat[<span class="code-number">0</span>][<span class="code-number">0</span>] * scale.x, rmat[<span class="code-number">0</span>][<span class="code-number">1</span>] * scale.x, rmat[<span class="code-number">0</span>][<span class="code-number">2</span>] * scale.x, <span class="code-number">0.0</span>,
</code></td></tr><tr><td id="L643" class="css-a4x74f"><span>643</span></td><td id="LC643" class="css-1dcdqdg"><code>            rmat[<span class="code-number">1</span>][<span class="code-number">0</span>] * scale.y, rmat[<span class="code-number">1</span>][<span class="code-number">1</span>] * scale.y, rmat[<span class="code-number">1</span>][<span class="code-number">2</span>] * scale.y, <span class="code-number">0.0</span>,
</code></td></tr><tr><td id="L644" class="css-a4x74f"><span>644</span></td><td id="LC644" class="css-1dcdqdg"><code>            rmat[<span class="code-number">2</span>][<span class="code-number">0</span>] * scale.z, rmat[<span class="code-number">2</span>][<span class="code-number">1</span>] * scale.z, rmat[<span class="code-number">2</span>][<span class="code-number">2</span>] * scale.z, <span class="code-number">0.0</span>,
</code></td></tr><tr><td id="L645" class="css-a4x74f"><span>645</span></td><td id="LC645" class="css-1dcdqdg"><code>            pos.x, pos.y, pos.z, <span class="code-number">1.0</span>
</code></td></tr><tr><td id="L646" class="css-a4x74f"><span>646</span></td><td id="LC646" class="css-1dcdqdg"><code>          );
</code></td></tr><tr><td id="L647" class="css-a4x74f"><span>647</span></td><td id="LC647" class="css-1dcdqdg"><code>        }
</code></td></tr><tr><td id="L648" class="css-a4x74f"><span>648</span></td><td id="LC648" class="css-1dcdqdg"><code>      <span class="code-string">`+f.vertexShader,f.vertexShader=f.vertexShader.replace("#include &lt;defaultnormal_vertex&gt;",""),f.vertexShader=f.vertexShader.replace("#include &lt;normal_vertex&gt;",""),f.vertexShader=f.vertexShader.replace("#include &lt;begin_vertex&gt;",`</span>
</code></td></tr><tr><td id="L649" class="css-a4x74f"><span>649</span></td><td id="LC649" class="css-1dcdqdg"><code>        vPos = texture2D(uTexturePosition, gpuUv);
</code></td></tr><tr><td id="L650" class="css-a4x74f"><span>650</span></td><td id="LC650" class="css-1dcdqdg"><code>        vec4 oldPos = texture2D(uOldTexturePosition, gpuUv);
</code></td></tr><tr><td id="L651" class="css-a4x74f"><span>651</span></td><td id="LC651" class="css-1dcdqdg"><code>        vVel = texture2D(uTextureVelocity, gpuUv);
</code></td></tr><tr><td id="L652" class="css-a4x74f"><span>652</span></td><td id="LC652" class="css-1dcdqdg"><code>        vMapIndex = float(mapIndex);
</code></td></tr><tr><td id="L653" class="css-a4x74f"><span>653</span></td><td id="LC653" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L654" class="css-a4x74f"><span>654</span></td><td id="LC654" class="css-1dcdqdg"><code>        mat3 rmat = lookAt(oldPos.xyz, vPos.xyz, vec3(<span class="code-number">0</span>, <span class="code-number">1</span>, <span class="code-number">0</span>));
</code></td></tr><tr><td id="L655" class="css-a4x74f"><span>655</span></td><td id="LC655" class="css-1dcdqdg"><code>        mat4 im = iMatrix(vPos.xyz, rmat, (<span class="code-number">0.5</span> + vPos.w) * uFishScale);
</code></td></tr><tr><td id="L656" class="css-a4x74f"><span>656</span></td><td id="LC656" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L657" class="css-a4x74f"><span>657</span></td><td id="LC657" class="css-1dcdqdg"><code>        vec3 transformed = vec3(position);
</code></td></tr><tr><td id="L658" class="css-a4x74f"><span>658</span></td><td id="LC658" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L659" class="css-a4x74f"><span>659</span></td><td id="LC659" class="css-1dcdqdg"><code>        #ifdef COMPUTE_NORMALS
</code></td></tr><tr><td id="L660" class="css-a4x74f"><span>660</span></td><td id="LC660" class="css-1dcdqdg"><code>          vec3 transformedNormal = objectNormal; 
</code></td></tr><tr><td id="L661" class="css-a4x74f"><span>661</span></td><td id="LC661" class="css-1dcdqdg"><code>        #endif
</code></td></tr><tr><td id="L662" class="css-a4x74f"><span>662</span></td><td id="LC662" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L663" class="css-a4x74f"><span>663</span></td><td id="LC663" class="css-1dcdqdg"><code>        float dz = transformed.z + <span class="code-number">1.0</span>;
</code></td></tr><tr><td id="L664" class="css-a4x74f"><span>664</span></td><td id="LC664" class="css-1dcdqdg"><code>        float sdz = smoothstep(<span class="code-number">2.0</span>, <span class="code-number">0.0</span>, dz);
</code></td></tr><tr><td id="L665" class="css-a4x74f"><span>665</span></td><td id="LC665" class="css-1dcdqdg"><code>        transformed.x += sin(vVel.w + dz * PI * <span class="code-number">1.5</span>) * sdz * uFishDisplacementScale;
</code></td></tr><tr><td id="L666" class="css-a4x74f"><span>666</span></td><td id="LC666" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L667" class="css-a4x74f"><span>667</span></td><td id="LC667" class="css-1dcdqdg"><code>        #ifdef COMPUTE_NORMALS
</code></td></tr><tr><td id="L668" class="css-a4x74f"><span>668</span></td><td id="LC668" class="css-1dcdqdg"><code>          float dz1 = dz - <span class="code-number">0.2</span>;
</code></td></tr><tr><td id="L669" class="css-a4x74f"><span>669</span></td><td id="LC669" class="css-1dcdqdg"><code>          float sdz1 = smoothstep(<span class="code-number">2.0</span>, <span class="code-number">0.0</span>, dz1);
</code></td></tr><tr><td id="L670" class="css-a4x74f"><span>670</span></td><td id="LC670" class="css-1dcdqdg"><code>          float dx1 = sin(vVel.w + dz1 * PI * <span class="code-number">1.5</span>) * sdz1 * uFishDisplacementScale - transformed.x;
</code></td></tr><tr><td id="L671" class="css-a4x74f"><span>671</span></td><td id="LC671" class="css-1dcdqdg"><code>          vec3 v1 = vec3(dx1, <span class="code-number">0.0</span>, -FISH_DZ);
</code></td></tr><tr><td id="L672" class="css-a4x74f"><span>672</span></td><td id="LC672" class="css-1dcdqdg"><code>          vec3 v2 = vec3(<span class="code-number">0.0</span>, <span class="code-number">1.0</span>, <span class="code-number">0.0</span>);
</code></td></tr><tr><td id="L673" class="css-a4x74f"><span>673</span></td><td id="LC673" class="css-1dcdqdg"><code>          transformedNormal = normalize(cross(v1, v2));
</code></td></tr><tr><td id="L674" class="css-a4x74f"><span>674</span></td><td id="LC674" class="css-1dcdqdg"><code>        #endif
</code></td></tr><tr><td id="L675" class="css-a4x74f"><span>675</span></td><td id="LC675" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L676" class="css-a4x74f"><span>676</span></td><td id="LC676" class="css-1dcdqdg"><code>        #ifdef COMPUTE_NORMALS
</code></td></tr><tr><td id="L677" class="css-a4x74f"><span>677</span></td><td id="LC677" class="css-1dcdqdg"><code>          #ifdef USE_INSTANCING
</code></td></tr><tr><td id="L678" class="css-a4x74f"><span>678</span></td><td id="LC678" class="css-1dcdqdg"><code>            mat3 m = mat3( im );
</code></td></tr><tr><td id="L679" class="css-a4x74f"><span>679</span></td><td id="LC679" class="css-1dcdqdg"><code>            transformedNormal /= vec3( dot( m[ <span class="code-number">0</span> ], m[ <span class="code-number">0</span> ] ), dot( m[ <span class="code-number">1</span> ], m[ <span class="code-number">1</span> ] ), dot( m[ <span class="code-number">2</span> ], m[ <span class="code-number">2</span> ] ) );
</code></td></tr><tr><td id="L680" class="css-a4x74f"><span>680</span></td><td id="LC680" class="css-1dcdqdg"><code>            transformedNormal = m * transformedNormal;
</code></td></tr><tr><td id="L681" class="css-a4x74f"><span>681</span></td><td id="LC681" class="css-1dcdqdg"><code>          #endif
</code></td></tr><tr><td id="L682" class="css-a4x74f"><span>682</span></td><td id="LC682" class="css-1dcdqdg"><code>          transformedNormal = normalMatrix * transformedNormal;
</code></td></tr><tr><td id="L683" class="css-a4x74f"><span>683</span></td><td id="LC683" class="css-1dcdqdg"><code>          #ifdef FLIP_SIDED
</code></td></tr><tr><td id="L684" class="css-a4x74f"><span>684</span></td><td id="LC684" class="css-1dcdqdg"><code>            transformedNormal = - transformedNormal;
</code></td></tr><tr><td id="L685" class="css-a4x74f"><span>685</span></td><td id="LC685" class="css-1dcdqdg"><code>          #endif
</code></td></tr><tr><td id="L686" class="css-a4x74f"><span>686</span></td><td id="LC686" class="css-1dcdqdg"><code>          #ifdef USE_TANGENT
</code></td></tr><tr><td id="L687" class="css-a4x74f"><span>687</span></td><td id="LC687" class="css-1dcdqdg"><code>            vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, <span class="code-number">0.0</span> ) ).xyz;
</code></td></tr><tr><td id="L688" class="css-a4x74f"><span>688</span></td><td id="LC688" class="css-1dcdqdg"><code>            #ifdef FLIP_SIDED
</code></td></tr><tr><td id="L689" class="css-a4x74f"><span>689</span></td><td id="LC689" class="css-1dcdqdg"><code>              transformedTangent = - transformedTangent;
</code></td></tr><tr><td id="L690" class="css-a4x74f"><span>690</span></td><td id="LC690" class="css-1dcdqdg"><code>            #endif
</code></td></tr><tr><td id="L691" class="css-a4x74f"><span>691</span></td><td id="LC691" class="css-1dcdqdg"><code>          #endif
</code></td></tr><tr><td id="L692" class="css-a4x74f"><span>692</span></td><td id="LC692" class="css-1dcdqdg"><code>          #ifndef FLAT_SHADED
</code></td></tr><tr><td id="L693" class="css-a4x74f"><span>693</span></td><td id="LC693" class="css-1dcdqdg"><code>            vNormal = normalize( transformedNormal );
</code></td></tr><tr><td id="L694" class="css-a4x74f"><span>694</span></td><td id="LC694" class="css-1dcdqdg"><code>            #ifdef USE_TANGENT
</code></td></tr><tr><td id="L695" class="css-a4x74f"><span>695</span></td><td id="LC695" class="css-1dcdqdg"><code>              vTangent = normalize( transformedTangent );
</code></td></tr><tr><td id="L696" class="css-a4x74f"><span>696</span></td><td id="LC696" class="css-1dcdqdg"><code>              vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
</code></td></tr><tr><td id="L697" class="css-a4x74f"><span>697</span></td><td id="LC697" class="css-1dcdqdg"><code>            #endif
</code></td></tr><tr><td id="L698" class="css-a4x74f"><span>698</span></td><td id="LC698" class="css-1dcdqdg"><code>          #endif
</code></td></tr><tr><td id="L699" class="css-a4x74f"><span>699</span></td><td id="LC699" class="css-1dcdqdg"><code>        #endif
</code></td></tr><tr><td id="L700" class="css-a4x74f"><span>700</span></td><td id="LC700" class="css-1dcdqdg"><code>      <span class="code-string">`),f.vertexShader=f.vertexShader.replace("#include &lt;project_vertex&gt;",`</span>
</code></td></tr><tr><td id="L701" class="css-a4x74f"><span>701</span></td><td id="LC701" class="css-1dcdqdg"><code>        vec4 mvPosition = vec4( transformed, <span class="code-number">1.0</span> );
</code></td></tr><tr><td id="L702" class="css-a4x74f"><span>702</span></td><td id="LC702" class="css-1dcdqdg"><code>        #ifdef USE_INSTANCING
</code></td></tr><tr><td id="L703" class="css-a4x74f"><span>703</span></td><td id="LC703" class="css-1dcdqdg"><code>          mvPosition = im * mvPosition;
</code></td></tr><tr><td id="L704" class="css-a4x74f"><span>704</span></td><td id="LC704" class="css-1dcdqdg"><code>        #endif
</code></td></tr><tr><td id="L705" class="css-a4x74f"><span>705</span></td><td id="LC705" class="css-1dcdqdg"><code>        mvPosition = modelViewMatrix * mvPosition;
</code></td></tr><tr><td id="L706" class="css-a4x74f"><span>706</span></td><td id="LC706" class="css-1dcdqdg"><code>        gl_Position = projectionMatrix * mvPosition;
</code></td></tr><tr><td id="L707" class="css-a4x74f"><span>707</span></td><td id="LC707" class="css-1dcdqdg"><code>      <span class="code-string">`),f.fragmentShader=`</span>
</code></td></tr><tr><td id="L708" class="css-a4x74f"><span>708</span></td><td id="LC708" class="css-1dcdqdg"><code>        varying float vMapIndex;
</code></td></tr><tr><td id="L709" class="css-a4x74f"><span>709</span></td><td id="LC709" class="css-1dcdqdg"><code>      <span class="code-string">`+f.fragmentShader,f.fragmentShader=f.fragmentShader.replace("#include &lt;map_fragment&gt;",`</span>
</code></td></tr><tr><td id="L710" class="css-a4x74f"><span>710</span></td><td id="LC710" class="css-1dcdqdg"><code>        #ifdef USE_MAP
</code></td></tr><tr><td id="L711" class="css-a4x74f"><span>711</span></td><td id="LC711" class="css-1dcdqdg"><code>          vec2 uv = vUv;
</code></td></tr><tr><td id="L712" class="css-a4x74f"><span>712</span></td><td id="LC712" class="css-1dcdqdg"><code>          uv.x = (vMapIndex + vUv.x) / TEXTURE_COUNT;
</code></td></tr><tr><td id="L713" class="css-a4x74f"><span>713</span></td><td id="LC713" class="css-1dcdqdg"><code>          vec4 sampledDiffuseColor = texture2D(map, uv);
</code></td></tr><tr><td id="L714" class="css-a4x74f"><span>714</span></td><td id="LC714" class="css-1dcdqdg"><code>          diffuseColor *= sampledDiffuseColor;
</code></td></tr><tr><td id="L715" class="css-a4x74f"><span>715</span></td><td id="LC715" class="css-1dcdqdg"><code>        #endif
</code></td></tr><tr><td id="L716" class="css-a4x74f"><span>716</span></td><td id="LC716" class="css-1dcdqdg"><code>      <span class="code-string">`)},e.material){case"standard":V=new Ee(P);break;case"phong":V=new it(P);break;default:V=new Me(P)}A=new De(D,V,t),k(e.colors),m.add(A)}function k(m){if(Array.isArray(m)&amp;&amp;m.length&gt;1){const C=ce(m);for(let b=0;b&lt;t;b++)A.setColorAt(b,C.getColorAt(b/t));A.instanceColor.needsUpdate=!0}}function W(m,C){const b=m.image.data,z=C.image.data;for(let T=0,P=b.length;T&lt;P;T+=4)b[T+0]=ae(100),b[T+1]=ae(100),b[T+2]=ae(100),b[T+3]=lo(.1,1),z[T+0]=ae(.5),z[T+1]=ae(.5),z[T+2]=ae(.5),z[T+3]=0}}export{Jt as butterfliesBackground,uo as fishesBackground,jt as neonCursor,Qt as noisyLinesBackground,Ht as particlesCursor,no as swarmBackground};
</span></code></td></tr><tr><td id="L717" class="css-a4x74f"><span>717</span></td><td id="LC717" class="css-1dcdqdg"><code><span class="code-string">//# sourceMappingURL=threejs-toys.module.cdn.min.js.map
</span></code></td></tr><tr><td id="L718" class="css-a4x74f"><span>718</span></td><td id="LC718" class="css-1dcdqdg"><code><span class="code-string"></span></code></td></tr><tr><td class="css-a4x74f">\</td><style data-emotion-css="jhhjkz">.css-jhhjkz{padding-left:10px;color:rgba(27,31,35,.3);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}</style><td class="css-jhhjkz">No newline at end of file</td></tr></tbody></table></div></div></div></div><style data-emotion-css="1teho9j">.css-1teho9j{margin-top:5rem;background:black;color:#aaa;}</style><footer class="css-1teho9j"><style data-emotion-css="1ui8put">.css-1ui8put{max-width:940px;padding:10px 20px;margin:0 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}</style><div class="css-1ui8put"><p><span>Build: <!-- -->a7ebffa</span></p><p><span>© <!-- -->2023<!-- --> UNPKG</span></p><style data-emotion-css="la3nd4">.css-la3nd4{font-size:1.5rem;}</style><p class="css-la3nd4"><style data-emotion-css="bogekj">.css-bogekj{color:#aaa;display:inline-block;}.css-bogekj:hover{color:white;}</style><a href="https://twitter.com/unpkg" class="css-bogekj"><style data-emotion-css="i6dzq1">.css-i6dzq1{vertical-align:text-bottom;}</style><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="css-i6dzq1" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a><style data-emotion-css="3czw03">.css-3czw03{color:#aaa;display:inline-block;margin-left:1rem;}.css-3czw03:hover{color:white;}</style><a href="https://github.com/mjackson/unpkg" class="css-3czw03"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" class="css-i6dzq1" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></p></div></footer></div><script src="/react@16.8.6/umd/react.production.min.js"></script><script src="/react-dom@16.8.6/umd/react-dom.production.min.js"></script><script src="/@emotion/core@10.0.6/dist/core.umd.min.js"></script><script>'use strict';(function(t,A,c){function w(){w=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var e=arguments[b],c;for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(a[c]=e[c])}return a};return w.apply(this,arguments)}function P(a,b){if(null==a)return{};var e={},c=Object.keys(a),d;for(d=0;d<c.length;d++){var h=c[d];0<=b.indexOf(h)||(e[h]=a[h])}return e}function Q(a,b){b||(b=a.slice(0));a.raw=b;return a}function R(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,
"default")?a["default"]:a}function D(a,b){return b={exports:{}},a(b,b.exports),b.exports}function J(a,b,e,c,d){for(var g in a)if(ua(a,g)){try{if("function"!==typeof a[g]){var r=Error((c||"React class")+": "+e+" type `"+g+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof a[g]+"`.");r.name="Invariant Violation";throw r;}var k=a[g](b,g,c,e,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(q){k=q}!k||k instanceof Error||K((c||"React class")+": type specification of "+
e+" `"+g+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof k+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).");if(k instanceof Error&&!(k.message in L)){L[k.message]=!0;var B=d?d():"";K("Failed "+e+" type: "+k.message+(null!=B?B:""))}}}function G(){return null}function S(a){var b,e=a.children;a=a.css;return c.jsx("div",{css:w((b={border:"1px solid #dfe2e5",
borderRadius:3},b["@media (max-width: 700px)"]={borderRightWidth:0,borderLeftWidth:0},b),a)},e)}function T(a){var b,e=a.children;a=a.css;return c.jsx("div",{css:w((b={padding:10,background:"#f6f8fa",color:"#424242",border:"1px solid #d1d5da",borderTopLeftRadius:3,borderTopRightRadius:3,margin:"-1px -1px 0",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},b["@media (max-width: 700px)"]={paddingRight:20,paddingLeft:20},b),a)},e)}function U(a){return a&&a.map(function(a,
c){return t.createElement(a.tag,z({key:c},a.attr),U(a.child))})}function E(a){return function(b){return t.createElement(va,z({attr:z({},a.attr)},b),U(a.child))}}function va(a){var b=function(b){var c=a.size||b.size||"1em";if(b.className)var e=b.className;a.className&&(e=(e?e+" ":"")+a.className);var h=a.attr,r=a.title,k=["attr","title"],B={},q;for(q in a)Object.prototype.hasOwnProperty.call(a,q)&&0>k.indexOf(q)&&(B[q]=a[q]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var p=0;for(q=
Object.getOwnPropertySymbols(a);p<q.length;p++)0>k.indexOf(q[p])&&(B[q[p]]=a[q[p]])}return t.createElement("svg",z({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},b.attr,h,B,{className:e,style:z({color:a.color||b.color},b.style,a.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),r&&t.createElement("title",null,r),a.children)};return void 0!==V?t.createElement(V.Consumer,null,function(a){return b(a)}):b(W)}function F(a,b){var e=b.css;b=P(b,["css"]);return c.jsx(a,w({css:w({},
e,{verticalAlign:"text-bottom"})},b))}function wa(a){return F(X,a)}function xa(a){return F(Y,a)}function ya(a){return F(Z,a)}function za(a){return F(aa,a)}function Aa(a){return F(ba,a)}function ca(a){var b=a.path,e=a.details,g=Object.keys(e).reduce(function(a,b){var c=a.subdirs,g=a.files;b=e[b];"directory"===b.type?c.push(b):"file"===b.type&&g.push(b);return a},{subdirs:[],files:[]});a=g.subdirs;g=g.files;a.sort(da("path"));g.sort(da("path"));var d=[];"/"!==b&&d.push(c.jsx("tr",{key:".."},c.jsx("td",
{css:M}),c.jsx("td",{css:y},c.jsx("a",{title:"Parent directory",href:"../",css:N},"..")),c.jsx("td",{css:y}),c.jsx("td",{css:O})));a.forEach(function(a){a=a.path.substr(1<b.length?b.length+1:1);var e=a+"/";d.push(c.jsx("tr",{key:a},c.jsx("td",{css:M},c.jsx(ya,null)),c.jsx("td",{css:y},c.jsx("a",{title:a,href:e,css:N},a)),c.jsx("td",{css:y},"-"),c.jsx("td",{css:O},"-")))});g.forEach(function(a){var e=a.size,g=a.contentType;a=a.path.substr(1<b.length?b.length+1:1);d.push(c.jsx("tr",{key:a},c.jsx("td",
{css:M},"text/plain"===g||"text/markdown"===g?c.jsx(wa,null):c.jsx(xa,null)),c.jsx("td",{css:y},c.jsx("a",{title:a,href:a,css:N},a)),c.jsx("td",{css:y},ea(e)),c.jsx("td",{css:O},g)))});var h=[];0<g.length&&h.push(g.length+" file"+(1===g.length?"":"s"));0<a.length&&h.push(a.length+" folder"+(1===a.length?"":"s"));return c.jsx(S,null,c.jsx(T,null,c.jsx("span",null,h.join(", "))),c.jsx("table",{css:{width:"100%",borderCollapse:"collapse",borderRadius:2,background:"#fff","@media (max-width: 700px)":{"& th + th + th + th, & td + td + td + td":{display:"none"}},
"& tr:first-of-type td":{borderTop:0}}},c.jsx("thead",null,c.jsx("tr",null,c.jsx("th",null,c.jsx(H,null,"Icon")),c.jsx("th",null,c.jsx(H,null,"Name")),c.jsx("th",null,c.jsx(H,null,"Size")),c.jsx("th",null,c.jsx(H,null,"Content Type")))),c.jsx("tbody",null,d)))}function Ba(a){a=a.split("/");return a[a.length-1]}function Ca(a){var b=a.uri;return c.jsx("div",{css:{padding:20,textAlign:"center"}},c.jsx("img",{alt:Ba(a.path),src:b}))}function Da(a){a=a.highlights.slice(0);var b=a.length&&""===a[a.length-
1];b&&a.pop();return c.jsx("div",{className:"code-listing",css:{overflowX:"auto",overflowY:"hidden",paddingTop:5,paddingBottom:5}},c.jsx("table",{css:{border:"none",borderCollapse:"collapse",borderSpacing:0}},c.jsx("tbody",null,a.map(function(a,b){var e=b+1;return c.jsx("tr",{key:b},c.jsx("td",{id:"L"+e,css:{paddingLeft:10,paddingRight:10,color:"rgba(27,31,35,.3)",textAlign:"right",verticalAlign:"top",width:"1%",minWidth:50,userSelect:"none"}},c.jsx("span",null,e)),c.jsx("td",{id:"LC"+e,css:{paddingLeft:10,
paddingRight:10,color:"#24292e",whiteSpace:"pre"}},c.jsx("code",{dangerouslySetInnerHTML:{__html:a}})))}),!b&&c.jsx("tr",{key:"no-newline"},c.jsx("td",{css:{paddingLeft:10,paddingRight:10,color:"rgba(27,31,35,.3)",textAlign:"right",verticalAlign:"top",width:"1%",minWidth:50,userSelect:"none"}},"\\"),c.jsx("td",{css:{paddingLeft:10,color:"rgba(27,31,35,.3)",userSelect:"none"}},"No newline at end of file")))))}function Ea(){return c.jsx("div",{css:{padding:20}},c.jsx("p",{css:{textAlign:"center"}},
"No preview available."))}function fa(a){var b=a.packageName,e=a.packageVersion,g=a.path;a=a.details;var d=a.highlights,h=a.uri,r=a.language;return c.jsx(S,null,c.jsx(T,null,c.jsx("span",null,ea(a.size)),c.jsx("span",null,r),c.jsx("span",null,c.jsx("a",{href:"/"+b+"@"+e+g,css:{display:"inline-block",marginLeft:8,padding:"2px 8px",textDecoration:"none",fontWeight:600,fontSize:"0.9rem",color:"#24292e",backgroundColor:"#eff3f6",border:"1px solid rgba(27,31,35,.2)",borderRadius:3,":hover":{backgroundColor:"#e6ebf1",
borderColor:"rgba(27,31,35,.35)"},":active":{backgroundColor:"#e9ecef",borderColor:"rgba(27,31,35,.35)",boxShadow:"inset 0 0.15em 0.3em rgba(27,31,35,.15)"}}},"View Raw"))),d?c.jsx(Da,{highlights:d}):h?c.jsx(Ca,{path:g,uri:h}):c.jsx(Ea,null))}function ha(){var a=Q(["\n  .code-listing {\n    background: #fbfdff;\n    color: #383a42;\n  }\n  .code-comment,\n  .code-quote {\n    color: #a0a1a7;\n    font-style: italic;\n  }\n  .code-doctag,\n  .code-keyword,\n  .code-link,\n  .code-formula {\n    color: #a626a4;\n  }\n  .code-section,\n  .code-name,\n  .code-selector-tag,\n  .code-deletion,\n  .code-subst {\n    color: #e45649;\n  }\n  .code-literal {\n    color: #0184bb;\n  }\n  .code-string,\n  .code-regexp,\n  .code-addition,\n  .code-attribute,\n  .code-meta-string {\n    color: #50a14f;\n  }\n  .code-built_in,\n  .code-class .code-title {\n    color: #c18401;\n  }\n  .code-attr,\n  .code-variable,\n  .code-template-variable,\n  .code-type,\n  .code-selector-class,\n  .code-selector-attr,\n  .code-selector-pseudo,\n  .code-number {\n    color: #986801;\n  }\n  .code-symbol,\n  .code-bullet,\n  .code-meta,\n  .code-selector-id,\n  .code-title {\n    color: #4078f2;\n  }\n  .code-emphasis {\n    font-style: italic;\n  }\n  .code-strong {\n    font-weight: bold;\n  }\n"]);
ha=function(){return a};return a}function ia(){var a=Q(["\n  html {\n    box-sizing: border-box;\n  }\n  *,\n  *:before,\n  *:after {\n    box-sizing: inherit;\n  }\n\n  html,\n  body,\n  #root {\n    height: 100%;\n    margin: 0;\n  }\n\n  body {\n    ","\n    font-size: 16px;\n    line-height: 1.5;\n    overflow-wrap: break-word;\n    background: white;\n    color: black;\n  }\n\n  code {\n    ","\n  }\n\n  th,\n  td {\n    padding: 0;\n  }\n\n  select {\n    font-size: inherit;\n  }\n\n  #root {\n    display: flex;\n    flex-direction: column;\n  }\n"]);
ia=function(){return a};return a}function ja(a){var b=a.css;a=P(a,["css"]);return c.jsx("a",w({},a,{css:w({color:"#0076ff",textDecoration:"none",":hover":{textDecoration:"underline"}},b)}))}function Fa(){return c.jsx("header",{css:{marginTop:"2rem"}},c.jsx("h1",{css:{textAlign:"center",fontSize:"3rem",letterSpacing:"0.05em"}},c.jsx("a",{href:"/",css:{color:"#000",textDecoration:"none"}},"UNPKG")))}function Ga(a){var b=a.packageName,e=a.packageVersion,g=a.availableVersions;a=a.filename;var d=[];if("/"===
a)d.push(b);else{var h="/browse/"+b+"@"+e;d.push(c.jsx(ja,{href:h+"/"},b));b=a.replace(/^\/+/,"").replace(/\/+$/,"").split("/");a=b.pop();b.forEach(function(a){h+="/"+a;d.push(c.jsx(ja,{href:h+"/"},a))});d.push(a)}return c.jsx("header",{css:{display:"flex",flexDirection:"row",alignItems:"center","@media (max-width: 700px)":{flexDirection:"column-reverse",alignItems:"flex-start"}}},c.jsx("h1",{css:{fontSize:"1.5rem",fontWeight:"normal",flex:1,wordBreak:"break-all"}},c.jsx("nav",null,d.map(function(a,
b,e){return c.jsx(t.Fragment,{key:b},0!==b&&c.jsx("span",{css:{paddingLeft:5,paddingRight:5}},"/"),b===e.length-1?c.jsx("strong",null,a):a)}))),c.jsx(Ha,{packageVersion:e,availableVersions:g,onChange:function(a){window.location.href=window.location.href.replace("@"+e,"@"+a)}}))}function Ha(a){var b=a.onChange;return c.jsx("p",{css:{marginLeft:20,"@media (max-width: 700px)":{marginLeft:0,marginBottom:0}}},c.jsx("label",null,"Version:"," ",c.jsx("select",{name:"version",defaultValue:a.packageVersion,
onChange:function(a){b&&b(a.target.value)},css:{appearance:"none",cursor:"pointer",padding:"4px 24px 4px 8px",fontWeight:600,fontSize:"0.9em",color:"#24292e",border:"1px solid rgba(27,31,35,.2)",borderRadius:3,backgroundColor:"#eff3f6",backgroundImage:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAKCAYAAAC9vt6cAAAAAXNSR0IArs4c6QAAARFJREFUKBVjZAACNS39RhBNKrh17WI9o4quoT3Dn78HSNUMUs/CzOTI/O7Vi4dCYpJ3/jP+92BkYGAlyiBGhm8MjIxJt65e3MQM0vDu9YvLYmISILYZELOBxHABRkaGr0yMzF23r12YDFIDNgDEePv65SEhEXENBkYGFSAXuyGMjF8Z/jOsvX3tYiFIDwgwQSgIaaijnvj/P8M5IO8HsjiY/f//D4b//88A1SQhywG9jQr09PS4v/1mPAeUUPzP8B8cJowMjL+Bqu6xMQmaXL164AuyDgwDQJLa2qYSP//9vARkCoMVMzK8YeVkNbh+9uxzMB+JwGoASF5Vx0jz/98/18BqmZi171w9D2EjaaYKEwAEK00XQLdJuwAAAABJRU5ErkJggg==)",
backgroundPosition:"right 8px center",backgroundRepeat:"no-repeat",backgroundSize:"auto 25%",":hover":{backgroundColor:"#e6ebf1",borderColor:"rgba(27,31,35,.35)"},":active":{backgroundColor:"#e9ecef",borderColor:"rgba(27,31,35,.35)",boxShadow:"inset 0 0.15em 0.3em rgba(27,31,35,.15)"}}},a.availableVersions.map(function(a){return c.jsx("option",{key:a,value:a},a)}))))}function Ia(a){var b=a.packageName,e=a.packageVersion;a=a.target;return"directory"===a.type?c.jsx(ca,{path:a.path,details:a.details}):
"file"===a.type?c.jsx(fa,{packageName:b,packageVersion:e,path:a.path,details:a.details}):null}function ka(a){var b=a.packageName,e=a.packageVersion,g=a.availableVersions;g=void 0===g?[]:g;var d=a.filename;a=a.target;return c.jsx(t.Fragment,null,c.jsx(c.Global,{styles:Ja}),c.jsx(c.Global,{styles:Ka}),c.jsx("div",{css:{flex:"1 0 auto"}},c.jsx("div",{css:{maxWidth:940,padding:"0 20px",margin:"0 auto"}},c.jsx(Fa,null)),c.jsx("div",{css:{maxWidth:940,padding:"0 20px",margin:"0 auto"}},c.jsx(Ga,{packageName:b,
packageVersion:e,availableVersions:g,filename:d})),c.jsx("div",{css:{maxWidth:940,padding:"0 20px",margin:"0 auto","@media (max-width: 700px)":{padding:0,margin:0}}},c.jsx(Ia,{packageName:b,packageVersion:e,target:a}))),c.jsx("footer",{css:{marginTop:"5rem",background:"black",color:"#aaa"}},c.jsx("div",{css:{maxWidth:940,padding:"10px 20px",margin:"0 auto",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},c.jsx("p",null,c.jsx("span",null,"Build: ","a7ebffa")),
c.jsx("p",null,c.jsx("span",null,"\u00a9 ",(new Date).getFullYear()," UNPKG")),c.jsx("p",{css:{fontSize:"1.5rem"}},c.jsx("a",{href:"https://twitter.com/unpkg",css:{color:"#aaa",display:"inline-block",":hover":{color:"white"}}},c.jsx(za,null)),c.jsx("a",{href:"https://github.com/mjackson/unpkg",css:{color:"#aaa",display:"inline-block",":hover":{color:"white"},marginLeft:"1rem"}},c.jsx(Aa,null))))))}var la="default"in t?t["default"]:t;A=A&&A.hasOwnProperty("default")?A["default"]:A;var La="undefined"!==
typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},m=D(function(a,b){function c(a){if("object"===typeof a&&null!==a){var b=a.$$typeof;switch(b){case d:switch(a=a.type,a){case l:case f:case r:case m:case k:case v:return a;default:switch(a=a&&a.$$typeof,a){case p:case n:case q:return a;default:return b}}case x:case u:case h:return b}}}function g(a){return c(a)===f}Object.defineProperty(b,"__esModule",{value:!0});var d=
(a="function"===typeof Symbol&&Symbol.for)?Symbol.for("react.element"):60103,h=a?Symbol.for("react.portal"):60106,r=a?Symbol.for("react.fragment"):60107,k=a?Symbol.for("react.strict_mode"):60108,m=a?Symbol.for("react.profiler"):60114,q=a?Symbol.for("react.provider"):60109,p=a?Symbol.for("react.context"):60110,l=a?Symbol.for("react.async_mode"):60111,f=a?Symbol.for("react.concurrent_mode"):60111,n=a?Symbol.for("react.forward_ref"):60112,v=a?Symbol.for("react.suspense"):60113,u=a?Symbol.for("react.memo"):
60115,x=a?Symbol.for("react.lazy"):60116;b.typeOf=c;b.AsyncMode=l;b.ConcurrentMode=f;b.ContextConsumer=p;b.ContextProvider=q;b.Element=d;b.ForwardRef=n;b.Fragment=r;b.Lazy=x;b.Memo=u;b.Portal=h;b.Profiler=m;b.StrictMode=k;b.Suspense=v;b.isValidElementType=function(a){return"string"===typeof a||"function"===typeof a||a===r||a===f||a===m||a===k||a===v||"object"===typeof a&&null!==a&&(a.$$typeof===x||a.$$typeof===u||a.$$typeof===q||a.$$typeof===p||a.$$typeof===n)};b.isAsyncMode=function(a){return g(a)||
c(a)===l};b.isConcurrentMode=g;b.isContextConsumer=function(a){return c(a)===p};b.isContextProvider=function(a){return c(a)===q};b.isElement=function(a){return"object"===typeof a&&null!==a&&a.$$typeof===d};b.isForwardRef=function(a){return c(a)===n};b.isFragment=function(a){return c(a)===r};b.isLazy=function(a){return c(a)===x};b.isMemo=function(a){return c(a)===u};b.isPortal=function(a){return c(a)===h};b.isProfiler=function(a){return c(a)===m};b.isStrictMode=function(a){return c(a)===k};b.isSuspense=
function(a){return c(a)===v}});R(m);var na=D(function(a,b){(function(){function a(a){if("object"===typeof a&&null!==a){var b=a.$$typeof;switch(b){case h:switch(a=a.type,a){case f:case n:case k:case q:case m:case u:return a;default:switch(a=a&&a.$$typeof,a){case l:case v:case p:return a;default:return b}}case I:case x:case r:return b}}}function c(b){return a(b)===n}Object.defineProperty(b,"__esModule",{value:!0});var d="function"===typeof Symbol&&Symbol.for,h=d?Symbol.for("react.element"):60103,r=
d?Symbol.for("react.portal"):60106,k=d?Symbol.for("react.fragment"):60107,m=d?Symbol.for("react.strict_mode"):60108,q=d?Symbol.for("react.profiler"):60114,p=d?Symbol.for("react.provider"):60109,l=d?Symbol.for("react.context"):60110,f=d?Symbol.for("react.async_mode"):60111,n=d?Symbol.for("react.concurrent_mode"):60111,v=d?Symbol.for("react.forward_ref"):60112,u=d?Symbol.for("react.suspense"):60113,x=d?Symbol.for("react.memo"):60115,I=d?Symbol.for("react.lazy"):60116;d=function(){};var Ma=function(a){for(var b=
arguments.length,f=Array(1<b?b-1:0),c=1;c<b;c++)f[c-1]=arguments[c];var n=0;b="Warning: "+a.replace(/%s/g,function(){return f[n++]});"undefined"!==typeof console&&console.warn(b);try{throw Error(b);}catch(Xa){}},Na=d=function(a,b){if(void 0===b)throw Error("`lowPriorityWarning(condition, format, ...args)` requires a warning message argument");if(!a){for(var f=arguments.length,c=Array(2<f?f-2:0),n=2;n<f;n++)c[n-2]=arguments[n];Ma.apply(void 0,[b].concat(c))}},ma=!1;b.typeOf=a;b.AsyncMode=f;b.ConcurrentMode=
n;b.ContextConsumer=l;b.ContextProvider=p;b.Element=h;b.ForwardRef=v;b.Fragment=k;b.Lazy=I;b.Memo=x;b.Portal=r;b.Profiler=q;b.StrictMode=m;b.Suspense=u;b.isValidElementType=function(a){return"string"===typeof a||"function"===typeof a||a===k||a===n||a===q||a===m||a===u||"object"===typeof a&&null!==a&&(a.$$typeof===I||a.$$typeof===x||a.$$typeof===p||a.$$typeof===l||a.$$typeof===v)};b.isAsyncMode=function(b){ma||(ma=!0,Na(!1,"The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API."));
return c(b)||a(b)===f};b.isConcurrentMode=c;b.isContextConsumer=function(b){return a(b)===l};b.isContextProvider=function(b){return a(b)===p};b.isElement=function(a){return"object"===typeof a&&null!==a&&a.$$typeof===h};b.isForwardRef=function(b){return a(b)===v};b.isFragment=function(b){return a(b)===k};b.isLazy=function(b){return a(b)===I};b.isMemo=function(b){return a(b)===x};b.isPortal=function(b){return a(b)===r};b.isProfiler=function(b){return a(b)===q};b.isStrictMode=function(b){return a(b)===
m};b.isSuspense=function(b){return a(b)===u}})()});R(na);var oa=D(function(a){a.exports=na}),pa=Object.getOwnPropertySymbols,Oa=Object.prototype.hasOwnProperty,Pa=Object.prototype.propertyIsEnumerable,Qa=function(){try{if(!Object.assign)return!1;var a=new String("abc");a[5]="de";if("5"===Object.getOwnPropertyNames(a)[0])return!1;var b={};for(a=0;10>a;a++)b["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(b).map(function(a){return b[a]}).join(""))return!1;var c={};"abcdefghijklmnopqrst".split("").forEach(function(a){c[a]=
a});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},c)).join("")?!1:!0}catch(g){return!1}}()?Object.assign:function(a,b){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");var c=Object(a);for(var g,d=1;d<arguments.length;d++){var h=Object(arguments[d]);for(var r in h)Oa.call(h,r)&&(c[r]=h[r]);if(pa){g=pa(h);for(var k=0;k<g.length;k++)Pa.call(h,g[k])&&(c[g[k]]=h[g[k]])}}return c},K=function(){},L={},ua=Function.call.bind(Object.prototype.hasOwnProperty);
K=function(a){a="Warning: "+a;"undefined"!==typeof console&&console.error(a);try{throw Error(a);}catch(b){}};J.resetWarningCache=function(){L={}};var Ra=Function.call.bind(Object.prototype.hasOwnProperty),C=function(){};C=function(a){a="Warning: "+a;"undefined"!==typeof console&&console.error(a);try{throw Error(a);}catch(b){}};var Sa=function(a,b){function c(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}function g(a){this.message=a;this.stack=""}function d(a){function c(c,n,v,d,e,u,h){d=d||"<<anonymous>>";
u=u||v;if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==h){if(b)throw c=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types"),c.name="Invariant Violation",c;"undefined"!==typeof console&&(h=d+":"+v,!f[h]&&3>l&&(C("You are manually calling a React.PropTypes validation function for the `"+u+"` prop on `"+d+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),
f[h]=!0,l++))}return null==n[v]?c?null===n[v]?new g("The "+e+" `"+u+"` is marked as required "+("in `"+d+"`, but its value is `null`.")):new g("The "+e+" `"+u+"` is marked as required in "+("`"+d+"`, but its value is `undefined`.")):null:a(n,v,d,e,u)}var f={},l=0,d=c.bind(null,!1);d.isRequired=c.bind(null,!0);return d}function h(a){return d(function(b,c,f,d,l,e){b=b[c];return k(b)!==a?(b=m(b),new g("Invalid "+d+" `"+l+"` of type "+("`"+b+"` supplied to `"+f+"`, expected ")+("`"+a+"`."))):null})}function r(b){switch(typeof b){case "number":case "string":case "undefined":return!0;
case "boolean":return!b;case "object":if(Array.isArray(b))return b.every(r);if(null===b||a(b))return!0;var c=b&&(p&&b[p]||b["@@iterator"]);var f="function"===typeof c?c:void 0;if(f)if(c=f.call(b),f!==b.entries)for(;!(b=c.next()).done;){if(!r(b.value))return!1}else for(;!(b=c.next()).done;){if((b=b.value)&&!r(b[1]))return!1}else return!1;return!0;default:return!1}}function k(a){var b=typeof a;return Array.isArray(a)?"array":a instanceof RegExp?"object":"symbol"===b||a&&("Symbol"===a["@@toStringTag"]||
"function"===typeof Symbol&&a instanceof Symbol)?"symbol":b}function m(a){if("undefined"===typeof a||null===a)return""+a;var b=k(a);if("object"===b){if(a instanceof Date)return"date";if(a instanceof RegExp)return"regexp"}return b}function q(a){a=m(a);switch(a){case "array":case "object":return"an "+a;case "boolean":case "date":case "regexp":return"a "+a;default:return a}}var p="function"===typeof Symbol&&Symbol.iterator,l={array:h("array"),bool:h("boolean"),func:h("function"),number:h("number"),object:h("object"),
string:h("string"),symbol:h("symbol"),any:d(G),arrayOf:function(a){return d(function(b,c,f,d,l){if("function"!==typeof a)return new g("Property `"+l+"` of component `"+f+"` has invalid PropType notation inside arrayOf.");b=b[c];if(!Array.isArray(b))return b=k(b),new g("Invalid "+d+" `"+l+"` of type "+("`"+b+"` supplied to `"+f+"`, expected an array."));for(c=0;c<b.length;c++){var n=a(b,c,f,d,l+"["+c+"]","SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");if(n instanceof Error)return n}return null})},
element:function(){return d(function(b,c,d,l,e){b=b[c];return a(b)?null:(b=k(b),new g("Invalid "+l+" `"+e+"` of type "+("`"+b+"` supplied to `"+d+"`, expected a single ReactElement.")))})}(),elementType:function(){return d(function(a,b,c,d,l){a=a[b];return oa.isValidElementType(a)?null:(a=k(a),new g("Invalid "+d+" `"+l+"` of type "+("`"+a+"` supplied to `"+c+"`, expected a single ReactElement type.")))})}(),instanceOf:function(a){return d(function(b,c,f,d,l){if(!(b[c]instanceof a)){var n=a.name||
"<<anonymous>>";b=b[c];b=b.constructor&&b.constructor.name?b.constructor.name:"<<anonymous>>";return new g("Invalid "+d+" `"+l+"` of type "+("`"+b+"` supplied to `"+f+"`, expected ")+("instance of `"+n+"`."))}return null})},node:function(){return d(function(a,b,c,d,l){return r(a[b])?null:new g("Invalid "+d+" `"+l+"` supplied to "+("`"+c+"`, expected a ReactNode."))})}(),objectOf:function(a){return d(function(b,c,f,d,l){if("function"!==typeof a)return new g("Property `"+l+"` of component `"+f+"` has invalid PropType notation inside objectOf.");
b=b[c];c=k(b);if("object"!==c)return new g("Invalid "+d+" `"+l+"` of type "+("`"+c+"` supplied to `"+f+"`, expected an object."));for(var n in b)if(Ra(b,n)&&(c=a(b,n,f,d,l+"."+n,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"),c instanceof Error))return c;return null})},oneOf:function(a){return Array.isArray(a)?d(function(b,f,d,l,e){b=b[f];for(f=0;f<a.length;f++)if(c(b,a[f]))return null;f=JSON.stringify(a,function(a,b){return"symbol"===m(b)?String(b):b});return new g("Invalid "+l+" `"+e+"` of value `"+
String(b)+"` "+("supplied to `"+d+"`, expected one of "+f+"."))}):(1<arguments.length?C("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):C("Invalid argument supplied to oneOf, expected an array."),G)},oneOfType:function(a){if(!Array.isArray(a))return C("Invalid argument supplied to oneOfType, expected an instance of array."),G;for(var b=0;b<a.length;b++){var c=a[b];if("function"!==
typeof c)return C("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+q(c)+" at index "+b+"."),G}return d(function(b,c,f,d,l){for(var e=0;e<a.length;e++)if(null==(0,a[e])(b,c,f,d,l,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"))return null;return new g("Invalid "+d+" `"+l+"` supplied to "+("`"+f+"`."))})},shape:function(a){return d(function(b,c,d,l,f){b=b[c];c=k(b);if("object"!==c)return new g("Invalid "+l+" `"+f+"` of type `"+c+"` "+("supplied to `"+d+"`, expected `object`."));
for(var e in a)if(c=a[e])if(c=c(b,e,d,l,f+"."+e,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"))return c;return null})},exact:function(a){return d(function(b,c,d,l,f){var e=b[c],n=k(e);if("object"!==n)return new g("Invalid "+l+" `"+f+"` of type `"+n+"` "+("supplied to `"+d+"`, expected `object`."));n=Qa({},b[c],a);for(var h in n){n=a[h];if(!n)return new g("Invalid "+l+" `"+f+"` key `"+h+"` supplied to `"+d+"`.\nBad object: "+JSON.stringify(b[c],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(a),
null,"  "));if(n=n(e,h,d,l,f+"."+h,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"))return n}return null})}};g.prototype=Error.prototype;l.checkPropTypes=J;l.resetWarningCache=J.resetWarningCache;return l.PropTypes=l};m=D(function(a){a.exports=Sa(oa.isElement,!0)});var Ta=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],g;for(g in c)Object.prototype.hasOwnProperty.call(c,g)&&(a[g]=c[g])}return a},Ua={border:0,clip:"rect(0 0 0 0)",height:"1px",width:"1px",margin:"-1px",
padding:0,overflow:"hidden",position:"absolute"},H=function(a){return la.createElement("div",Ta({style:Ua},a))},qa=D(function(a){(function(b,c){a.exports=c()})(La,function(){function a(a){if(!a)return!0;if(!d(a)||0!==a.length)for(var b in a)if(q.call(a,b))return!1;return!0}function c(a){return"number"===typeof a||"[object Number]"===t.call(a)}function g(a){return"string"===typeof a||"[object String]"===t.call(a)}function d(a){return"object"===typeof a&&"number"===typeof a.length&&"[object Array]"===
t.call(a)}function h(a){var b=parseInt(a);return b.toString()===a?b:a}function m(b,d,e,k){c(d)&&(d=[d]);if(a(d))return b;if(g(d))return m(b,d.split("."),e,k);var f=h(d[0]);if(1===d.length)return d=b[f],void 0!==d&&k||(b[f]=e),d;void 0===b[f]&&(c(f)?b[f]=[]:b[f]={});return m(b[f],d.slice(1),e,k)}function k(b,f){c(f)&&(f=[f]);if(!a(b)){if(a(f))return b;if(g(f))return k(b,f.split("."));var e=h(f[0]),l=b[e];if(1===f.length)void 0!==l&&(d(b)?b.splice(e,1):delete b[e]);else if(void 0!==b[e])return k(b[e],
f.slice(1));return b}}var t=Object.prototype.toString,q=Object.prototype.hasOwnProperty,p={ensureExists:function(a,b,c){return m(a,b,c,!0)},set:function(a,b,c,d){return m(a,b,c,d)},insert:function(a,b,c,e){var f=p.get(a,b);e=~~e;d(f)||(f=[],p.set(a,b,f));f.splice(e,0,c)},empty:function(b,f){if(a(f))return b;if(!a(b)){var e,h;if(!(e=p.get(b,f)))return b;if(g(e))return p.set(b,f,"");if("boolean"===typeof e||"[object Boolean]"===t.call(e))return p.set(b,f,!1);if(c(e))return p.set(b,f,0);if(d(e))e.length=
0;else if("object"===typeof e&&"[object Object]"===t.call(e))for(h in e)q.call(e,h)&&delete e[h];else return p.set(b,f,null)}},push:function(a,b){var c=p.get(a,b);d(c)||(c=[],p.set(a,b,c));c.push.apply(c,Array.prototype.slice.call(arguments,2))},coalesce:function(a,b,c){for(var d,e=0,f=b.length;e<f;e++)if(void 0!==(d=p.get(a,b[e])))return d;return c},get:function(b,d,e){c(d)&&(d=[d]);if(a(d))return b;if(a(b))return e;if(g(d))return p.get(b,d.split("."),e);var f=h(d[0]);return 1===d.length?void 0===
b[f]?e:b[f]:p.get(b[f],d.slice(1),e)},del:function(a,b){return k(a,b)}};return p})});var ra=function(a){return function(b){return typeof b===a}};var Va=function(a,b){var c=1,g=b||function(a,b){return b};"-"===a[0]&&(c=-1,a=a.substr(1));return function(b,e){var d;b=g(a,qa.get(b,a));e=g(a,qa.get(e,a));b<e&&(d=-1);b>e&&(d=1);b===e&&(d=0);return d*c}};var da=function(){var a=Array.prototype.slice.call(arguments),b=a.filter(ra("string")),c=a.filter(ra("function"))[0];return function(a,d){for(var e=b.length,
g=0,k=0;0===g&&k<e;)g=Va(b[k],c)(a,d),k++;return g}};let sa="B kB MB GB TB PB EB ZB YB".split(" "),ta=(a,b)=>{let c=a;"string"===typeof b?c=a.toLocaleString(b):!0===b&&(c=a.toLocaleString());return c};var ea=(a,b)=>{if(!Number.isFinite(a))throw new TypeError(`Expected a finite number, got ${typeof a}: ${a}`);b=Object.assign({},b);if(b.signed&&0===a)return" 0 B";var c=0>a;let g=c?"-":b.signed?"+":"";c&&(a=-a);if(1>a)return a=ta(a,b.locale),g+a+" B";c=Math.min(Math.floor(Math.log10(a)/3),sa.length-
1);a=Number((a/Math.pow(1E3,c)).toPrecision(3));a=ta(a,b.locale);return g+a+" "+sa[c]},W={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},V=t.createContext&&t.createContext(W),z=function(){z=Object.assign||function(a){for(var b,c=1,g=arguments.length;c<g;c++){b=arguments[c];for(var d in b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d])}return a};return z.apply(this,arguments)},Y=function(a){return E({tag:"svg",attr:{viewBox:"0 0 12 16"},child:[{tag:"path",attr:{fillRule:"evenodd",
d:"M8.5 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h10c.55 0 1-.45 1-1V4.5L8.5 1zM11 14H1V2h7l3 3v9zM5 6.98L3.5 8.5 5 10l-.5 1L2 8.5 4.5 6l.5.98zM7.5 6L10 8.5 7.5 11l-.5-.98L8.5 8.5 7 7l.5-1z"}}]})(a)};Y.displayName="GoFileCode";var Z=function(a){return E({tag:"svg",attr:{viewBox:"0 0 14 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M13 4H7V3c0-.66-.31-1-1-1H1c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V5c0-.55-.45-1-1-1zM6 4H1V3h5v1z"}}]})(a)};Z.displayName="GoFileDirectory";var X=function(a){return E({tag:"svg",
attr:{viewBox:"0 0 12 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z"}}]})(a)};X.displayName="GoFile";var ba=function(a){return E({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"}}]})(a)};
ba.displayName="FaGithub";var aa=function(a){return E({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"}}]})(a)};
aa.displayName="FaTwitter";var N={color:"#0076ff",textDecoration:"none",":hover":{textDecoration:"underline"}},y={paddingTop:6,paddingRight:3,paddingBottom:6,paddingLeft:3,borderTop:"1px solid #eaecef"},M=w({},y,{color:"#424242",width:17,paddingRight:2,paddingLeft:10,"@media (max-width: 700px)":{paddingLeft:20}}),O=w({},y,{textAlign:"right",paddingRight:10,"@media (max-width: 700px)":{paddingRight:20}});ca.propTypes={path:m.string.isRequired,details:m.objectOf(m.shape({path:m.string.isRequired,type:m.oneOf(["directory",
"file"]).isRequired,contentType:m.string,integrity:m.string,size:m.number})).isRequired};fa.propTypes={path:m.string.isRequired,details:m.shape({contentType:m.string.isRequired,highlights:m.arrayOf(m.string),uri:m.string,integrity:m.string.isRequired,language:m.string.isRequired,size:m.number.isRequired}).isRequired};var Ja=c.css(ia(),'\nfont-family: -apple-system,\n  BlinkMacSystemFont,\n  "Segoe UI",\n  "Roboto",\n  "Oxygen",\n  "Ubuntu",\n  "Cantarell",\n  "Fira Sans",\n  "Droid Sans",\n  "Helvetica Neue",\n  sans-serif;\n',
"\nfont-family: Menlo,\n  Monaco,\n  Lucida Console,\n  Liberation Mono,\n  DejaVu Sans Mono,\n  Bitstream Vera Sans Mono,\n  Courier New,\n  monospace;\n"),Ka=c.css(ha()),Wa=m.shape({path:m.string.isRequired,type:m.oneOf(["directory","file"]).isRequired,details:m.object.isRequired});ka.propTypes={packageName:m.string.isRequired,packageVersion:m.string.isRequired,availableVersions:m.arrayOf(m.string),filename:m.string.isRequired,target:Wa.isRequired};A.hydrate(la.createElement(ka,window.__DATA__||
{}),document.getElementById("root"))})(React,ReactDOM,emotionCore);
</script></body></html>